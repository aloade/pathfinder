<!-- NOTE IMPORTANTE
- sheet worker
    - pour les "sheet worker" si des repeating sont en cause, envoyer les résulats sur des input "hidden"
- balises interdites
    - les balises attr, article, section ne sont n'est pas autorisés
    - les attributes "data" pour les balises ne sont pas autorisées
- repeating
    - pas d'undescore pour la classe "repeating_XXX"
- rolltemplate
    - les règles css pour les rolltemplate sont unique pour chaqu'un

- les input ont un width imposé, obligation d'utiliser "important"
-->

<script type="text/worker">
    /* ===== PARAMETERS ==========
    destination     the name of the attribute that stores the total quantity
    section         name of repeating fieldset, without the repeating_
    fields          the name of the attribute field to be summed
                    can be a single attribute: 'weight'
                    or an array of attributes: ['weight','number','equipped']
    multiplier      a multiplier to the entire fieldset total.
                    For instance, if summing coins of weight 0.02, might want to multiply the final total by 0.02.
    */
    const repeatingSum = (destination, section, fields, multiplier = 1) => {
            if (!Array.isArray(fields)) fields = [fields];
            getSectionIDs(`repeating_${section}`, idArray => {
                const attrArray = idArray.reduce( (m,id) => [...m, ...(fields.map(field => `repeating_${section}_${id}_${field}`))],[]);
                getAttrs(attrArray, v => {
                    console.log("v: "+ JSON.stringify(v));

                    // getValue: if not a number, returns 1 if it is 'on' (checkbox), otherwise returns 0..
                    const getValue = (section, id, field) => parseFloat(v[`repeating_${section}_${id}_${field}`], 10) || (v[`repeating_${section}_${id}_${field}`] === "on" ? 1 : 0);
                    const sumTotal = idArray.reduce((total, id) => total + fields.reduce((subtotal,field) => subtotal * getValue(section, id,field),1),0);

                    console.log({[destination]: sumTotal * multiplier});
                    setAttrs({[destination]: sumTotal * multiplier});
                });
            });
    };

    /* classes */
    // repeating_<section>_<field>
    on("sheet:opened change:repeating_classes remove:repeating_classes", function() {
        console.log("--repeating_classes-----------------------------------------");
        let section = "repeating_classes";
        let fields = ["classes_bba", "classes_compniv", "classes_vigor", "classes_reflexes", "classes_willpower", "classes_level"];
        let test = [
                ["classes_bba1", "foo_classes_bba_total1"],
                ["classes_bba2", "foo_classes_bba_total2"],
                ["classes_bba3", "foo_classes_bba_total3"],
                ["classes_bba4", "foo_classes_bba_total4"],
                ["classes_compniv", "foo_classes_compniv_total"],
                ["classes_vigor", "foo_classes_vigor_total"],
                ["classes_reflexes", "foo_classes_relfexes_total"],
                ["classes_willpower", "foo_classes_willpower_total"],
                ["classes_level", "foo_classes_level_total"]
            ];
        let attr = fields.map(field => `${section}_${field}`);

        getSectionIDs(section, id => {
            console.log("id");
            console.log(id);

            let attr = id.reduce( (m,id) => [...m, ...(fields.map(field => `${section}_${id}_${field}`))],[]);
            console.log("attr");
            console.log(attr);
                getAttrs(attr, load => {
                    // if not a number, returns 1 if it is 'on' (checkbox), otherwise returns 0.
                    const load_formated = (section, id, field) => parseFloat(load[`${section}_${id}_${field}`], 10) || (load[`${section}_${id}_${field}`] === "on" ? 1 : 0);
                    console.log("getAttrs");
                    console.log(load_formated);
                });
            /*
            getAttrs(attr, load => {
                console.log("-------------------------------------------");
                console.log("attr: "+ JSON.stringify(attr));
                console.log("load: "+ JSON.stringify(load));
                // getValue: if not a number, returns 1 if it is 'on' (checkbox), otherwise returns 0..
                //let getValue = (section, id, field) => parseFloat(load[`${section}_${id}_${field}`], 10) || (v[`repeating_${section}_${id}_${field}`] === "on" ? 1 : 0);
            });
            */
        });
    	repeatingSum("foo_classes_bba1_total", "classes", "classes_bba1");
    	repeatingSum("foo_classes_bba2_total", "classes", "classes_bba2");
    	repeatingSum("foo_classes_bba3_total", "classes", "classes_bba3");
    	repeatingSum("foo_classes_bba4_total", "classes", "classes_bba4");
    	repeatingSum("foo_classes_compniv_total", "classes", "classes_compniv");
    	repeatingSum("foo_classes_vigor_total", "classes", "classes_vigor");
    	repeatingSum("foo_classes_reflexes_total", "classes", "classes_reflexes");
    	repeatingSum("foo_classes_willpower_total", "classes", "classes_willpower");
    	repeatingSum("foo_classes_level_total", "classes", "classes_level");
    });

    /* armure */
    on("sheet:opened change:repeating_equipmentarmor remove:repeating_equipmentarmor", function() {
    	repeatingSum("foo_defense_ca_bonus", "equipmentarmor", ["equipment_armor_bonus", "equipment_armor_worn"], 1);
    	repeatingSum("foo_defense_dexterity_max", "equipmentarmor", ["equipment_armor_dexterity_max", "equipment_armor_worn"], 1);
    });
</script>

<div class="header">
    <div class="flexrow">
        <div class="flexcol8">
            <div class="header-character">
                <input type="text" name="attr_character_name" placeholder="Nom du personnage" data-i18n-placeholder="character-name" />
            </div>
        </div>

        <div class="flexcol4">
            <div class="header-player">
                <input type="text" name="attr_player_name" placeholder="Nom du joueur" data-i18n-placeholder="player-name" />
            </div>
        </div>
    </div>

    <div class="header-stat">
        <table>
            <thead>
            </thead>
            <tbody>
            <tr>
                <td width="12.5%">
                    <span data-i18n="level">Niveau</span>
                </td>
                <td width="12.5%">
                    <input type="number" name="attr_level" value="(@{foo_classes_level_total})" disabled="disabled"/>
                </td>

                <td width="8.3334%">
                    <span title="Expérience" data-i18n="experience" data-i18n-title="experience-title">Exp.</span>
                </td>
                <td width="16.6666%">
                    <div class="input-group">
                        <input type="text" name="attr_character_experience" value="0" min="0" />
                        <div class="input-group-text">
                            <span data-i18n="separator">/</span>
                        </div>
                        <input type="text" name="attr_character_experience_max" value="0"  min="0"/>
                    </div>
                </td>

                <td width="8.3334%">
                    <span data-i18n="vitality">Vitalité</span>
                </td>
                <td width="16.6666%">
                    <div class="input-group">
                        <input type="text" name="attr_character_vitality" value="0" min="0" />
                        <div class="input-group-text">
                            <span data-i18n="separator">/</span>
                        </div>
                        <input type="text" name="attr_character_vitality_max" value="0" min="0" />
                    </div>
                </td>

                <td width="8.3334%">
                    <span data-i18n="health">Santé</span>
                </td>
                <td width="16.6666%">
                    <div class="input-group">
                        <input type="text" name="attr_character_health" value="0" min="0" />
                        <div class="input-group-text">
                            <span data-i18n="separator">/</span>
                        </div>
                        <input type="text" name="attr_character_health_max" value="0" min="0" />
                    </div>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="tab">
    <input type="radio" id="tab1" name="attr_tab" checked="checked">
    <label for="tab1">Personnage</label>
    <input type="radio" id="tab2" name="attr_tab">
    <label for="tab2">Combats</label>
    <input type="radio" id="tab3" name="attr_tab">
    <label for="tab3">Compétences</label>
    <input type="radio" id="tab4" name="attr_tab">
    <label for="tab4">Talents</label>
    <input type="radio" id="tab5" name="attr_tab">
    <label for="tab5">Magie</label>
    <input type="radio" id="tab6" name="attr_tab">
    <label for="tab6">Inventaire</label>
    <input type="radio" id="tab7" name="attr_tab">
    <label for="tab7">Notes</label>

    <div class="tab-content">
        <div class="flexrow">
            <div class="flexcol8">
                <div class="stat section">
                    <table>
                        <thead>
                        <tr>
                            <td width="1%"></td>
                            <th title="Statistiques">Stat.</th>
                            <th width="15%" title="= Mod. + Base + Bonus + Malus">Total</th>
                            <th width="15%" title="Modificateur">Mod.</th>
                            <th width="15%">Base</th>
                            <th width="15%">Bonus</th>
                            <th width="15%">Malus</th>
                        </tr>
                        </thead>
                        <tr>
                            <td>
                                <button title="test de force" type="roll" value="(&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de force}}{{test=[[1D20cf<1cs>20+@{character_strength_total}]]}})" name="roll_character_strength"></button>
                            </td>
                            <td class="center">
                                <span>Force</span>
                            </td>
                            <td>
                                <input type="number" name="attr_character_strength_total" class="strong" value="(@{character_strength_base}+@{character_strength_bonus}-@{character_strength_malus})" disabled="disabled"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_strength_mod" value="(floor((@{character_strength_total}/2)-5))" disabled="disabled"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_strength_base" value="10" min="0" />
                            </td>
                            <td>
                                <input type="number" name="attr_character_strength_bonus" value="0" min="0" />
                            </td>
                            <td>
                                <input type="number" name="attr_character_strength_malus" value="0" min="0"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <button title="test de dextérité" type="roll" value="(&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de dextérité}}{{test=[[1D20cf<1cs>20+@{character_dexterity_total}]]}})" name="roll_character_dexterity"></button>
                            </td>
                            <td class="center">
                                <span>Dextérité</span>
                            </td>
                            <td>
                                <input type="number" name="attr_character_dexterity_total" class="strong" value="(@{character_dexterity_base}+@{character_dexterity_bonus}-@{character_dexterity_malus})" disabled="disabled"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_dexterity_mod" value="(floor((@{character_dexterity_total}/2)-5))" disabled="disabled"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_dexterity_base" value="10" min="0"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_dexterity_bonus" value="0" min="0"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_dexterity_malus" value="0" min="0" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <button title="test de constitution" type="roll" value="(&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de constitution}}{{test=[[1D20cs>20+@{character_constitution_total}]]}})" name="roll_character_constitution"></button>
                            </td>
                            <td class="center">
                                <span>Constitution</span>
                            </td>
                            <td>
                                <input type="number" name="attr_character_constitution_total" class="strong" value="(@{character_constitution_base}+@{character_constitution_bonus}-@{character_constitution_malus})" disabled="disabled"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_constitution_mod" value="(floor((@{character_constitution_total}/2)-5))" disabled="disabled"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_constitution_base" value="10" min="0"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_constitution_bonus" value="0" min="0"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_constitution_malus" value="0"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <button title="test d'intelligence" type="roll" value="(&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test d'intelligence}}{{test=[[1D20cs>20+@{character_intelligence_total}]]}})" name="roll_character_intelligence"></button>
                            </td>
                            <td class="center">
                                <span>Intelligence</span>
                            </td>
                            <td>
                                <input type="number" name="attr_character_intelligence_total" class="strong" value="(@{character_intelligence_base}+@{character_intelligence_bonus}-@{character_intelligence_malus})" disabled="disabled"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_intelligence_mod" value="(floor((@{character_intelligence_total}/2)-5))" disabled="disabled"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_intelligence_base" value="10" min="0" />
                            </td>
                            <td>
                                <input type="number" name="attr_character_intelligence_bonus" value="0" min="0"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_intelligence_malus" value="0" min="0"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <button title="test de sagesse" type="roll" value="(&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de sagesse}}{{test=[[1D20cs>20+@{character_wisdom_total}]]}})" name="roll_character_wisdom"></button>
                            </td>
                            <td class="center">
                                <span>Sagesse</span>
                            </td>
                            <td>
                                <input type="number" name="attr_character_wisdom_total" class="strong" value="(@{character_wisdom_base}+@{character_wisdom_bonus}-@{character_wisdom_malus})" disabled="disabled"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_wisdom_mod" value="(floor((@{character_wisdom_total}/2)-5))" disabled="disabled"/>
                            </td>
                            <td>
                                <input  type="number" name="attr_character_wisdom_base" value="10" min="0" />
                            </td>
                            <td>
                                <input type="number" name="attr_character_wisdom_bonus" value="0" min="0" />
                            </td>
                            <td>
                                <input type="number" name="attr_character_wisdom_malus" value="0" min="0"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <button title="test de charisme" type="roll" value="(&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de charisme}}{{test=[[1D20cs>20+@{character_charisma_total}]]}})" name="roll_character_charisma"></button>
                            </td>
                            <td class="center">
                                <span>Charisme</span>
                            </td>
                            <td>
                                <input type="number" name="attr_character_charisma_total" class="strong" value="(@{character_charisma_base}+@{character_charisma_bonus}-@{character_charisma_malus})" disabled="disabled"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_charisma_mod" value="(floor((@{character_charisma_total}/2)-5))" disabled="disabled"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_charisma_base" value="10" min="0" />
                            </td>
                            <td>
                                <input type="number" name="attr_character_charisma_bonus" value="0" min="0" />
                            </td>
                            <td>
                                <input type="number" name="attr_character_charisma_malus" value="0" min="0"/>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="flexcol4">
                <div class="character section">
                    <table>
                        <thead>
                        <tr>
                            <th width="50%" class="general-info-title">Origine</th>
                            <th width="50%" class="general-info-title">Divinité</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>
                                <input type="text" name="attr_character_origin" placeholder="N/A" />
                            </td>
                            <td>
                                <input type="text" name="attr_character_culture" placeholder="N/A" />
                            </td>
                        </tr>
                        </tbody>
                    </table>

                    <table>
                        <thead>
                        <tr>
                            <th width="50%" class="general-info-title">Alignement</th>
                            <th width="50%" class="general-info-title">Peuple</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>
                                <input type="text" name="attr_character_alignment" placeholder="N/A" />
                            </td>
                            <td>
                                <input type="text" name="attr_character_race" placeholder="N/A">
                            </td>
                        </tr>
                        </tbody>
                    </table>

                    <table>
                        <thead>
                        <tr>
                            <th width="50%" class="general-info-title">Taille</th>
                            <th width="50%" class="general-info-title">Âge</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>
                                <select name="attr_character_size">
                                    <option value="-8">Colossal</option>
                                    <option value="-4">Gigantesque</option>
                                    <option value="-2">Très Grande</option>
                                    <option value="-1">Grande</option>
                                    <option value="0" selected="selected">Moyenne</option>
                                    <option value="1">Petite</option>
                                    <option value="2">Très Petite</option>
                                    <option value="4">Minuscule</option>
                                    <option value="8">Infime</option>
                                </select>
                            </td>
                            <td>
                                <input type="text" name="attr_character_age" placeholder="N/A">
                            </td>
                        </tr>
                        </tbody>
                    </table>

                </div>
            </div>
        </div>

        <div class="class section">
            <h2>Classes</h2>
            <table>
                <thead>
                <tr>
                    <th width="10%">Classe</th>
                    <th colspan="4" width="40%" title="BBA">Bonus de Base à l’Attaque</th>
                    <th width="10%" title="Compétences par Niveaux">Comp./Niv.</th>
                    <th width="10%">Réflexes</th>
                    <th width="10%">Vigueur</th>
                    <th width="10%">Volonté</th>
                    <th width="10%">Niveaux</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td class="center strong">
                        <span>Totaux</span>
                    </td>
                    <td title="= somme de BBA&#13;(&nbsp;première attaque&nbsp;)">
                        <input type="hidden" name="attr_foo_classes_bba1_total" value="0" />
                        <input type="number" name="attr_classes_bba1_total" class="strong" value="(@{foo_classes_bba1_total})" disabled="disabled"/>
                    </td>
                    <td title="= somme de BBA&#13; (&nbsp;attaque à outrance n°1&nbsp;)">
                        <input type="hidden" name="attr_foo_classes_bba2_total" value="0" />
                        <input type="number" name="attr_classes_bba2_total" class="strong" value="(@{foo_classes_bba2_total})" disabled="disabled"/>
                    </td>
                    <td title="= somme de BBA&#13; (&nbsp;attaque à outrance n°2&nbsp;)">
                        <input type="hidden" name="attr_foo_classes_bba3_total" value="0" />
                        <input type="number" name="attr_classes_bba3_total" class="strong" value="(@{foo_classes_bba3_total})" disabled="disabled"/>
                    </td>
                    <td title="= somme de BBA&#13; (&nbsp;attaque à outrance n°3&nbsp;)">
                        <input type="hidden" name="attr_foo_classes_bba4_total" value="0" />
                        <input type="number" name="attr_classes_bba5_total" class="strong" value="@({foo_classes_bba4_total})" disabled="disabled"/>
                    </td>
                    <td title="= somme de Comp./Niv. &#215; Niveaux">
                        <input type="hidden" name="attr_foo_classes_compniv_total" value="0" />
                        <input type="number" name="attr_classes_compniv_total" class="strong" value="(@{foo_classes_compniv_total})" disabled="disabled"/>
                    </td>
                    <td title="= somme de Réflexes">
                        <input type="hidden" name="attr_foo_classes_reflexes_total" value="0" />
                        <input type="number" name="attr_classes_reflexes_total" class="strong" value="(@{foo_classes_reflexes_total})" disabled="disabled"/>
                    </td>
                    <td title="= somme de Vigueur">
                        <input type="hidden" name="attr_foo_classes_vigor_total" value="0" />
                        <input type="number" name="attr_classes_vigor_total" class="strong" value="(@{foo_classes_vigor_total})" disabled="disabled"/>
                    </td>
                    <td title="= somme de Volonté">
                        <input type="hidden" name="attr_foo_classes_willpower_total" value="0" />
                        <input type="number" name="attr_classes_willpower_total" class="strong" value="(@{foo_classes_willpower_total})" disabled="disabled"/>
                    </td>
                    <td title="= somme de Niveaux">
                        <input type="hidden" name="attr_foo_classes_level_total" value="0" />
                        <input type="number" name="attr_classes_level_total" class="strong" value="(@{foo_classes_level_total})" disabled="disabled"/>
                    </td>
                </tr>
                </tbody>
            </table>
            <fieldset class="repeating_classes">
                <table>
                    <tbody>
                    <tr>
                        <td width="10%">
                            <input type="text" name="attr_classes_name" placeholder="N/A"/>
                        </td>
                        <td width="10%">
                            <input type="number" name="attr_classes_bba1" value="0"/>
                        </td>
                        <td width="10%">
                            <input type="number" name="attr_classes_bba2" value="0"/>
                        </td>
                        <td width="10%">
                            <input type="number" name="attr_classes_bba3" value="0"/>
                        </td>
                        <td width="10%">
                            <input type="number" name="attr_classes_bba4" value="0"/>
                        </td>
                        <td width="10%">
                            <input type="number" name="attr_classes_compniv" value="0"/>
                        </td>
                        <td width="10%">
                            <input type="number" name="attr_classes_reflexes" value="0"/>
                        </td>
                        <td width="10%">
                            <input type="number" name="attr_classes_vigor" value="0"/>
                        </td>
                        <td width="10%">
                            <input type="number" name="attr_classes_willpower" value="0"/>
                        </td>
                        <td width="10%">
                            <input type="number" name="attr_classes_level" value="0"/>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </fieldset>
        </div>
    </div>

    <div class="tab-content">
        <div class="saves section">
            <h2>Jets de sauvegarde</h2>
            <table>
                <thead>
                <tr>
                    <td width="1%"></td>
                    <th width="12%">Type</th>
                    <th width="12%" title="= Base + Mod. + Trait + Bonus + Résistance + Divers">Total</th>
                    <th width="12%">Base</th>
                    <th width="12%" title="Modificateur de caractéristique">Mod.</th>
                    <th width="12%">Trait</th>
                    <th width="12%">Bonus</th>
                    <th width="12%">Résistance</th>
                    <th width="12%">Divers</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>
                        <button title="test de réflexe" type="roll" value="(&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de réflexe}}{{test=[[1D20cs>20+@{reflexes_total}]]}})" name="roll_reflexes"></button>
                    </td>
                    <td class="center">
                        <span>Réflexes</span>
                    </td>
                    <td>
                        <input type="number" name="attr_reflexes_total" class="strong" value="(@{reflexes_base}+@{reflexes_statistic}+@{reflexes_feat}+@{reflexes_bonus}+@{reflexes_resistance}+@{reflexes_misc})" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="number" name="attr_reflexes_base" value="(@{classes_reflexes_total})" disabled="disabled" />
                    </td>
                    <td title="Dextérité">
                        <div class="input-group disabled">
                            <input type="number" name="attr_reflexes_statistic" value="(@{character_dexterity_mod})" disabled="disabled"/>
                            <div class="input-group-text">
                                <span>Dex.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_reflexes_feat" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_reflexes_bonus" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_reflexes_resistance" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_reflexes_misc" value="0"/>
                    </td>
                </tr>
                <tr>
                    <td>
                        <button title="test de vigueur" type="roll" value="(&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de vigueur}}{{test=[[1D20cs>20+@{vigor_total}]]}})" name="roll_vigor"></button>
                    </td>
                    <td class="center">
                        <span>Vigueur</span>
                    </td>
                    <td>
                        <input type="number" name="attr_vigor_total" class="strong"value="(@{vigor_base}+@{vigor_statistic}+@{vigor_feat}+@{vigor_bonus}+@{vigor_resistance}+@{vigor_misc})" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="number" name="attr_vigor_base" value="(@{classes_vigor_total})" disabled="disabled"/>
                    </td>
                    <td title="Constitution">
                        <div class="input-group disabled">
                            <input type="number" name="attr_vigor_statistic" value="(@{character_constitution_mod})" disabled="disabled"/>
                            <div class="input-group-text">
                                <span>Con.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_vigor_feat" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_vigor_bonus" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_vigor_resistance" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_vigor_misc" value="0"/>
                    </td>
                </tr>
                <tr>
                    <td>
                        <button title="test de volonté" type="roll" value="(&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de volonté}}{{test=[[1D20cs>20+@{willpower_total}]]}})" name="roll_willpower"></button>
                    </td>
                    <td class="center">
                        <span>Volonté</span>
                    </td>
                    <td>
                        <input type="number" name="attr_willpower_total" class="strong" value="(@{willpower_base}+@{willpower_statistic}+@{willpower_feat}+@{willpower_bonus}+@{willpower_resistance}+@{willpower_misc})" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="number" name="attr_willpower_base" value="(@{classes_willpower_total})" disabled="disabled"/>
                    </td>
                    <td title="Volonté">
                        <div class="input-group disabled">
                            <input type="number" name="attr_willpower_statistic" value="(@{character_wisdom_mod})" disabled="disabled"/>
                            <div class="input-group-text">
                                <span>Vol.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_willpower_feat" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_willpower_bonus" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_willpower_resistance" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_willpower_misc" value="0"/>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

        <div class="battlemoves section">
            <h2>Les man&oelig;uvres de combat</h2>
            <table>
                <thead>
                <tr>
                    <td width="1%"></td>
                    <th width="12%">Type</th>
                    <th width="12%" title="= BBA + Taille + Mod. + Bonus + Temporaire + Divers">Total</th>
                    <th width="12%" title="Bonus de Base à l'Attaque">BBA</th>
                    <th width="12%" title="Modificateur de taille">Taille</th>
                    <th width="12%" title="Modificateurs" colspan="3">Mod.</th>
                    <th width="12%">Bonus</th>
                    <th width="12%">Temporaire</th>
                    <th width="12%">Divers</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>
                        <button title="test de man&oelig;uvre offensive" type="roll" value="(&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de man&oelig;uvre offensive}}{{test=[[1D20cf<1cs>20+@{battle_move_cmb_total}]]}})" name="roll_reflexes"></button>
                    </td>
                    <td class="center" title="bonus de Man&oelig;uvre offensive">
                        <span>BMO</span>
                    </td>
                    <td>
                        <input type="number" name="attr_battle_move_cmb_total" class="strong" value="(@{foo_classes_bba1_total}+@{character_size}+@{character_strength_mod}+@{battle_move_cmb_bonus}+@{battle_move_cmb_temporary}+@{battle_move_cmb_misc})" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="number" name="attr_battle_move_cmb_bba" value="(@{foo_classes_bba1_total})" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_battle_move_cmb_size" value="(@{character_size})" disabled="disabled" />
                    </td>
                    <td colspan="3" title="modificateur de force">
                        <input type="number" name="attr_battle_move_cmb_mod_strength" value="(@{character_strength_mod})" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_battle_move_cmb_bonus" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_battle_move_cmb_temporary" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_battle_move_cmb_misc" value="0"/>
                    </td>
                </tr>
                <tr>
                    <td>
                    </td>
                    <td class="center" title="Degré de Man&oelig;uvre Défensive">
                        <span>DMD</span>
                    </td>
                    <td>
                        <input type="number" name="attr_battle_move_cmd_total" class="strong" value="(@{foo_classes_bba1_total}+@{character_size}+@{character_strength_mod}+@{character_dexterity_mod}+@{battle_move_cmd_base}+@{battle_move_cmd_bonus}+@{battle_move_cmd_temporary}+@{battle_move_cmd_misc})" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="number" name="attr_battle_move_cmd_bba" value="(@{foo_classes_bba1_total})" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_battle_move_cmd_size" value="(@{character_size})" disabled="disabled" />
                    </td>
                    <td>
                        <input title="Modificateur de force" type="number" name="attr_battle_move_cmd_mod_strength" value="(@{character_strength_mod})" disabled="disabled" />
                    </td>
                    <td>
                        <input title="Modificateur de dextérité" type="number" name="attr_battle_move_cmd_mod_dexteriy" value="(@{character_dexterity_mod})" disabled="disabled" />
                    </td>
                    <td>
                        <input title="Modificateur de base" type="number" name="attr_battle_move_cmd_base" value="10" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="number" name="attr_battle_move_cmd_bonus" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_battle_move_cmd_temporary" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_battle_move_cmd_misc" value="0"/>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

        <div class="initiative section">
            <h2>Initiative</h2>
            <table>
                <thead>
                <tr>
                    <td width="1%"></td>
                    <th title="= Mod. + Divers">Total</th>
                    <th title="Modificateur de dextérité">Mod.</th>
                    <th>Divers</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>
                        <button title="test d'initiative" type="roll" value="(&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test d'iniative}}{{test=[[1D20+@{initiative_total}]]}})" name="roll_initiative"></button>
                    </td>
                    <td>
                        <input type="number" name="attr_initiative_total" class="strong" value="(@{initiative_dexterity}+@{initiative_misc})" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="number" name="attr_initiative_dexterity" value="(@{character_dexterity_mod})" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="number" name="attr_initiative_misc" value="0" />
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

        <div class="attack section">
            <h2>Attaques</h2>
            <fieldset class="repeating_attack">
                <div class="attack-content">
                    <div class="flexrow">
                        <div class="flexcol-auto attack-roll">
                            <button title="test d'attaque" type="roll" value="&{template:roll}{{battle=show}}{{who=@{character_name}}}{{attack_name=@{attack_name}}}{{test=[[1d20cf<1cs>@{attack_critic}+@{attack_total}]]}}{{damage=[[@{attack_dices_count}d@{attack_dices}+@{attack_bonus}+@{character_strength_mod}*@{attack_handler_select}]]}}{{damage_critic=[[floor((@{attack_dices_count}d@{attack_dices}+@{attack_bonus}+@{character_strength_mod}*@{attack_handler_select})*@{attack_critic_multiplier})]]}}{{target_name=@{target|character_name}}}{{target_ca=[[@{target|defense_ca_total}]]}}" name="roll_attack"></button>
                        </div>
                        <div class="flexcol">
                            <div class="attack-subcontent">
                                <div class="accordion">
                                    <input class="accordion-checkbox" type="checkbox" name="attack-checkbox"  Title="Afficher / Masquer le détail" />
                                    <div class="accordion-container">
                                        <div class="attack-label flexrow">
                                            <div class="flexcol4">
                                                <input class="attack-name" type="text" name="attr_attack_name" placeholder="Nom de l'attaque" />
                                            </div>
                                            <div class="flexcol8">
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">Conditions particulières :</span>
                                                    </div>
                                                    <input type="text" name="attr_attack_status" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="accordion-content">
                                            <table>
                                                <thead>
                                                <tr>
                                                    <th title="= BBA + Mod. + Taille + Équipement + Autre + Temporaire">Total</th>
                                                    <th title="Bonus de Base à l'Attaque&#13;1er - première attaque&#13;2eme - attaque à outrance n°1&#13;3eme - attaque à outrance n°2&#13;4eme - attaque à outrance n°3">BBA</th>
                                                    <th title="Modificateur de caractéristique">Mod.</th>
                                                    <th>Taille</th>
                                                    <th>Équipement</th>
                                                    <th>Autre</th>
                                                    <th>Temporaire</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr>
                                                    <td>
                                                        <input type="number" name="attr_attack_total" class="strong" value="(@{attack_bba}+@{attack_mod_statistic_select}+@{character_size}+@{attack_mod_equipment}+@{attack_mod_misc}+@{attack_mod_temporary})" disabled="disabled" />
                                                    </td>
                                                    <td>
                                                        <div class="input-group">
                                                            <input type="number" name="attr_attack_bba" value="(@{attack_mod_bba_select})" disabled="disabled" />
                                                            <select name="attr_attack_mod_bba_select">
                                                                <option value="(@{foo_classes_bba1_total})" selected="selected">1er</option>
                                                                <option value="(@{foo_classes_bba2_total})">2eme</option>
                                                                <option value="(@{foo_classes_bba3_total})">3eme</option>
                                                                <option value="(@{foo_classes_bba4_total})">4eme</option>
                                                            </select>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="input-group">
                                                            <input type="number" name="attr_attack_mod_statistic" value="(@{attack_mod_statistic_select})" disabled="disabled" />
                                                            <select name="attr_attack_mod_statistic_select">
                                                                <option selected="selected"></option>
                                                                <option value="(@{character_strength_mod})" >For.</option>
                                                                <option value="(@{character_dexterity_mod})">Dex.</option>
                                                                <option value="(@{character_constitution_mod})">Con.</option>
                                                                <option value="(@{character_intelligence_mod})">Int.</option>
                                                                <option value="(@{character_wisdom_mod})">Sag.</option>
                                                                <option value="(@{character_charisma_mod})">Cha.</option>
                                                            </select>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <input type="number" name="attr_attack_size" value="(@{character_size})" disabled="disabled" />
                                                    </td>
                                                    <td>
                                                        <input type="number" name="attr_attack_mod_equipment" value="0" />
                                                    </td>
                                                    <td>
                                                        <input type="number" name="attr_attack_mod_misc" value="0" />
                                                    </td>
                                                    <td>
                                                        <input type="number" name="attr_attack_mod_temporary" value="0" />
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>

                                            <table>
                                                <thead>
                                                <tr>
                                                    <th>
                                                        Dégâts
                                                    </th>
                                                    <th title="Modificateur de caractéristique">
                                                        Mod.
                                                    </th>
                                                    <th>Tenue de l'arme</th>
                                                    <th>Critique</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr>
                                                    <td>
                                                        <div class="input-group">
                                                            <input type="number" name="attr_attack_dices_count" value="1" min="1" step="1"/>
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text">d</span>
                                                            </div>
                                                            <select name="attr_attack_dices">
                                                                <option value="4" selected="selected">4</option>
                                                                <option value="6">6</option>
                                                                <option value="8">8</option>
                                                                <option value="10">10</option>
                                                                <option value="12">12</option>
                                                                <option value="20">20</option>
                                                                <option value="100">100</option>
                                                            </select>
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text">+</span>
                                                            </div>
                                                            <input type="number" name="attr_attack_bonus" value="0"/>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <input type="number" name="attr_attack_mod" value="(@{character_strength_mod})" disabled="disabled" />
                                                    </td>
                                                    <td>
                                                        <div class="input-group">
                                                            <input type="number" name="attr_attack_handler" value="(@{attack_handler_select})" disabled="disabled" />
                                                            <select name="attr_attack_handler_select">
                                                                <option value="1" selected="selected">1 main</option>
                                                                <option value="0.5">secondaire</option>
                                                                <option value="1.5">2 mains</option>
                                                            </select>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="input-group">
                                                            <select name="attr_attack_critic">
                                                                <option value="20" selected="selected">20</option>
                                                                <option value="19">19-20</option>
                                                                <option value="18">18-20</option>
                                                                <option value="17">17-20</option>
                                                                <option value="16">16-20</option>
                                                                <option value="15">15-20</option>
                                                                <option value="14">14-20</option>
                                                                <option value="13">13-20</option>
                                                                <option value="12">12-20</option>
                                                                <option value="11">11-20</option>
                                                                <option value="10">10-20</option>
                                                                <option value="9">9-20</option>
                                                                <option value="8">8-20</option>
                                                                <option value="7">7-20</option>
                                                                <option value="6">6-20</option>
                                                                <option value="5">5-20</option>
                                                                <option value="4">4-20</option>
                                                                <option value="3">3-20</option>
                                                                <option value="2">2-20</option>
                                                            </select>
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">&#215;</span>
                                                            </div>
                                                            <input type="number" name="attr_attack_critic_multiplier" value="1" min="0" />
                                                        </div>
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>
        </div>

        <div class="equipment-summary section">
            <h2>Défense</h2>
            <div class="input-group" title="CA&#13;= Base + Armure + Dex. + Taille + Esquive + Parade + Divers - Malus">
                <div class="input-group-text">
                    <span>Classe d'Armure</span>
                </div>
                <input type="text" name="attr_defense_ca_total" class="strong" value="(@{defense_ca_base}+@{defense_ca_bonus}+@{character_dexterity_mod}+@{defense_bonus_size}+@{defense_bonus_dodge}+@{defense_bonus_parade}+@{defense_bonus_misc}-@{defense_malus})" disabled="disabled"/>
            </div>

            <table>
                <thead>
                <tr>
                    <th>Base</th>
                    <th title="Bonus d'Armure">Armure</th>
                    <th title="Modificateur de Dextérité">Dex.</th>
                    <th title="Bonus de Dextérité Maximale">Dex. Max.</th>
                    <th>Taille</th>
                    <th>Esquive</th>
                    <th>Parade</th>
                    <th>Divers</th>
                    <th>Malus</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>
                        <input type="number" name="attr_defense_ca_base" value="10" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="hidden" name="attr_foo_defense_ca_bonus" value="0"/>
                        <input type="number" name="attr_defense_ca_bonus" disabled="disabled" value="(@{foo_defense_ca_bonus})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_defense_dexterity_mod" value="(@{character_dexterity_mod})" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="hidden" name="attr_foo_defense_dexterity_max" value="0" />
                        <input type="number" name="attr_defense_dexterity_max" disabled="disabled" value="(@{foo_defense_dexterity_max})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_defense_bonus_size" value="(@{character_size})" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_defense_bonus_dodge" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_defense_bonus_parade" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_defense_bonus_misc" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_defense_malus" value="0"/>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="tab-content">
        <div class="skill-summary section">
            <table>
                <thead>
                <tr>
                    <th width="25%" title="Rang Maximum atteignable&#13;= (&nbsp;Comp./Niv. + Mod. intelligence&nbsp;) &#215; Niveaux du personnage + Bonus">Max.</th>
                    <th width="25%" title="Rangs dépensés&#13;= somme de Rang">Dépensés</th>
                    <th width="25%" title="Rangs restants&#13;= Max. - Dépensés - Bonus">Restants</th>
                    <th width="25%">Bonus</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>
                        <input type="number" name="attr_skill_max" value="(@{foo_classes_level_total}*@{character_intelligence_mod}+@{skill_misc})" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_sum" value="(@{skill_acrobatics_ranks}+@{skill_animal_training_ranks}+@{skill_artistry_ranks}+@{skill_appraise_ranks}+@{skill_bluff_ranks}+@{skill_climbing_ranks}+@{skill_career1_ranks}+@{skill_career2_ranks}+@{skill_career3_ranks}+@{skill_craft1_ranks}+@{skill_craft2_ranks}+@{skill_craft3_ranks}+@{skill_disguise_ranks}+@{skill_diplomacy_ranks}+@{skill_first_aid_ranks}+@{skill_fly_ranks}+@{skill_knowledge_arcana_ranks}+@{skill_knowledge_dungeon_ranks}+@{skill_knowledge_engineering_ranks}+@{skill_knowledge_geography_ranks}+@{skill_knowledge_history_ranks}+@{skill_knowledge_local_ranks}+@{skill_knowledge_nature_ranks}+@{skill_knowledge_plans_ranks}+@{skill_knowledge_religion_ranks}+@{skill_knowledge_nobility_ranks}+@{skill_horseback_riding_ranks}+@{skill_escape_ranks}+@{skill_intimidate_ranks}+@{skill_linguistics_ranks}+@{skill_lore_ranks}+@{skill_swimming_ranks}+@{skill_perception_ranks}+@{skill_pickpocketing_ranks}+@{skill_psychology_ranks}+@{skill_representation1_ranks}+@{skill_representation2_ranks}+@{skill_representation3_ranks}+@{skill_sabotage_ranks}+@{skill_stealth_ranks}+@{skill_survival_ranks}+@{skill_spellcraft_ranks}+@{skill_use_of_magic_objects_ranks})" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_remaining" value="(@{skill_max}-@{skill_sum}-@{skill_misc})" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_misc" value="0"/>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

        <div class="skill section">
            <h2>Aventure</h2>
            <table>
                <thead>
                <tr>
                    <td width="1%"></td>
                    <th width="1%" title="Compétence de Classe ?">CC</th>
                    <th width="1%" title="Utilisable qu'avec une Formation">F</th>
                    <th>Compétence</th>
                    <th width="8%">Total</th>
                    <th width="8%">Rang</th>
                    <th width="8%">Classe</th>
                    <th width="8%" title="Modificateur de caractéristique">Mod.</th>
                    <th width="8%" title="Malus d'armure">Malus</th>
                    <th width="8%">Trait</th>
                    <th width="8%">Don</th>
                    <th width="8%">Objet</th>
                </tr>
                </thead>
                <tbody>
                <!-- acrobatics -->
                <tr>
                    <td>
                        <button title="test d'acrobatie" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test d'acrobatie}}{{test=[[1D20cf<1cs>20+([[@{skill_acrobatics_total}]])]]}}" name="roll_skill_acrobatics"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_acrobatics_cc" value="((((3 * @{skill_acrobatics_ranks}) + 3) - abs((3 * @{skill_acrobatics_ranks}) - 3)) / 2)"/>
                    </td>
                    <td></td>
                    <td>
                        Acrobatie
                    </td>
                    <td>
                        <input type="number" name="attr_skill_acrobatics_total" disabled="disabled" class="strong" value="(@{skill_acrobatics_ranks}+@{skill_acrobatics_cc}+@{skill_acrobatics_stat}+@{skill_acrobatics_trait}+@{skill_acrobatics_gift}+@{skill_acrobatics_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_acrobatics_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_acrobatics_class" value="(@{skill_acrobatics_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_acrobatics_stat" value="(@{character_dexterity_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Dex.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_acrobatics_malus" value="(@{defense_malus})" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_acrobatics_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_acrobatics_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_acrobatics_temporary" value="0" />
                    </td>
                </tr>
                <!--spellcraft-->
                <tr>
                    <td>
                        <button title="test d'art de la magie" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test d'art de la magie}}{{test=[[1D20cf<1cs>20+([[@{skill_spellcraft_total}]])]]}}" name="roll_skill_spellcraft"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_spellcraft_cc" value="((((3 * @{skill_spellcraft_ranks}) + 3) - abs((3 * @{skill_spellcraft_ranks}) - 3)) / 2)"/>
                    </td>
                    <td title="formation requise !">
                        <span class="alert"></span>
                    </td>
                    <td>
                        Art de la magie
                    </td>
                    <td>
                        <input type="number" name="attr_skill_spellcraft_total" disabled="disabled" class="strong" value="(@{skill_spellcraft_ranks}+@{skill_spellcraft_cc}+@{skill_spellcraft_stat}+@{skill_spellcraft_trait}+@{skill_spellcraft_gift}+@{skill_spellcraft_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_spellcraft_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_spellcraft_class" value="(@{skill_spellcraft_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_spellcraft_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_spellcraft_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_spellcraft_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_spellcraft_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_spellcraft_temporary" value="0" />
                    </td>
                </tr>
                <!--bluff-->
                <tr>
                    <td>
                        <button title="test de bluff" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de bluff}}{{test=[[1D20cf<1cs>20+([[@{skill_bluff_total}]])]]}}" name="roll_skill_bluff"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_bluff_cc" value="((((3 * @{skill_bluff_ranks}) + 3) - abs((3 * @{skill_bluff_ranks}) - 3)) / 2)"/>
                    </td>
                    <td></td>
                    <td>
                        Bluff
                    </td>
                    <td>
                        <input type="number" name="attr_skill_bluff_total" disabled="disabled" class="strong" value="(@{skill_bluff_ranks}+@{skill_bluff_cc}+@{skill_bluff_stat}+@{skill_bluff_trait}+@{skill_bluff_gift}+@{skill_bluff_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_bluff_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_bluff_class" value="(@{skill_bluff_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_bluff_stat" value="(@{character_charisma_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Cha.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_bluff_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_bluff_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_bluff_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_bluff_temporary" value="0" />
                    </td>
                </tr>
                <!-- knowledge_dungeon -->
                <tr>
                    <td>
                        <button title="test de connaissances (&nbsp;exploration souterraine&nbsp;)" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de connaissance (&nbsp;exploration souterraine&nbsp;)}}{{test=[[1D20cf<1cs>20+([[@{skill_knowledge_dungeon_total}]])]]}}" name="roll_skill_knowledge_dungeon"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_knowledge_dungeon_cc" value="((((3 * @{skill_knowledge_dungeon_ranks}) + 3) - abs((3 * @{skill_knowledge_dungeon_ranks}) - 3)) / 2)"/>
                    </td>
                    <td title="formation requise !">
                        <span class="alert"></span>
                    </td>
                    <td>
                        Connaissances (&nbsp;exploration souterraine&nbsp;)
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_dungeon_total" disabled="disabled" class="strong" value="(@{skill_knowledge_dungeon_ranks}+@{skill_knowledge_dungeon_class}+@{skill_knowledge_dungeon_stat}+@{skill_knowledge_dungeon_trait}+@{skill_knowledge_dungeon_gift}+@{skill_knowledge_dungeon_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_dungeon_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_dungeon_class" value="(@{skill_knowledge_dungeon_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_knowledge_dungeon_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_dungeon_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_dungeon_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_dungeon_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_dungeon_temporary" value="0" />
                    </td>
                </tr>
                <!-- knowledge_local -->
                <tr>
                    <td>
                        <button title="test de connaissances (&nbsp;folklore local&nbsp;)" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de connaissances (&nbsp;folklore local&nbsp;)}}{{test=[[1D20cf<1cs>20+([[@{skill_knowledge_local_total}]])]]}}" name="roll_skill_knowledge_local"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_knowledge_local_cc" value="((((3 * @{skill_knowledge_local_ranks}) + 3) - abs((3 * @{skill_knowledge_local_ranks}) - 3)) / 2)"/>
                    </td>
                    <td title="formation requise !">
                        <span class="alert"></span>
                    </td>
                    <td>
                        Connaissances (&nbsp;folklore local&nbsp;)
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_local_total" disabled="disabled" class="strong" value="(@{skill_knowledge_local_ranks}+@{skill_knowledge_local_class}+@{skill_knowledge_local_stat}+@{skill_knowledge_local_trait}+@{skill_knowledge_local_gift}+@{skill_knowledge_local_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_local_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_local_class" value="(@{skill_knowledge_local_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_knowledge_local_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_local_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_local_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_local_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_local_temporary" value="0" />
                    </td>
                </tr>
                <!-- knowledge_arcana -->
                <tr>
                    <td>
                        <button title="test de connaissances (&nbsp;mystères&nbsp;)" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de connaissances (&nbsp;mystères&nbsp;)}}{{test=[[1D20cf<1cs>20+([[@{skill_knowledge_arcana_total}]])]]}}" name="roll_skill_knowledge_arcana"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_knowledge_arcana_cc" value="((((3 * @{skill_knowledge_arcana_ranks}) + 3) - abs((3 * @{skill_knowledge_arcana_ranks}) - 3)) / 2)"/>
                    </td>
                    <td title="formation requise !">
                        <span class="alert"></span>
                    </td>
                    <td>
                        Connaissances (&nbsp;mystères&nbsp;)
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_arcana_total" disabled="disabled" class="strong" value="(@{skill_knowledge_arcana_ranks}+@{skill_knowledge_arcana_class}+@{skill_knowledge_arcana_stat}+@{skill_knowledge_arcana_trait}+@{skill_knowledge_arcana_gift}+@{skill_knowledge_arcana_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_arcana_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_arcana_class" value="(@{skill_knowledge_arcana_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_knowledge_arcana_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_arcana_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_arcana_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_arcana_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_arcana_temporary" value="0" />
                    </td>
                </tr>
                <!-- knowledge_nature -->
                <tr>
                    <td>
                        <button title="test de connaissances (&nbsp;nature&nbsp;)" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de connaissances (&nbsp;nature&nbsp;)}}{{test=[[1D20cf<1cs>20+([[@{skill_knowledge_nature_total}]])]]}}" name="roll_skill_knowledge_nature"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_knowledge_nature_cc" value="((((3 * @{skill_knowledge_nature_ranks}) + 3) - abs((3 * @{skill_knowledge_nature_ranks}) - 3)) / 2)"/>
                    </td>
                    <td title="formation requise !">
                        <span class="alert"></span>
                    </td>
                    <td>
                        Connaissances (&nbsp;nature&nbsp;)
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_nature_total" disabled="disabled" class="strong" value="(@{skill_knowledge_nature_ranks}+@{skill_knowledge_nature_class}+@{skill_knowledge_nature_stat}+@{skill_knowledge_nature_trait}+@{skill_knowledge_nature_gift}+@{skill_knowledge_nature_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_nature_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_nature_class" value="(@{skill_knowledge_nature_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_knowledge_nature_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_nature_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_nature_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_nature_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_nature_temporary" value="0" />
                    </td>
                </tr>
                <!-- knowledge_plans -->
                <tr>
                    <td>
                        <button title="test de connaissances (&nbsp;plans&nbsp;)" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de connaissances (&nbsp;plans&nbsp;)}}{{test=[[1D20cf<1cs>20+([[@{skill_knowledge_plans_total}]])]]}}" name="roll_skill_knowledge_plans"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_knowledge_plans_cc" value="((((3 * @{skill_knowledge_plans_ranks}) + 3) - abs((3 * @{skill_knowledge_plans_ranks}) - 3)) / 2)"/>
                    </td>
                    <td title="formation requise !">
                        <span class="alert"></span>
                    </td>
                    <td>
                        Connaissances (&nbsp;plans&nbsp;)
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_plans_total" disabled="disabled" class="strong" value="(@{skill_knowledge_plans_ranks}+@{skill_knowledge_plans_class}+@{skill_knowledge_plans_stat}+@{skill_knowledge_plans_trait}+@{skill_knowledge_plans_gift}+@{skill_knowledge_plans_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_plans_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_plans_class" value="(@{skill_knowledge_plans_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_knowledge_plans_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_plans_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_plans_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_plans_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_plans_temporary" value="0" />
                    </td>
                </tr>
                <!-- knowledge_religion -->
                <tr>
                    <td>
                        <button title="test de connaissances (&nbsp;religion&nbsp;)" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de connaissances (&nbsp;religion&nbsp;)}}{{test=[[1D20cf<1cs>20+([[@{skill_knowledge_religion_total}]])]]}}" name="roll_skill_knowledge_religion"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_knowledge_religion_cc" value="((((3 * @{skill_knowledge_religion_ranks}) + 3) - abs((3 * @{skill_knowledge_religion_ranks}) - 3)) / 2)"/>
                    </td>
                    <td title="formation requise !">
                        <span class="alert"></span>
                    </td>
                    <td>
                        Connaissances (&nbsp;religion&nbsp;)
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_religion_total" disabled="disabled" class="strong" value="(@{skill_knowledge_religion_ranks}+@{skill_knowledge_religion_class}+@{skill_knowledge_religion_stat}+@{skill_knowledge_religion_trait}+@{skill_knowledge_religion_gift}+@{skill_knowledge_religion_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_religion_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_religion_class" value="(@{skill_knowledge_religion_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_knowledge_religion_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_religion_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_religion_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_religion_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_religion_temporary" value="0" />
                    </td>
                </tr>
                <!-- disguise  -->
                <tr>
                    <td>
                        <button title="test de déguisement" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de déguisement}}{{test=[[1D20cf<1cs>20+([[@{skill_disguise_total}]])]]}}" name="roll_skill_disguise"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_disguise_cc" value="((((3 * @{skill_disguise_ranks}) + 3) - abs((3 * @{skill_disguise_ranks}) - 3)) / 2)"/>
                    </td>
                    <td></td>
                    <td>
                        Déguisement
                    </td>
                    <td>
                        <input type="number" name="attr_skill_disguise_total" disabled="disabled" class="strong" value="(@{skill_disguise_ranks}+@{skill_disguise_cc}+@{skill_disguise_stat}+@{skill_disguise_trait}+@{skill_disguise_gift}+@{skill_disguise_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_disguise_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_disguise_class" value="(@{skill_disguise_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_disguise_stat" value="(@{character_charisma_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Cha.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_disguise_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_disguise_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_disguise_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_disguise_temporary" value="0" />
                    </td>
                </tr>
                <!-- diplomacy -->
                <tr>
                    <td>
                        <button title="test de diplomatie" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de diplomatie}}{{test=[[1D20cf<1cs>20+([[@{skill_diplomacy_total}]])]]}}" name="roll_skill_diplomacy"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_diplomacy_cc" value="((((3 * @{skill_diplomacy_ranks}) + 3) - abs((3 * @{skill_diplomacy_ranks}) - 3)) / 2)"/>
                    </td>
                    <td></td>
                    <td>
                        Diplomatie
                    </td>
                    <td>
                        <input type="number" name="attr_skill_diplomacy_total" disabled="disabled" class="strong" value="(@{skill_diplomacy_ranks}+@{skill_diplomacy_cc}+@{skill_diplomacy_stat}+@{skill_diplomacy_trait}+@{skill_diplomacy_gift}+@{skill_diplomacy_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_diplomacy_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_diplomacy_class" value="(@{skill_diplomacy_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_diplomacy_stat" value="(@{character_dexterity_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Dex.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_diplomacy_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_diplomacy_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_diplomacy_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_diplomacy_temporary" value="0" />
                    </td>
                </tr>
                <!-- stealth -->
                <tr>
                    <td>
                        <button title="test de discrétion" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de discrétion}}{{test=[[1D20cf<1cs>20+([[@{skill_stealth_total}]])]]}}" name="roll_skill_stealth"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_stealth_cc" value="((((3 * @{skill_stealth_ranks}) + 3) - abs((3 * @{skill_stealth_ranks}) - 3)) / 2)"/>
                    </td>
                    <td></td>
                    <td>
                        Discrétion
                    </td>
                    <td>
                        <input type="number" name="attr_skill_stealth_total" disabled="disabled" class="strong" value="(@{skill_stealth_ranks}+@{skill_stealth_cc}+@{skill_stealth_stat}+@{skill_stealth_trait}+@{skill_stealth_gift}+@{skill_stealth_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_stealth_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_stealth_class" value="(@{skill_stealth_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_stealth_stat" value="(@{character_dexterity_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Dex.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_stealth_malus" value="(@{defense_malus})" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_stealth_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_stealth_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_stealth_temporary" value="0" />
                    </td>
                </tr>
                <!-- horseback_riding -->
                <tr>
                    <td>
                        <button title="test d'équitation" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test d'équitation}}{{test=[[1D20cf<1cs>20+([[@{skill_horseback_riding_total}]])]]}}" name="roll_skill_horseback_riding"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_horseback_riding_cc" value="((((3 * @{skill_horseback_riding_ranks}) + 3) - abs((3 * @{skill_horseback_riding_ranks}) - 3)) / 2)"/>
                    </td>
                    <td></td>
                    <td>
                        Équitation
                    </td>
                    <td>
                        <input type="number" name="attr_skill_horseback_riding_total" disabled="disabled" class="strong" value="(@{skill_horseback_riding_ranks}+@{skill_horseback_riding_class}+@{skill_horseback_riding_stat}+@{skill_horseback_riding_trait}+@{skill_horseback_riding_gift}+@{skill_horseback_riding_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_horseback_riding_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_horseback_riding_class" value="(@{skill_horseback_riding_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_horseback_riding_stat" value="(@{character_dexterity_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Dex.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_horseback_riding_malus" value="(@{defense_malus})" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_horseback_riding_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_horseback_riding_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_horseback_riding_temporary" value="0" />
                    </td>
                </tr>
                <!-- climbing -->
                <tr>
                    <td>
                        <button title="test d'escalade" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test d'escalade}}{{test=[[1D20cf<1cs>20+([[@{skill_climbing_total}]])]]}}" name="roll_skill_climbing"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_climbing_cc" value="((((3 * @{skill_climbing_ranks}) + 3) - abs((3 * @{skill_climbing_ranks}) - 3)) / 2)"/>
                    </td>
                    <td></td>
                    <td>
                        Escalade
                    </td>
                    <td>
                        <input type="number" name="attr_skill_climbing_total" disabled="disabled" class="strong" value="(@{skill_climbing_ranks}+@{skill_climbing_cc}+@{skill_climbing_stat}+@{skill_climbing_trait}+@{skill_climbing_gift}+@{skill_climbing_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_climbing_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_climbing_class" value="(@{skill_climbing_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_climbing_stat" value="(@{character_strength_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">For.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_climbing_malus" value="(@{defense_malus})" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_climbing_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_climbing_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_climbing_temporary" value="0" />
                    </td>
                </tr>
                <!-- escape -->
                <tr>
                    <td>
                        <button title="test d'évasion" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test d'évasion}}{{test=[[1D20cf<1cs>20+([[@{skill_escape_total}]])]]}}" name="roll_skill_escape"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_escape_cc" value="((((3 * @{skill_escape_ranks}) + 3) - abs((3 * @{skill_escape_ranks}) - 3)) / 2)"/>
                    </td>
                    <td></td>
                    <td>
                        Évasion
                    </td>
                    <td>
                        <input type="number" name="attr_skill_escape_total" disabled="disabled" class="strong" value="(@{skill_escape_ranks}+@{skill_escape_cc}+@{skill_escape_stat}+@{skill_escape_trait}+@{skill_escape_gift}+@{skill_escape_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_escape_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_escape_class" value="(@{skill_escape_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_escape_stat" value="(@{character_dexterity_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Dex.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_escape_malus" value="(@{defense_malus})" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_escape_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_escape_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_escape_temporary" value="0" />
                    </td>
                </tr>
                <!-- intimidate -->
                <tr>
                    <td>
                        <button title="test de intimidation" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test d'intimidation}}{{test=[[1D20cf<1cs>20+([[@{skill_intimidate_total}]])]]}}" name="roll_skill_intimidate"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_intimidate_cc" value="((((3 * @{skill_intimidate_ranks}) + 3) - abs((3 * @{skill_intimidate_ranks}) - 3)) / 2)"/>
                    </td>
                    <td></td>
                    <td>
                        Intimidation</td>
                    <td>
                        <input type="number" name="attr_skill_intimidate_total" disabled="disabled" class="strong" value="(@{skill_intimidate_ranks}+@{skill_intimidate_cc}+@{skill_intimidate_stat}+@{skill_intimidate_trait}+@{skill_intimidate_gift}+@{skill_intimidate_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_intimidate_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_intimidate_class" value="(@{skill_intimidate_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_intimidate_stat" value="(@{character_charisma_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Cha.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_intimidate_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_intimidate_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_intimidate_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_intimidate_temporary" value="0" />
                    </td>
                </tr>
                <!-- swimming -->
                <tr>
                    <td>
                        <button title="test de natation" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de natation}}{{test=[[1D20cf<1cs>20+([[@{skill_swimming_total}]])]]}}" name="roll_skill_swimming"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_swimming_cc" value="((((3 * @{skill_swimming_ranks}) + 3) - abs((3 * @{skill_swimming_ranks}) - 3)) / 2)"/>
                    </td>
                    <td></td>
                    <td>
                        Natation
                    </td>
                    <td>
                        <input type="number" name="attr_skill_swimming_total" disabled="disabled" class="strong" value="(@{skill_swimming_ranks}+@{skill_swimming_cc}+@{skill_swimming_stat}+@{skill_swimming_trait}+@{skill_swimming_gift}+@{skill_swimming_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_swimming_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_swimming_class" value="(@{skill_swimming_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_swimming_stat" value="(@{character_strength_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">For.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_swimming_malus" value="(@{defense_malus})" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_swimming_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_swimming_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_swimming_temporary" value="0" />
                    </td>
                </tr>
                <!-- perception -->
                <tr>
                    <td>
                        <button title="test de perception" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de perception}}{{test=[[1D20cf<1cs>20+([[@{skill_perception_total}]])]]}}" name="roll_skill_perception"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_perception_cc" value="((((3 * @{skill_perception_ranks}) + 3) - abs((3 * @{skill_perception_ranks}) - 3)) / 2)"/>
                    </td>
                    <td></td>
                    <td>
                        Perception
                    </td>
                    <td>
                        <input type="number" name="attr_skill_perception_total" disabled="disabled" class="strong" value="(@{skill_perception_ranks}+@{skill_perception_cc}+@{skill_perception_stat}+@{skill_perception_trait}+@{skill_perception_gift}+@{skill_perception_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_perception_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_perception_class" value="(@{skill_perception_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_perception_stat" value="(@{character_wisdom_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Sag.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_perception_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_perception_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_perception_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_perception_temporary" value="0" />
                    </td>
                </tr>
                <!-- first_aid -->
                <tr>
                    <td>
                        <button title="test de premiers secours" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de premiers secours}}{{test=[[1D20cf<1cs>20+([[@{skill_first_aid_total}]])]]}}" name="roll_skill_first_aid"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_first_aid_cc" value="((((3 * @{skill_first_aid_ranks}) + 3) - abs((3 * @{skill_first_aid_ranks}) - 3)) / 2)"/>
                    </td>
                    <td></td>
                    <td>
                        Premiers secours
                    </td>
                    <td>
                        <input type="number" name="attr_skill_first_aid_total" disabled="disabled" class="strong" value="(@{skill_first_aid_ranks}+@{skill_first_aid_class}+@{skill_first_aid_stat}+@{skill_first_aid_trait}+@{skill_first_aid_gift}+@{skill_first_aid_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_first_aid_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_first_aid_class" value="(@{skill_first_aid_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_first_aid_stat" value="(@{character_wisdom_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Sag.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_first_aid_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_first_aid_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_first_aid_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_first_aid_temporary" value="0" />
                    </td>
                </tr>
                <!-- psychology -->
                <tr>
                    <td>
                        <button title="test de psychologie" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de psychologie}}{{test=[[1D20cf<1cs>20+([[@{skill_psychology_total}]])]]}}" name="roll_skill_psychology"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_psychology_cc" value="((((3 * @{skill_psychology_ranks}) + 3) - abs((3 * @{skill_psychology_ranks}) - 3)) / 2)"/>
                    </td>
                    <td></td>
                    <td>
                        Psychologie
                    </td>
                    <td>
                        <input type="number" name="attr_skill_psychology_total" disabled="disabled" class="strong" value="(@{skill_psychology_ranks}+@{skill_psychology_cc}+@{skill_psychology_stat}+@{skill_psychology_trait}+@{skill_psychology_gift}+@{skill_psychology_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_psychology_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_psychology_class" value="(@{skill_psychology_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_psychology_stat" value="(@{character_wisdom_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Sag.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_psychology_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_psychology_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_psychology_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_psychology_temporary" value="0" />
                    </td>
                </tr>
                <!-- sabotage -->
                <tr>
                    <td>
                        <button title="test de sabotage" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de sabotage}}{{test=[[1D20cf<1cs>20+([[@{skill_sabotage_total}]])]]}}" name="roll_skill_sabotage"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_sabotage_cc" value="((((3 * @{skill_sabotage_ranks}) + 3) - abs((3 * @{skill_sabotage_ranks}) - 3)) / 2)"/>
                    </td>
                    <td title="formation requise !">
                        <span class="alert"></span>
                    </td>
                    <td>
                        Sabotage
                    </td>
                    <td>
                        <input type="number" name="attr_skill_sabotage_total" disabled="disabled" class="strong" value="(@{skill_sabotage_ranks}+@{skill_sabotage_cc}+@{skill_sabotage_stat}+@{skill_sabotage_trait}+@{skill_sabotage_gift}+@{skill_sabotage_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_sabotage_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_sabotage_class" value="(@{skill_sabotage_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_sabotage_stat" value="(@{character_dexterity_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Dex.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_sabotage_malus" value="(@{defense_malus})" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_sabotage_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_sabotage_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_sabotage_temporary" value="0" />
                    </td>
                </tr>
                <!-- survival -->
                <tr>
                    <td>
                        <button title="test de survie" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de survie}}{{test=[[1D20cf<1cs>20+([[@{skill_survival_total}]])]]}}" name="roll_skill_survival"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_survival_cc" value="((((3 * @{skill_survival_ranks}) + 3) - abs((3 * @{skill_survival_ranks}) - 3)) / 2)"/>
                    </td>
                    <td></td>
                    <td>
                        Survie
                    </td>
                    <td>
                        <input type="number" name="attr_skill_survival_total" disabled="disabled" class="strong" value="(@{skill_survival_ranks}+@{skill_survival_cc}+@{skill_survival_stat}+@{skill_survival_trait}+@{skill_survival_gift}+@{skill_survival_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_survival_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_survival_class" value="(@{skill_survival_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_survival_stat" value="(@{character_wisdom_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Sag.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_survival_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_survival_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_survival_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_survival_temporary" value="0" />
                    </td>
                </tr>
                <!-- use_of_magic_objects -->
                <tr>
                    <td>
                        <button title="test d'utilisation d'objets magiques" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test d'utilisation d'objets magiques}}{{test=[[1D20cf<1cs>20+([[@{skill_use_of_magic_objects_total}]])]]}}" name="roll_skill_use_of_magic_objects"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_use_of_magic_objects_cc" value="((((3 * @{skill_use_of_magic_objects_ranks}) + 3) - abs((3 * @{skill_use_of_magic_objects_ranks}) - 3)) / 2)"/>
                    </td>
                    <td title="formation requise !">
                        <span class="alert"></span>
                    </td>
                    <td>
                        Utilisation d'objets magiques</td>
                    <td>
                        <input type="number" name="attr_skill_use_of_magic_objects_total" disabled="disabled" class="strong" value="(@{skill_use_of_magic_objects_ranks}+@{skill_use_of_magic_objects_class}+@{skill_use_of_magic_objects_stat}+@{skill_use_of_magic_objects_trait}+@{skill_use_of_magic_objects_gift}+@{skill_use_of_magic_objects_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_use_of_magic_objects_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_use_of_magic_objects_class" value="(@{skill_use_of_magic_objects_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_use_of_magic_objects_stat" value="(@{character_charisma_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Cha.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_use_of_magic_objects_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_use_of_magic_objects_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_use_of_magic_objects_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_use_of_magic_objects_temporary" value="0" />
                    </td>
                </tr>
                <!-- fly -->
                <tr>
                    <td>
                        <button title="test d'action aérienne)" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test d'actions aériennes)}}{{test=[[1D20cf<1cs>20+([[@{skill_fly_total}]])]]}}" name="roll_skill_fly"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_fly_cc" value="((((3 * @{skill_fly_ranks}) + 3) - abs((3 * @{skill_fly_ranks}) - 3)) / 2)"/>
                    </td>
                    <td></td>
                    <td>
                        Vol (&nbsp;action aérienne&nbsp;)
                    </td>
                    <td>
                        <input type="number" name="attr_skill_fly_total" disabled="disabled" class="strong" value="(@{skill_fly_ranks}+@{skill_fly_cc}+@{skill_fly_stat}+@{skill_fly_trait}+@{skill_fly_gift}+@{skill_fly_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_fly_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_fly_class" value="(@{skill_fly_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_fly_stat" value="(@{character_dexterity_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Dex.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_fly_malus" value="(@{defense_malus})" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_fly_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_fly_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_fly_temporary" value="0" />
                    </td>
                </tr>
                </tbody>
            </table>

        </div>

        <div class="skill section">
            <h2>Background</h2>
            <table>
                <thead>
                <tr>
                    <td width="1%"></td>
                    <th width="1%" title="Compétence de Classe">CC</th>
                    <th width="1%" title="Utilisable qu'avec une Formation">F</th>
                    <th>Compétence</th>
                    <th width="8%">Total</th>
                    <th width="8%">Rang</th>
                    <th width="8%">Classe</th>
                    <th width="8%" title="Caractéristique">Carac.</th>
                    <th width="8%" title="Modificateur">Mod.</th>
                    <th width="8%">Trait</th>
                    <th width="8%">Don</th>
                    <th width="8%">Objet</th>
                </tr>
                </thead>
                <tbody>
                <!-- artistry -->
                <tr>
                    <td>
                        <button title="test d'art" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test d'art ( @{skill_artistry_label} )}}{{test=[[1D20cf<1cs>20+([[@{skill_artistry_total}]])]]}}" name="roll_skill_artistry"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_artistry_cc" value="((((3 * @{skill_artistry_ranks}) + 3) - abs((3 * @{skill_artistry_ranks}) - 3)) / 2)"/>
                    </td>
                    <td></td>
                    <td>
                        <div class="input-group">
                            <div class="input-group-text">
                                <span>Art :</span>
                            </div>
                            <input name="attr_skill_artistry_label" type="text" />
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_artistry_total" disabled="disabled" class="strong" value="(@{skill_artistry_ranks}+@{skill_artistry_cc}+@{skill_artistry_stat}+@{skill_artistry_trait}+@{skill_artistry_gift}+@{skill_artistry_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_artistry_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_artistry_class" value="(@{skill_artistry_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_artistry_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_artistry_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_artistry_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_artistry_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_artistry_temporary" value="0" />
                    </td>
                </tr>
                <!-- craft1 -->
                <tr>
                    <td>
                        <button title="test d'artisanat" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test d'artisanat ( @{skill_craft1_label} )}}{{test=[[1D20cf<1cs>20+([[@{skill_craft1_total}]])]]}}" name="roll_skill_craft1"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_craft1_cc" value="((((3 * @{skill_craft1_ranks}) + 3) - abs((3 * @{skill_craft1_ranks}) - 3)) / 2)"/>
                    </td>
                    <td></td>
                    <td>
                        <div class="input-group">
                            <div class="input-group-text">
                                <span>Artisanat :</span>
                            </div>
                            <input name="attr_skill_craft1_label" type="text">
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft1_total" disabled="disabled" class="strong" value="(@{skill_craft1_ranks}+@{skill_craft1_cc}+@{skill_craft1_stat}+@{skill_craft1_trait}+@{skill_craft1_gift}+@{skill_craft1_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft1_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft1_class" value="(@{skill_craft1_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_craft1_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft1_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft1_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft1_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft1_temporary" value="0" />
                    </td>
                </tr>
                <!-- craft2 -->
                <tr>
                    <td>
                        <button title="test d'artisanat" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test d'artisanat ( @{skill_craft2_label} )}}{{test=[[1D20cf<1cs>20+([[@{skill_craft2_total}]])]]}}" name="roll_skill_craft2"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_craft2_cc" value="((((3 * @{skill_craft2_ranks}) + 3) - abs((3 * @{skill_craft2_ranks}) - 3)) / 2)"/>
                    </td>
                    <td></td>
                    <td>
                        <div class="input-group">
                            <div class="input-group-text">
                                <span>Artisanat :</span>
                            </div>
                            <input name="attr_skill_craft2_label" type="text">
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft2_total" disabled="disabled" class="strong" value="(@{skill_craft2_ranks}+@{skill_craft2_cc}+@{skill_craft2_stat}+@{skill_craft2_trait}+@{skill_craft2_gift}+@{skill_craft2_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft2_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft2_class" value="(@{skill_craft2_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_craft2_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft2_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft2_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft2_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft2_temporary" value="0" />
                    </td>
                </tr>
                <!-- craft3 -->
                <tr>
                    <td>
                        <button title="test d'artisanat" type="roll"value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test d'artisanat ( @{skill_craft3_label} )}}{{test=[[1D20cf<1cs>20+([[@{skill_craft3_total}]])]]}}" name="roll_skill_craft3"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_craft3_cc" value="((((3 * @{skill_craft3_ranks}) + 3) - abs((3 * @{skill_craft3_ranks}) - 3)) / 2)"/>
                    </td>
                    <td></td>
                    <td>
                        <div class="input-group">
                            <div class="input-group-text">
                                <span>Artisanat :</span>
                            </div>
                            <input name="attr_skill_craft3_label" type="text">
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft3_total" disabled="disabled" class="strong" value="(@{skill_craft3_ranks}+@{skill_craft3_cc}+@{skill_craft3_stat}+@{skill_craft3_trait}+@{skill_craft3_gift}+@{skill_craft3_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft3_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft3_class" value="(@{skill_craft3_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_craft3_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft3_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft3_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft3_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft3_temporary" value="0" />
                    </td>
                </tr>
                <!-- knowledge_geography -->
                <tr>
                    <td>
                        <button title="test de connaissances (&nbsp;géographie&nbsp;)" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de connaissances (&nbsp;géographie&nbsp;)}}{{test=[[1D20cf<1cs>20+([[@{skill_knowledge_geography_total}]])]]}}" name="roll_skill_knowledge_geography"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_knowledge_geography_cc" value="((((3 * @{skill_knowledge_geography_ranks}) + 3) - abs((3 * @{skill_knowledge_geography_ranks}) - 3)) / 2)"/>
                    </td>
                    <td title="formation requise !">
                        <span class="alert"></span>
                    </td>
                    <td>
                        Connaissances (&nbsp;géographie&nbsp;)
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_geography_total" disabled="disabled" class="strong" value="(@{skill_knowledge_geography_ranks}+@{skill_knowledge_geography_class}+@{skill_knowledge_geography_stat}+@{skill_knowledge_geography_trait}+@{skill_knowledge_geography_gift}+@{skill_knowledge_geography_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_geography_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_geography_class" value="(@{skill_knowledge_geography_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_knowledge_geography_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_geography_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_geography_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_geography_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_geography_temporary" value="0" />
                    </td>
                </tr>
                <!-- knowledge_history -->
                <tr>
                    <td>
                        <button title="test de connaissances (&nbsp;histoire&nbsp;)" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de connaissances (&nbsp;histoire&nbsp;)}}{{test=[[1D20cf<1cs>20+([[@{skill_knowledge_history_total}]])]]}}" name="roll_skill_knowledge_history"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_knowledge_history_cc" value="((((3 * @{skill_knowledge_history_ranks}) + 3) - abs((3 * @{skill_knowledge_history_ranks}) - 3)) / 2)"/>
                    </td>
                    <td title="formation requise !">
                        <span class="alert"></span>
                    </td>
                    <td>
                        Connaissances (&nbsp;histoire&nbsp;)
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_history_total" disabled="disabled" class="strong" value="(@{skill_knowledge_history_ranks}+@{skill_knowledge_history_class}+@{skill_knowledge_history_stat}+@{skill_knowledge_history_trait}+@{skill_knowledge_history_gift}+@{skill_knowledge_history_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_history_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_history_class" value="(@{skill_knowledge_history_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_knowledge_history_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_history_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_history_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_history_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_history_temporary" value="0" />
                    </td>
                </tr>
                <!-- knowledge_engineering -->
                <tr>
                    <td>
                        <button title="test de connaissances (&nbsp;ingénierie&nbsp;)" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de connaissances (&nbsp;ingénierie&nbsp;)}}{{test=[[1D20cf<1cs>20+([[@{skill_knowledge_engineering_total}]])]]}}" name="roll_skill_knowledge_engineering"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_knowledge_engineering_cc" value="((((3 * @{skill_knowledge_engineering_ranks}) + 3) - abs((3 * @{skill_knowledge_engineering_ranks}) - 3)) / 2)"/>
                    </td>
                    <td title="formation requise !">
                        <span class="alert"></span>
                    </td>
                    <td>
                        Connaissances (&nbsp;ingénierie&nbsp;)
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_engineering_total" disabled="disabled" class="strong" value="(@{skill_knowledge_engineering_ranks}+@{skill_knowledge_engineering_class}+@{skill_knowledge_engineering_stat}+@{skill_knowledge_engineering_trait}+@{skill_knowledge_engineering_gift}+@{skill_knowledge_engineering_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_engineering_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_engineering_class" value="(@{skill_knowledge_engineering_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_knowledge_engineering_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_engineering_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_engineering_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_engineering_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_engineering_temporary" value="0" />
                    </td>
                </tr>
                <!-- knowledge_nobility -->
                <tr>
                    <td>
                        <button title="test de connaissances (&nbsp;noblesse&nbsp;)" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de connaissances (&nbsp;noblesse&nbsp;)}}{{test=[[1D20cf<1cs>20+([[@{skill_knowledge_nobility_total}]])]]}}" name="roll_skill_knowledge_nobility"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_knowledge_nobility_cc" value="((((3 * @{skill_knowledge_nobility_ranks}) + 3) - abs((3 * @{skill_knowledge_nobility_ranks}) - 3)) / 2)"/>
                    </td>
                    <td title="formation requise !">
                        <span class="alert"></span>
                    </td>
                    <td>
                        Connaissances (&nbsp;noblesse&nbsp;)
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_nobility_total" disabled="disabled" class="strong" value="(@{skill_knowledge_nobility_ranks}+@{skill_knowledge_nobility_class}+@{skill_knowledge_nobility_stat}+@{skill_knowledge_nobility_trait}+@{skill_knowledge_nobility_gift}+@{skill_knowledge_nobility_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_nobility_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_nobility_class" value="(@{skill_knowledge_nobility_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_knowledge_nobility_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_nobility_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_nobility_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_nobility_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_nobility_temporary" value="0" />
                    </td>
                </tr>
                <!-- animal_training -->
                <tr>
                    <td>
                        <button title="test de dressage" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de dressage}}{{test=[[1D20cf<1cs>20+([[@{skill_animal_training_total}]])]]}}" name="roll_skill_animal_training"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_animal_training_cc" value="((((3 * @{skill_animal_training_ranks}) + 3) - abs((3 * @{skill_animal_training_ranks}) - 3)) / 2)"/>
                    </td>
                    <td title="formation requise !">
                        <span class="alert"></span>
                    </td>
                    <td>
                        Dressage
                    </td>
                    <td>
                        <input type="number" name="attr_skill_animal_training_total" disabled="disabled" class="strong" value="(@{skill_animal_training_ranks}+@{skill_animal_training_class}+@{skill_animal_training_stat}+@{skill_animal_training_trait}+@{skill_animal_training_gift}+@{skill_animal_training_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_animal_training_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_animal_training_class" value="(@{skill_animal_training_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_animal_training_stat" value="(@{character_charisma_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Cha.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_animal_training_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_animal_training_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_animal_training_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_animal_training_temporary" value="0" />
                    </td>
                </tr>
                <!-- pickpocketing -->
                <tr>
                    <td>
                        <button title="test d'escamotage" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test d'escamotage}}{{test=[[1D20cf<1cs>20+([[@{skill_pickpocketing_total}]])]]}}" name="roll_skill_pickpocketing"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_pickpocketing_cc" value="((((3 * @{skill_pickpocketing_ranks}) + 3) - abs((3 * @{skill_pickpocketing_ranks}) - 3)) / 2)"/>
                    </td>
                    <td title="formation requise !">
                        <span class="alert"></span>
                    </td>
                    <td>
                        Escamotage
                    </td>
                    <td>
                        <input type="number" name="attr_skill_pickpocketing_total" disabled="disabled" class="strong" value="(@{skill_pickpocketing_ranks}+@{skill_pickpocketing_cc}+@{skill_pickpocketing_stat}+@{skill_pickpocketing_trait}+@{skill_pickpocketing_gift}+@{skill_pickpocketing_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_pickpocketing_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_pickpocketing_class" value="(@{skill_pickpocketing_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_pickpocketing_stat" value="(@{character_dexterity_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Dex.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_pickpocketing_malus" value="(@{defense_malus})" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_pickpocketing_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_pickpocketing_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_pickpocketing_temporary" value="0" />
                    </td>
                </tr>
                <!-- appraise -->
                <tr>
                    <td>
                        <button title="test d'estimation" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test d'estimation}}{{test=[[1D20cf<1cs>20+([[@{skill_appraise_total}]])]]}}" name="roll_skill_appraise"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_appraise_cc" value="((((3 * @{skill_appraise_ranks}) + 3) - abs((3 * @{skill_appraise_ranks}) - 3)) / 2)"/>
                    </td>
                    <td></td>
                    <td>
                        Estimation
                    </td>
                    <td>
                        <input type="number" name="attr_skill_appraise_total" disabled="disabled" class="strong" value="(@{skill_appraise_ranks}+@{skill_appraise_cc}+@{skill_appraise_stat}+@{skill_appraise_trait}+@{skill_appraise_gift}+@{skill_appraise_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_appraise_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_appraise_class" value="(@{skill_appraise_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_appraise_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_appraise_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_appraise_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_appraise_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_appraise_temporary" value="0" />
                    </td>
                </tr>
                <!-- linguistics -->
                <tr>
                    <td>
                        <button title="test de linguistique" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de linguistique}}{{test=[[1D20cf<1cs>20+([[@{skill_linguistics_total}]])]]}}" name="roll_skill_linguistics"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_linguistics_cc" value="((((3 * @{skill_linguistics_ranks}) + 3) - abs((3 * @{skill_linguistics_ranks}) - 3)) / 2)"/>
                    </td>
                    <td title="formation requise !">
                        <span class="alert"></span>
                    </td>
                    <td>
                        Linguistique
                    </td>
                    <td>
                        <input type="number" name="attr_skill_linguistics_total" disabled="disabled" class="strong" value="(@{skill_linguistics_ranks}+@{skill_linguistics_cc}+@{skill_linguistics_stat}+@{skill_linguistics_trait}+@{skill_linguistics_gift}+@{skill_linguistics_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_linguistics_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_linguistics_class" value="(@{skill_linguistics_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_linguistics_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_linguistics_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_linguistics_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_linguistics_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_linguistics_temporary" value="0" />
                    </td>
                </tr>
                <!-- lore -->
                <tr>
                    <td>
                        <button title="test de lore" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de lore ( @{skill_lore_label} )}}{{test=[[1D20cf<1cs>20+([[@{skill_lore_total}]])]]}}" name="roll_skill_lore"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_lore_cc" value="((((3 * @{skill_lore_ranks}) + 3) - abs((3 * @{skill_lore_ranks}) - 3)) / 2)"/>
                    </td>
                    <td></td>
                    <td>
                        <div class="input-group">
                            <div class="input-group-text">
                                <span>Lore :</span>
                            </div>
                            <input name="attr_skill_lore_label" type="text">
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_lore_total" disabled="disabled" class="strong" value="(@{skill_lore_ranks}+@{skill_lore_cc}+@{skill_lore_stat}+@{skill_lore_trait}+@{skill_lore_gift}+@{skill_lore_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_lore_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_lore_class" value="(@{skill_lore_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group">
                            <input type="number" name="attr_skill_lore_stat" value="(@{skill_lore_stat_select})" disabled="disabled" />
                            <select name="attr_skill_lore_stat_select">
                                <option value="(@{character_strength_mod})">For.</option>
                                <option value="(@{character_dexterity_mod})">Dex.</option>
                                <option value="(@{character_constitution_mod})">Con.</option>
                                <option value="(@{character_intelligence_mod})" selected>Int.</option>
                                <option value="(@{character_wisdom_mod})">Sag.</option>
                                <option value="(@{character_charisma_mod})">Cha.</option>
                            </select>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_lore_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_lore_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_lore_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_lore_temporary" value="0" />
                    </td>
                </tr>
                <!-- career1 -->
                <tr>
                    <td>
                        <button title="test de profession" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de profession ( @{skill_career1_label} )}}{{test=[[1D20cf<1cs>20+([[@{skill_career1_total}]])]]}}" name="roll_skill_career1"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_career1_cc" value="((((3 * @{skill_career1_ranks}) + 3) - abs((3 * @{skill_career1_ranks}) - 3)) / 2)"/>
                    </td>
                    <td></td>
                    <td>
                        <div class="input-group">
                            <div class="input-group-text">
                                <span>Profession&nbsp;:</span>
                            </div>
                            <input name="attr_skill_career1_label" type="text">
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career1_total" disabled="disabled" class="strong" value="(@{skill_career1_ranks}+@{skill_career1_cc}+@{skill_career1_stat}+@{skill_career1_trait}+@{skill_career1_gift}+@{skill_career1_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career1_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career1_class" value="(@{skill_career1_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_career1_stat" value="(@{character_wisdom_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Sag.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career1_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career1_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career1_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career1_temporary" value="0" />
                    </td>
                </tr>
                <!-- career2 -->
                <tr>
                    <td>
                        <button title="test de profession" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de profession ( @{skill_career2_label} )}}{{test=[[1D20cf<1cs>20+([[@{skill_career2_total}]])]]}}" name="roll_skill_career2"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_career2_cc" value="((((3 * @{skill_career2_ranks}) + 3) - abs((3 * @{skill_career2_ranks}) - 3)) / 2)"/>
                    </td>
                    <td></td>
                    <td>
                        <div class="input-group">
                            <div class="input-group-text">
                                <span>Profession&nbsp;:</span>
                            </div>
                            <input name="attr_skill_career2_label" type="text">
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career2_total" disabled="disabled" class="strong" value="(@{skill_career2_ranks}+@{skill_career2_cc}+@{skill_career2_stat}+@{skill_career2_trait}+@{skill_career2_gift}+@{skill_career2_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career2_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career2_class" value="(@{skill_career2_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_career2_stat" value="(@{character_wisdom_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Sag.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career2_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career2_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career2_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career2_temporary" value="0" />
                    </td>
                </tr>
                <!-- career3 -->
                <tr>
                    <td>
                        <button title="test de profession" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de profession ( @{skill_career3_label} )}}{{test=[[1D20cf<1cs>20+([[@{skill_career3_total}]])]]}}" name="roll_skill_career3"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_career3_cc" value="((((3 * @{skill_career3_ranks}) + 3) - abs((3 * @{skill_career3_ranks}) - 3)) / 2)"/>
                    </td>
                    <td></td>
                    <td>
                        <div class="input-group">
                            <div class="input-group-text">
                                <span>Profession :</span>
                            </div>
                            <input name="attr_skill_career3_label" type="text">
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career3_total" disabled="disabled" class="strong" value="(@{skill_career3_ranks}+@{skill_career3_cc}+@{skill_career3_stat}+@{skill_career3_trait}+@{skill_career3_gift}+@{skill_career3_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career3_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career3_class" value="(@{skill_career3_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_career3_stat" value="(@{character_wisdom_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Sag.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career3_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career3_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career3_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career3_temporary" value="0" />
                    </td>
                </tr>
                <!-- representation1 -->
                <tr>
                    <td>
                        <button title="test de représentation" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de représentation ( @{skill_representation1_label}} )}{{test=[[1D20cf<1cs>20+([[@{skill_representation1_total}]])]]}}" name="roll_skill_representation1"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_representation1_cc" value="((((3 * @{skill_representation1_ranks}) + 3) - abs((3 * @{skill_representation1_ranks}) - 3)) / 2)"/>
                    </td>
                    <td title="formation requise !">
                        <span class="alert"></span>
                    </td>
                    <td>
                        <div class="input-group">
                            <div class="input-group-text">
                                <span>Représentation :</span>
                            </div>
                            <input name="attr_skill_representation1_label" type="text">
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation1_total" disabled="disabled" class="strong" value="(@{skill_representation1_ranks}+@{skill_representation1_cc}+@{skill_representation1_stat}+@{skill_representation1_trait}+@{skill_representation1_gift}+@{skill_representation1_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation1_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation1_class" value="(@{skill_representation1_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_representation1_stat" value="(@{character_charisma_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Cha.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation1_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation1_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation1_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation1_temporary" value="0" />
                    </td>
                </tr>
                <!-- representation2 -->
                <tr>
                    <td>
                        <button title="test de représentation" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de représentation ( @{skill_representation2_label} )}}{{test=[[1D20cf<1cs>20+([[@{skill_representation2_total}]])]]}}" name="roll_skill_representation2"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_representation2_cc" value="((((3 * @{skill_representation2_ranks}) + 3) - abs((3 * @{skill_representation2_ranks}) - 3)) / 2)"/>
                    </td>
                    <td title="formation requise !">
                        <span class="alert"></span>
                    </td>
                    <td>
                        <div class="input-group">
                            <div class="input-group-text">
                                <span>Répresentation :</span>
                            </div>
                            <input name="attr_skill_representation2_label" type="text">
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation2_total" disabled="disabled" class="strong" value="(@{skill_representation2_ranks}+@{skill_representation2_cc}+@{skill_representation2_stat}+@{skill_representation2_trait}+@{skill_representation2_gift}+@{skill_representation2_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation2_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation2_class" value="(@{skill_representation2_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_representation2_stat" value="(@{character_charisma_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Cha.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation2_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation2_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation2_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation2_temporary" value="0" />
                    </td>
                </tr>
                <!-- representation3 -->
                <tr>
                    <td>
                        <button title="test de représentation" type="roll" value="&{template:roll}{{basic=show}}{{who=@{character_name}}}{{label=test de représentation ( @{skill_representation3_label} )}}{{test=[[1D20cf<1cs>20+([[@{skill_representation3_total}]])]]}}" name="roll_skill_representation3"></button>
                    </td>
                    <td>
                        <input type="checkbox" name="attr_skill_representation3_cc" value="((((3 * @{skill_representation3_ranks}) + 3) - abs((3 * @{skill_representation3_ranks}) - 3)) / 2)"/>
                    </td>
                    <td title="formation requise !">
                        <span class="alert"></span>
                    </td>
                    <td>
                        <div class="input-group">
                            <div class="input-group-text">
                                <span>Représentation :</span>
                            </div>
                            <input name="attr_skill_representation3_label" type="text">
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation3_total" disabled="disabled" class="strong" value="(@{skill_representation3_ranks}+@{skill_representation3_cc}+@{skill_representation3_stat}+@{skill_representation3_trait}+@{skill_representation3_gift}+@{skill_representation3_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation3_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation3_class" value="(@{skill_representation3_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_representation3_stat" value="(@{character_charisma_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Cha.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation3_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation3_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation3_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation3_temporary" value="0" />
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="tab-content">
        <div class="flexrow">
            <div class="flexcol">
                <div class="feat-racial section">
                    <h2>Traits racial</h2>
                    <fieldset class="repeating_featracial">
                        <div class="featracial-content">
                            <input class="featracial-label" type="text" placeholder="Nom du trait racial" name="attr_featracial_label">
                            <textarea class="featracial-description" name="attr_featracial_description" placeholder="Description complète du trait racial"></textarea>
                        </div>
                    </fieldset>
                </div>
            </div>
            <div class="flexcol">
                <div class="feat section">
                    <h2>Dons</h2>
                    <fieldset class="repeating_feat">
                        <div class="feat-content">
                            <div class="flexrow">
                                <div class="flexcol">
                                    <input type="text" name="attr_feat_name" placeholder="Nom du don">
                                </div>
                                <div class="flexcol5">
                                    <div class="input-group">
                                        <div class="input-group-text">
                                            <span>Utilisations</span>
                                        </div>
                                        <input type="number" name="attr_feat_user" value="0">
                                        <div class="input-group-text">
                                            <span data-i18n="separator">/</span>
                                        </div>
                                        <input type="number" name="attr_feat_user_max" value="1">
                                    </div>
                                </div>
                            </div>
                            <input class="feat-description-short" type="text" name="attr_feat_description_short" placeholder="Description courte">
                            <textarea class="feat-description" name="attr_feat_description" placeholder="Description complète du don"></textarea>
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>
    </div>

    <div class="tab-content">
        <div class="flexrow">
            <div class="flexcol">
                <div class="magic section">
                    <h2>Magie</h2>
                    <div class="flexrow">
                        <div class="flexcol thead">
                            <p>Nom</p>
                        </div>
                        <div class="flexcol12 thead">
                            <p><abbr title="Caractéristique">Carac.</abbr></p>
                        </div>
                        <div class="flexcol thead">
                            <p>Classe</p>
                        </div>
                        <div class="flexcol thead">
                            <p>Divers</p>
                        </div>
                    </div>
                    <fieldset>
                        <div class="flexrow">
                            <div class="flexcol">
                                <input type="text" name="attr_spell-name" placeholder="" />
                            </div>
                            <div class="flexcol12">
                                <select name="attr_spell-focus-stat">
                                    <option value="(@{character_intelligence_mod})" selected="selected">Int.</option>
                                    <option value="(@{character_wisdom_mod})">Sag.</option>
                                    <option value="(@{character_charisma_mod})">Cha.</option>
                                </select>
                            </div>
                            <div class="flexcol">
                                <input type="number" name="attr_spell-focus-mod" value="0"/>
                            </div>
                            <div class="flexcol">
                                <input type="number" name="attr_spell-focus-misc" value="0"/>
                            </div>
                        </div>
                        <b>Description</b>
                        <textarea name="attr_spells-description"></textarea>
                    </fieldset>
                </div>
            </div>
            <div class="flexcol">
                <div class="witchcraft section">
                    <h2>Sortilèges</h2>
                    <fieldset class="repeating_witchcraft">
                        <table>
                            <thead>
                            <tr>
                                <th>Préparé</th>
                                <th>Nom</th>
                                <th>Classe</th>
                                <th>Niveau</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>
                                    <input type="checkbox" name="attr_witchcraft-prepared" />
                                </td>
                                <td>
                                    <input type="text" name="attr_withcraft-name" />
                                </td>
                                <td>
                                    <select name="attr_witchraft_class">
                                        <option selected="selected">N/A</option>
                                        <option value="(@{attr_spell-classe1-Focus-name})"></option>
                                        <option value="(@{attr_spell-classe2-Focus-name})"></option>
                                        <option value="(@{attr_spell-classe3-Focus-name})"></option>
                                    </select>
                                </td>
                                <td>
                                    <input type="number" name="attr_witchcraft-level" value="0" />
                                </td>
                            </tr>
                            </tbody>
                        </table>

                        <table>
                            <thead>
                            <tr>
                                <th>École</th>
                                <th>Composants</th>
                                <th>Portée</th>
                                <th>Cibles / zone</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>
                                    <input type="text" name="attr_witchcraft-school" />
                                </td>
                                <td>
                                    <input type="text" name="attr_witchcraft-components" />
                                </td>
                                <td>
                                    <input type="text" name="attr_witchcraft-range" />
                                </td>
                                <td>
                                    <input type="text" name="attr_witchcraft-target" />
                                </td>
                            </tr>
                            </tbody>
                        </table>

                        <table>
                            <thead>
                            <tr>
                                <th>Condition jet de sauvegarde</th>
                                <th>Durée</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>
                                    <input type="text" name="attr_witchcraft-save-condition" />
                                </td>
                                <td>
                                    <select name="attr_witchcraft_duration">
                                        <option selected="selected"></option>
                                    </select>
                                </td>
                            </tr>
                            </tbody>
                        </table>

                        <span>Description</span>
                        <textarea name="attr_witchcraft-description"></textarea>
                    </fieldset>
                </div>
            </div>
        </div>

        <div class="spell section">
            <table style="display: none;">
                <thead>
                <tr>
                    <th class="spell-classe-FocusRoll">Jet de Concentration</th>
                    <th class="spell-classe-name">Nom</th>
                    <th class="spell-classe-Focus-Stat">Caractéristique</th>
                    <th class="spell-classe-Focus-Mod">Classe</th>
                    <th class="spell-classe-Focus-Misc">Divers</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>
                        <button title="attr_spell-classe1-FocusRoll" type="roll" value='&{template:basicstatroll}{{who=@{character_name}}}{{name=Concentration}}{{res=[[1D20+[[@{spell-classe1-Focus-Stat}]]+@{spell-classe1-Focus-Mod}+@{spell-classe1-Focus-Misc}]]}}' name='roll_Focus1'> Concentration</button>
                    </td>
                    <td class="spell-classe">
                        <input class="inputbox-spell-classe" type="text" name="attr_spell-classe1-Focus-name" value="N/A" />
                    </td>
                    <td class="spell-classe">
                        <select class="inputbox-spell-classe" name="attr_spell-classe1-Focus-Stat">
                            <option value="(@{character_intelligence_mod})" selected>Int.</option>
                            <option value="(@{character_wisdom_mod})">Sag.</option>
                            <option value="(@{character_charisma_mod})">Cha.</option>
                        </select>
                    </td>
                    <td class="spell-classe">
                        <input class="inputbox-spell-classe" type="number" name="attr_spell-classe1-Focus-Mod" value="0"/>
                    </td>
                    <td class="spell-classe">
                        <input class="inputbox-spell-classe" type="number" name="attr_spell-classe1-Focus-Misc" value="0"/>
                    </td>
                </tr>
                <tr>
                    <td>
                        <button title="attr_spell-classe2-FocusRoll" type="roll" value='&{template:basicstatroll}{{who=@{character_name}}}{{name=Concentration}}{{res=[[1D20+[[@{spell-classe2-Focus-Stat}]]+@{spell-classe2-Focus-Mod}+@{spell-classe2-Focus-Misc}]]}}' name='roll_Focus2'> Concentration</button>
                    </td>
                    <td class="spell-classe">
                        <input class="inputbox-spell-classe" type="text" name="attr_spell-classe2-Focus-name" value="N/A" />
                    </td>
                    <td class="spell-classe">
                        <select class="inputbox-spell-classe" name="attr_spell-classe2-Focus-Stat">
                            <option value="(@{character_intelligence_mod})" selected>Int.</option>
                            <option value="(@{character_wisdom_mod})">Sag.</option>
                            <option value="(@{character_charisma_mod})">Cha.</option>
                        </select>
                    </td>
                    <td class="spell-classe">
                        <input class="inputbox-spell-classe" type="number" name="attr_spell-classe2-Focus-Mod" value="0"/>
                    </td>
                    <td class="spell-classe">
                        <input class="inputbox-spell-classe" type="number" name="attr_spell-classe2-Focus-Misc" value="0"/>
                    </td>
                </tr>
                <tr>
                    <td>
                        <button title="attr_spell-classe2-FocusRoll" type="roll" value='&{template:roll}{{basic=show}}{{who=@{character_name}}}{{name=Concentration}}{{res=[[1D20+[[@{spell-classe3-Focus-Stat}]]+@{spell-classe3-Focus-Mod}+@{spell-classe3-Focus-Misc}]]}}' name='roll_Focus3'> Concentration</button>
                    </td>
                    <td class="spell-classe">
                        <input class="inputbox-spell-classe" type="text" name="attr_spell-classe3-Focus-name" value="N/A" />
                    </td>
                    <td class="spell-classe-">
                        <select class="inputbox-spell-classe" name="attr_spell-classe3-Focus-Stat">
                            <option value="(@{character_intelligence_mod})" selected>Int.</option>
                            <option value="(@{character_wisdom_mod})">Sag.</option>
                            <option value="(@{character_charisma_mod})">Cha.</option>
                        </select>
                    </td>
                    <td class="spell-classe-">
                        <input class="inputbox-spell-classe" type="number" name="attr_spell-classe3-Focus-Mod" value="0"/>
                    </td>
                    <td class="spell-classe-">
                        <input class="inputbox-spell-classe" type="number" name="attr_spell-classe3-Focus-Misc" value="0"/>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="tab-content">
        <div class="equipment-purse section">
            <div class="input-group">
                <div class="input-group-text">
                    Bourse :
                </div>
                <input type="number" name="attr_devise_gold" value="0" min="0" />
                <div class="input-group-text" title="pièces d'or">
                    <span class="device device-gold"></span>
                </div>
                <input type="number" name="attr_devise_silver" value="0" min="0" />
                <div class="input-group-text" title="pièces d'argent">
                    <span class=" device device-silver"></span>
                </div>
                <input type="number" name="attr_devise_copper" value="0" min="0" />
                <div class="input-group-text" title="pièces de cuivre">
                    <span class="device device-copper"></span>
                </div>
            </div>
        </div>

        <div class="equipment-weapon section">
            <h2>Armes</h2>
            <table>
                <thead>
                <tr>
                    <th width="25%">Nom</th>
                    <th width="10%"title="1d6, 2d8, ..." >Dégâts</th>
                    <th width="120px" title="facteur de Critiques">Crit.</th>
                    <th width="10%" title="facteur de portée">Portée</th>
                    <th width="10%">Type</th>
                    <th>Spécial</th>
                </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
            <fieldset class="repeating_equipementweapon">
                <div class="equipment-weapon-content">
                    <table>
                        <tbody>
                        <tr>
                            <td width="25%">
                                <input type="text" name="attr_equipment_weapon_name" />
                            </td>
                            <td width="10%">
                                <input type="text" name="attr_equipment_weapon_damage" />
                            </td>
                            <td width="130px">
                                <div class="input-group">
                                    <select name="attr_equipment_weapon_critic">
                                        <option value="20" selected="selected">​20</option>
                                        <option value="19">​19-20</option>
                                        <option value="18">​18-20</option>
                                        <option value="17">​17-20</option>
                                        <option value="16">​16-20</option>
                                        <option value="15">​15-20</option>
                                        <option value="14">​14-20</option>
                                        <option value="13">​13-20</option>
                                        <option value="12">​12-20</option>
                                        <option value="11">​11-20</option>
                                        <option value="10">10-20​</option>
                                        <option value="9">​9-20</option>
                                        <option value="8">​8-20</option>
                                        <option value="7">​7-20</option>
                                        <option value="6">​6-20</option>
                                        <option value="5">​5-20</option>
                                        <option value="4">​4-20</option>
                                        <option value="3">​3-20</option>
                                        <option value="2">2-20</option>
                                    </select>
                                    <div class="input-group-append">
                                        <span class="input-group-text">&#215;</span>
                                    </div>
                                    <input type="number" name="attr_equipment_weapon_critic_multiplier" value="1" min="0" />
                                </div>
                            </td>
                            <td width="10%">
                                <input type="text" name="attr_equipment_weapon_range" value="CaC" />
                            </td>
                            <td width="10%">
                                <select name="attr_equipment_weapon_type">
                                    <option value="1" selected="selected">​-</option>
                                    <option value="2">C</option>
                                    <option value="3">​P</option>
                                    <option value="4">​T</option>
                                    <option value="5">​C/P</option>
                                    <option value="6">​C/T</option>
                                    <option value="7">​P/T</option>
                                </select>
                            </td>
                            <td>
                                <input type="text" name="attr_equipment_weapon_special" />
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </fieldset>
        </div>

        <div class="equipment-armor section">
            <h2>Armure</h2>
            <table>
                <thead>
                <tr>
                    <th width="4%" title="Équipé ?">Éqp.</th>
                    <th width="26%">Nom</th>
                    <th width="10%" title="Bonus d'Armure">BA</th>
                    <th width="10%" title="Bonus de Dextérité Maximale">Dex. Max.</th>
                    <th width="10%" title="Malus d'armure aux tests">Malus</th>
                    <th width="10%" title="Risque d'Échec des sorts profanes">Échec</th>
                    <th width="30%">Spécial</th>
                </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
            <fieldset class="repeating_equipmentarmor">
                <table>
                    <thead>
                    <tr>
                        <td width="4%">
                            <input type="checkbox" name="attr_equipment_armor_worn" />
                        </td>
                        <td width="26%">
                            <input type="text" name="attr_equipment_armor_name"/>
                        </td>
                        <td width="10%">
                            <input type="text" name="attr_equipment_armor_bonus"/>
                        </td>
                        <td width="10%">
                            <input type="text" name="attr_equipment_armor_dexterity_max"/>
                        </td>
                        <td width="10%">
                            <input type="text" name="attr_equipment_armor_pa"/>
                        </td>
                        <td width="10%">
                            <input type="text" name="attr_equipment_armor_spell_failure"/>
                        </td>
                        <td width="30%">
                            <input type="text" name="attr_equipment_armor_special" />
                        </td>
                    </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </fieldset>
        </div>

        <div class="flexrow">
            <div class="flexcol">
                <div class="inventory section">
                    <h2>Inventaire</h2>
                    <fieldset class="repeating_inventory">
                        <div class="flexrow">
                            <div class="flexcol">
                                <input class="inventory-description" type="text" name="attr_inventory" placeholder="Description de l'objet" />
                            </div>
                            <div class="flexcol1">
                                <input class="inventory-quantity" type="number" name="attr_inventory_quantity_max" value="0"/>
                            </div>
                        </div>
                    </fieldset>
                </div>
            </div>

            <div class="flexcol">
                <div class="equipment-magic section">
                    <h2>Équipement magique</h2>
                    <table>
                        <thead>
                        <tr>
                            <td width="20%"></td>
                            <th>Nom</th>
                            <th>description</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>
                                <span>Tête</span>
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Head-name" />
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Head-description"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span>Front</span>
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Headband-name" />
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Headband-description"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span>Yeux</span>
                            </td>
                            <td>
                                <input type="text" name="attr_magical-equipment-name" />
                            </td>
                            <td>
                                <input type="text" name="attr_magical-equipment-description"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span>Cou</span>
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Neck-name" />
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Neck-description"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span>Épaules</span>
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Shoulders-name" />
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Shoulders-description"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span>Corps</span>
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Body-name" />
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Body-description"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span>Torse</span>
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Chest-name" />
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Chest-description"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span>Ceinture</span>
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Belt-name" />
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Belt-description"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span>Poignets</span>
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Wrist-name" />
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Wrist-description"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span>Main</span>
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Feet-name" />
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Feet-description"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span>1er doigt</span>
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Ring1-name" />
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Ring1-description"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span>2eme doigt</span>
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Ring2-name" />
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Ring2-description"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span>Pieds</span>
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Eyes-name" />
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Eyes-description"/>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>

    <div class="tab-content">
        <fieldset class="repeating_note">
            <div class="note section">
                <input class="note-label" type="text" name="attr_note-label" placeholder="Titre de la note" />
                <textarea class="note-content" name="attr_notes-content" placeholder="Contenu de la note"></textarea>
            </div>
        </fieldset>
    </div>
</div>

<rolltemplate class="sheet-rolltemplate-roll">
    {{#basic}}
    <div class="sheet-body sheet-basic">
        <p>
            <b>{{who}}</b> {{label}} : {{test}}
        </p>
    </div>
    {{/basic}}

    {{#battle}}
    <div class="sheet-body sheet-battle">
        <div class="sheet-flexrow">
            <div class="sheet-flexcol sheet-left">
                <p>
                    <b>{{who}}</b><br />
                    {{attack_name}}<br />
                    <b>Attaque</b> : {{test}} <br />
                </p>
            </div>
            <div class="sheet-flexcol sheet-right">
                <p>
                    <b>{{target_name}}</b><br />
                    <b>CA</b> : {{target_ca}}<br />
                </p>
            </div>
        </div>

        <div class="sheet-center">
            <!-- CRITIC -->
            {{#rollWasCrit() test}}
            <p>
                <b class="sheet-danger">coup critique !</b><br />
                <b>dégâts</b> : {{damage_critic}}<br />
            </p>
            {{/rollWasCrit() test}}
            <!-- CRITIC -->

            <!-- NOT CRITIC -->
            {{#^rollWasCrit() test}}

            <!-- missed -->
            {{#rollLess() test target_ca}}
            <p>
                raté !<br />
            </p>
            {{/rollLess() test target_ca}}

            <!-- hit -->
            {{#^rollLess() test target_ca}}
            <p>
                touché !<br />
                <b>dégâts</b> : {{damage}}<br />
            </p>
            {{/^rollLess() test target_ca}}

            {{/^rollWasCrit() test}}
            <!-- NOT CRITIC -->
        </div>
    </div>
    {{/battle}}
</rolltemplate>
