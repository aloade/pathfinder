<script type="text/worker">
    // size
    on("sheet:opened change:character_size_select remove:character_size_select", () => {
        getAttrs(["character_size_select"], (user) => {
            console.log(user);
            Object.keys(user).forEach( key => { user[key] = parseValue(user[key]) });
            console.log(user);

        // prepare load
        let load = {};
        load["character_size"] = user.character_size_select;
        load["character_size_special"] = -user.character_size_select;
        delete(user);

        setAttrs(load);
        });
    });

    // classes
    on("sheet:opened change:repeating_classes remove:repeating_classes change:character_intelligence_base remove:character_intelligence_base change:character_intelligence_bonus remove:character_intelligence_bonus change:character_intelligence_malus remove:character_intelligence_malus", () => {
        getAttrs(["character_intelligence_base", "character_intelligence_bonus", "character_intelligence_malus"], (user) => {
            Object.keys(user).forEach( key => { user[key] = parseValue(user[key]) });
            let section = "classes";
            let fields = {
                "in": {
                    "name" : "classes_name",
                    "bba1" : "classes_bba1",
                    "bba2" : "classes_bba2",
                    "bba3" : "classes_bba3",
                    "bba4" : "classes_bba4",
                    "vigor" : "classes_vigor",
                    "reflexes" : "classes_reflexes",
                    "willpower" : "classes_willpower",
                    "level" : "classes_level"
                },
                "out": {
                    "compniv" : "classes_compniv",
                    "bba1" : "foo_classes_bba1_total",
                    "bba2" : "foo_classes_bba2_total",
                    "bba3" : "foo_classes_bba3_total",
                    "bba4" : "foo_classes_bba4_total",
                    "vigor" : "foo_classes_vigor_total",
                    "reflexes" : "foo_classes_reflexes_total",
                    "willpower" : "foo_classes_willpower_total",
                    "level" : "foo_classes_level_total"
                }
            }

            getAttrsRepeating(section, Object.values(fields.in), repeating => {
                let cache = {
                    "intelligence" : Math.floor( (user.character_intelligence_base + user.character_intelligence_bonus - user.character_intelligence_malus) / 2 - 5),
                    "bba1" : 0,
                    "bba2" : 0,
                    "bba3" : 0,
                    "bba4" : 0,
                    "vigor" : 0,
                    "reflexes" : 0,
                    "willpower" : 0,
                    "level" : 0
                }
                delete(user);

                // iterate load
                Object.keys(repeating).forEach( id => {
                    cache.bba1 += repeating[id][fields.in.bba1];
                    cache.bba2 += repeating[id][fields.in.bba2];
                    cache.bba3 += repeating[id][fields.in.bba3];
                    cache.bba4 += repeating[id][fields.in.bba4];
                    cache.vigor += repeating[id][fields.in.vigor];
                    cache.reflexes += repeating[id][fields.in.reflexes];
                    cache.willpower += repeating[id][fields.in.willpower];
                    cache.level += repeating[id][fields.in.level];
                });
                cache.rank *= cache.level;
                delete(repeating);

                // prepare load
                let load = {};
                load[fields.out.bba1] = cache.bba1;
                load[fields.out.bba2] = cache.bba2;
                load[fields.out.bba3] = cache.bba3;
                load[fields.out.bba4] = cache.bba4;
                load[fields.out.vigor] = cache.vigor;
                load[fields.out.reflexes] = cache.reflexes;
                load[fields.out.willpower] = cache.willpower;
                load[fields.out.level] = cache.level;
                delete(cache);

                setAttrs(load);
            });
        });
    });

    // armor
    on("sheet:opened change:repeating_equipmentarmor remove:repeating_equipmentarmor change:character_dexterity_base remove:character_dexterity_base change:character_dexterity_bonus remove:character_dexterity_bonus change:character_dexterity_malus remove:character_dexterity_malus", () => {
        let section = "equipmentarmor";
        let fields = {
            "in": {
                "armor" : "equipment_armor_bonus",
                "worn" : "equipment_armor_worn",
                "dexterity" : "equipment_armor_dexterity_max",
                "malus" : "equipment_armor_malus"
            },
            "out": {
                "armor" : "foo_defense_ca_bonus",
                "dexterity": "foo_defense_dexterity",
                "malus" : "foo_defense_malus"
            }
        }

        getAttrsRepeating(section, Object.values(fields.in), (repeating) => {
            getAttrs(["character_dexterity_base", "character_dexterity_bonus", "character_dexterity_malus"], (user) => {
            Object.keys(user).forEach( key => { user[key] = parseValue(user[key]) });
                let cache = {
                    "dexterity" : Math.floor( (user.character_dexterity_base + user.character_dexterity_bonus - user.character_dexterity_malus) / 2 - 5),
                    "armor" : 0,
                    "malus": 0
                }
                if ( cache.dexterity < 0 ) cache.dexterity = 0;
                delete(user);

                // iterate load
                Object.keys(repeating).forEach( id => {
                    if ( repeating[id][fields.in.worn] === 1 ) {
                        cache.armor += repeating[id][fields.in.armor];
                        if ( repeating[id][fields.in.dexterity] !== null && cache.dexterity > repeating[id][fields.in.dexterity] ) cache.dexterity = repeating[id][fields.in.dexterity];
                        cache.malus += repeating[id][fields.in.malus];
                    }
                });
                delete(repeating);

                // prepare load
                let load = {};
                load[fields.out.armor] = cache.armor;
                load[fields.out.dexterity] = cache.dexterity;
                load[fields.out.malus] = Math.abs(cache.malus);
                delete(cache);

                setAttrs(load);
            });
        });
    });

    // get all attributes name and their values from a repeating block ordered by Id (roll20 generated)
    //
    // section	        string from "repeating_<section>_<field>"
    // fields           string or array of string from "repeating_<section>_<field>"
    // callback         returning function after async. )
    function getAttrsRepeating(section, fields, callback) {
        section = section.replace(/^repeating_/g, section);
        if ( !Array.isArray(fields) ) fields = [fields];
        if ( !(callback instanceof Function) ) callback = () => {};

        getSectionIDs(section, ids => {
            // prepares attributes name for "getAttrs"
            let attributeNames = ids.reduce( (m,id) => [...m, ...(fields.map(field => "repeating_"+section+'_'+id+'_'+field))],[]);

            // get data from DOM
            // note : we working on raw data and not on init. variables
            // because we don't know what "getAttrs" produce
            getAttrs(attributeNames, raw => {
                let load = {}, regex = new RegExp( "repeating_" + section + "_([^_]*)_(.*)"), match;
                Object.keys(raw).forEach( key => {
                    match = key.match(regex);
                    if ( !load.hasOwnProperty( match[1]) ) load[ match[1] ] = {}
                    load[ match[1] ][ match[2] ] = parseValue( raw[key] );
                });
                callback(load);
            });
        });
    }

    // parse values got in DOM and clean it
    function parseValue(value) {
        if (value === "") return null
        // checkbox from roll20 return "on" or 0
        return parseFloat(value, 10) || (value === "on" ? 1 : 0);
    }

</script>

<div class="header">
    <div class="flex-row">
        <div class="flex-col8">
            <div class="header-character">
                <input type="text" name="attr_character_name" placeholder="Nom du personnage" data-i18n-placeholder="character-name" />
            </div>
        </div>

        <div class="flex-col4">
            <div class="header-player">
                <input type="text" name="attr_player_name" class="text-right" placeholder="Nom du joueur" data-i18n-placeholder="player-name" />
            </div>
        </div>
    </div>

    <div class="header-stat">
        <table>
            <thead></thead>
            <tbody>
            <tr>
                <td width="12.5%">
                    <span data-i18n="level">Niveau</span>
                </td>
                <td width="12.5%">
                    <input type="number" name="attr_level" value="(@{foo_classes_level_total})" disabled="disabled"/>
                </td>

                <td width="8.3334%">
                    <span title="Expérience" data-i18n="experience" data-i18n-title="experience-title">Exp.</span>
                </td>
                <td width="16.6666%">
                    <div class="input-group">
                        <input type="text" name="attr_character_experience" value="0" min="0" />
                        <div class="input-group-text">
                            <span data-i18n="separator">/</span>
                        </div>
                        <input type="text" name="attr_character_experience_max" value="0"  min="0"/>
                    </div>
                </td>

                <td width="8.3334%">
                    <span data-i18n="vitality">Vitalité</span>
                </td>
                <td width="16.6666%">
                    <div class="input-group">
                        <input type="text" name="attr_character_vitality" value="0" min="0" />
                        <div class="input-group-text">
                            <span data-i18n="separator">/</span>
                        </div>
                        <input type="text" name="attr_character_vitality_max" value="0" min="0" />
                    </div>
                </td>

                <td width="8.3334%">
                    <span data-i18n="health">Santé</span>
                </td>
                <td width="16.6666%">
                    <div class="input-group">
                        <input type="text" name="attr_character_health" value="0" min="0" />
                        <div class="input-group-text">
                            <span data-i18n="separator">/</span>
                        </div>
                        <input type="text" name="attr_character_health_max" value="0" min="0" />
                    </div>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="tab">
    <input type="radio" id="tab1" name="attr_tab" checked="checked">
    <label for="tab1">
        <span title="Personnage" class="tab-character"></span>
    </label>
    <input type="radio" id="tab2" name="attr_tab">
    <label for="tab2">
        <span title="Combat" class="tab-battle"></span>
    </label>
    <input type="radio" id="tab3" name="attr_tab">
    <label for="tab3">
        <span title="Magie" class="tab-magic"></span>
    </label>
    <input type="radio" id="tab4" name="attr_tab">
    <label for="tab4">
        <span title="Défense" class="tab-defense"></span>
    </label>
    <input type="radio" id="tab5" name="attr_tab">
    <label for="tab5">
        <span title="Compétences" class="tab-skill"></span>
    </label>
    <input type="radio" id="tab6" name="attr_tab">
    <label for="tab6">
        <span title="Talents" class="tab-feat"></span>
    </label>
    <input type="radio" id="tab7" name="attr_tab">
    <label for="tab7">
        <span title="Inventaire" class="tab-inventory"></span>
    </label>
    <input type="radio" id="tab8" name="attr_tab">
    <label for="tab8">
        <span title="Notes" class="tab-note"></span>
    </label>

    <div class="tab-content">
        <h1>Personnage</h1>

        <div class="flex-row">
            <div class="flex-col8">
                <div class="stat section">
                    <table>
                        <thead>
                        <tr>
                            <td width="1%">
                                <div class="fake-button-roll"></div>
                            </td>
                            <th title="Statistiques">
                                <span title="Statistiques">Stat.</span>
                            </th>
                            <th width="15%">
                                <span title="= Mod. + Base + Bonus + Malus">Total</span>
                            </th>
                            <th width="15%">
                                <span title="Modificateur">Mod.</span>
                            </th>
                            <th width="15%">
                                <span>Base</span>
                            </th>
                            <th width="15%">
                                <span>Bonus</span>
                            </th>
                            <th width="15%">
                                <span>Malus</span>
                            </th>
                        </tr>
                        </thead>
                        <tr>
                            <td>
                                <button
                                        title="test de force"
                                        type="roll"
                                        value="(&{template:roll} {{basic=show}} {{who=@{character_name}}} {{label=test de force}} {{test=[[1D20cf<1cs>20+@{character_strength_mod}]]}})"
                                        name="roll_character_strength"
                                ></button>
                            </td>
                            <td class="center">
                                <span>Force</span>
                            </td>
                            <td>
                                <input type="number" name="attr_character_strength_total" class="strong" value="(@{character_strength_base}+@{character_strength_bonus}-@{character_strength_malus})" disabled="disabled"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_strength_mod" value="(floor((@{character_strength_total}/2)-5))" disabled="disabled"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_strength_base" value="10" min="0" />
                            </td>
                            <td>
                                <input type="number" name="attr_character_strength_bonus" value="0" min="0" />
                            </td>
                            <td>
                                <input type="number" name="attr_character_strength_malus" value="0" min="0"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <button
                                        title="test de dextérité"
                                        type="roll"
                                        value="(&{template:roll} {{basic=show}} {{who=@{character_name}}} {{label=test de dextérité}} {{test=[[1D20cf<1cs>20+@{character_dexterity_mod}]]}})"
                                        name="roll_character_dexterity"
                                ></button>
                            </td>
                            <td class="center">
                                <span>Dextérité</span>
                            </td>
                            <td>
                                <input type="number" name="attr_character_dexterity_total" class="strong" value="(@{character_dexterity_base}+@{character_dexterity_bonus}-@{character_dexterity_malus})" disabled="disabled"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_dexterity_mod" value="(floor((@{character_dexterity_total}/2)-5))" disabled="disabled"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_dexterity_base" value="10" min="0"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_dexterity_bonus" value="0" min="0"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_dexterity_malus" value="0" min="0" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <button
                                        title="test de constitution"
                                        type="roll"
                                        value="(&{template:roll} {{basic=show}} {{who=@{character_name}}} {{label=test de constitution}} {{test=[[1D20cs>20+@{character_constitution_mod}]]}})"
                                        name="roll_character_constitution"
                                ></button>
                            </td>
                            <td class="center">
                                <span>Constitution</span>
                            </td>
                            <td>
                                <input type="number" name="attr_character_constitution_total" class="strong" value="(@{character_constitution_base}+@{character_constitution_bonus}-@{character_constitution_malus})" disabled="disabled"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_constitution_mod" value="(floor((@{character_constitution_total}/2)-5))" disabled="disabled"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_constitution_base" value="10" min="0"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_constitution_bonus" value="0" min="0"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_constitution_malus" value="0"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <button
                                        title="test d'intelligence"
                                        type="roll"
                                        value="(&{template:roll} {{basic=show}} {{who=@{character_name}}} {{label=test d'intelligence}} {{test=[[1D20cs>20+@{character_intelligence-mod}]]}})"
                                        name="roll_character_intelligence"
                                ></button>
                            </td>
                            <td class="center">
                                <span>Intelligence</span>
                            </td>
                            <td>
                                <input type="number" name="attr_character_intelligence_total" class="strong" value="(@{character_intelligence_base}+@{character_intelligence_bonus}-@{character_intelligence_malus})" disabled="disabled"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_intelligence_mod" value="(floor((@{character_intelligence_total}/2)-5))" disabled="disabled"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_intelligence_base" value="10" min="0" />
                            </td>
                            <td>
                                <input type="number" name="attr_character_intelligence_bonus" value="0" min="0"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_intelligence_malus" value="0" min="0"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <button
                                        title="test de sagesse"
                                        type="roll"
                                        value="(&{template:roll} {{basic=show}} {{who=@{character_name}}} {{label=test de sagesse}} {{test=[[1D20cs>20+@{character_wisdom_mod}]]}})"
                                        name="roll_character_wisdom"
                                ></button>
                            </td>
                            <td class="center">
                                <span>Sagesse</span>
                            </td>
                            <td>
                                <input type="number" name="attr_character_wisdom_total" class="strong" value="(@{character_wisdom_base}+@{character_wisdom_bonus}-@{character_wisdom_malus})" disabled="disabled"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_wisdom_mod" value="(floor((@{character_wisdom_total}/2)-5))" disabled="disabled"/>
                            </td>
                            <td>
                                <input  type="number" name="attr_character_wisdom_base" value="10" min="0" />
                            </td>
                            <td>
                                <input type="number" name="attr_character_wisdom_bonus" value="0" min="0" />
                            </td>
                            <td>
                                <input type="number" name="attr_character_wisdom_malus" value="0" min="0"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <button
                                        title="test de charisme"
                                        type="roll"
                                        value="(&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de charisme}} {{test=[[1D20cs>20+@{character_charisma_mod}]]}})"
                                        name="roll_character_charisma"
                                ></button>
                            </td>
                            <td class="center">
                                <span>Charisme</span>
                            </td>
                            <td>
                                <input type="number" name="attr_character_charisma_total" class="strong" value="(@{character_charisma_base}+@{character_charisma_bonus}-@{character_charisma_malus})" disabled="disabled"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_charisma_mod" value="(floor((@{character_charisma_total}/2)-5))" disabled="disabled"/>
                            </td>
                            <td>
                                <input type="number" name="attr_character_charisma_base" value="10" min="0" />
                            </td>
                            <td>
                                <input type="number" name="attr_character_charisma_bonus" value="0" min="0" />
                            </td>
                            <td>
                                <input type="number" name="attr_character_charisma_malus" value="0" min="0"/>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="flex-col4">
                <div class="character section">
                    <table>
                        <thead>
                        <tr>
                            <th width="50%" class="general-info-title">
                                <span>Origine</span>
                            </th>
                            <th width="50%" class="general-info-title">
                                <span>Divinité</span>
                            </th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>
                                <input type="text" name="attr_character_origin" placeholder="N/A" />
                            </td>
                            <td>
                                <input type="text" name="attr_character_culture" placeholder="N/A" />
                            </td>
                        </tr>
                        </tbody>
                    </table>

                    <table>
                        <thead>
                        <tr>
                            <th width="50%" class="general-info-title">
                                <span>Alignement</span>
                            </th>
                            <th width="50%" class="general-info-title">
                                <span>Peuple</span>
                            </th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>
                                <input type="text" name="attr_character_alignment" placeholder="N/A" />
                            </td>
                            <td>
                                <input type="text" name="attr_character_race" placeholder="N/A">
                            </td>
                        </tr>
                        </tbody>
                    </table>

                    <table>
                        <thead>
                        <tr>
                            <th width="50%" class="general-info-title">
                                <span>Taille</span>
                            </th>
                            <th width="50%" class="general-info-title">
                                <span>Âge</span>
                            </th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>
                                <input type="hidden" name="attr_character_size" value="0" />
                                <input type="hidden" name="attr_character_size_special" value="0" />
                                <select name="attr_character_size_select">
                                    <option value="-8">Colossal</option>
                                    <option value="-4">Gigantesque</option>
                                    <option value="-2">Très Grande</option>
                                    <option value="-1">Grande</option>
                                    <option value="0" selected="selected">Moyenne</option>
                                    <option value="1">Petite</option>
                                    <option value="2">Très Petite</option>
                                    <option value="4">Minuscule</option>
                                    <option value="8">Infime</option>
                                </select>
                            </td>
                            <td>
                                <input type="text" name="attr_character_age" placeholder="N/A">
                            </td>
                        </tr>
                        </tbody>
                    </table>

                </div>
            </div>
        </div>
        <div class="tab-content-break"></div>

        <div class="class section">
            <h2>Classes</h2>
            <table>
                <thead>
                <tr>
                    <th width="25%">
                        <span>Classe</span>
                    </th>
                    <th width="8.333333%">
                        <span title="Compétences par Niveaux&#13;= point de compétence + Modificateur intelligence">Cpt./Niv.</span>
                    </th>
                    <th colspan="4" width="33.333333%">
                        <span title="Bonus de Base à l’Attaque">BBA</span>
                    </th>
                    <th  width="8.333333%">
                        <span title="Réflexes">Réf.</span>
                    </th>
                    <th width="8.333333%">
                        <span title="Vigueur">Vig.</span>
                    </th>
                    <th width="8.333333%">
                        <span title="Volonté">Vol.</span>
                    </th>
                    <th width="8.333333%">
                        <span title="Niveau">Niv.</span>
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td class="center strong">
                        <span>Total</span>
                    </td>
                    <td>
                        <span></span>
                    </td>
                    <td>
                        <input type="hidden" name="attr_foo_classes_bba1_total" value="0" />
                        <input title="= somme de BBA&#13;(&nbsp;première attaque&nbsp;)" type="number" name="attr_classes_bba1_total" class="strong" value="(@{foo_classes_bba1_total})" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="hidden" name="attr_foo_classes_bba2_total" value="0" />
                        <input title="= somme de BBA&#13; (&nbsp;attaque à outrance n°1&nbsp;)" type="number" name="attr_classes_bba2_total" class="strong" value="(@{foo_classes_bba2_total})" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="hidden" name="attr_foo_classes_bba3_total" value="0" />
                        <input title="= somme de BBA&#13; (&nbsp;attaque à outrance n°2&nbsp;)" type="number" name="attr_classes_bba3_total" class="strong" value="(@{foo_classes_bba3_total})" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="hidden" name="attr_foo_classes_bba4_total" value="0" />
                        <input title="= somme de BBA&#13; (&nbsp;attaque à outrance n°3&nbsp;)" type="number" name="attr_classes_bba4_total" class="strong" value="(@{foo_classes_bba4_total})" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="hidden" name="attr_foo_classes_reflexes_total" value="0" />
                        <input title="= somme de Réflexes" type="number" name="attr_classes_reflexes_total" class="strong" value="(@{foo_classes_reflexes_total})" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="hidden" name="attr_foo_classes_vigor_total" value="0" />
                        <input title="= somme de Vigueur" type="number" name="attr_classes_vigor_total" class="strong" value="(@{foo_classes_vigor_total})" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="hidden" name="attr_foo_classes_willpower_total" value="0" />
                        <input title="= somme de Volonté" type="number" name="attr_classes_willpower_total" class="strong" value="(@{foo_classes_willpower_total})" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="hidden" name="attr_foo_classes_level_total" value="0" />
                        <input title="= somme de Niveaux" type="number" name="attr_classes_level_total" class="strong" value="(@{foo_classes_level_total})" disabled="disabled"/>
                    </td>
                </tr>
                </tbody>
            </table>
            <fieldset class="repeating_classes">
                <table>
                    <tbody>
                    <tr>
                        <td width="25%">
                            <select name="attr_classes_name">
                                <option selected="selected"></option>
                                <optgroup label="Classes de base">
                                    <option value="1">Barbare</option>
                                    <option value="2">Barde</option>
                                    <option value="3">Druide</option>
                                    <option value="4">Ensorceleur</option>
                                    <option value="5">Guerrier</option>
                                    <option value="6">Magicien</option>
                                    <option value="7">Moine</option>
                                    <option value="8">Paladin</option>
                                    <option value="9">Prêtre</option>
                                    <option value="10">Rôdeur</option>
                                    <option value="11">Roublard</option>
                                </optgroup>
                                <optgroup label="Classes supplémentaires">
                                    <option value="12">Alchimiste</option>
                                    <option value="13">Antipaladin</option>
                                    <option value="14">Chasseur de vampire</option>
                                    <option value="15">Chevalier</option>
                                    <option value="16">Conjurateur</option>
                                    <option value="17">Inquisiteur</option>
                                    <option value="18">Justicier</option>
                                    <option value="19">Magus</option>
                                    <option value="20">Métamorphe</option>
                                    <option value="21">Ninja</option>
                                    <option value="22">Oracle</option>
                                    <option value="23">Pistolier</option>
                                    <option value="24">Samouraï</option>
                                    <option value="25">Sorcière</option>
                                </optgroup>
                                <optgroup label="Classes hybrides">
                                    <option value="26">Arcaniste</option>
                                    <option value="27">Bretteur</option>
                                    <option value="28">Chaman</option>
                                    <option value="29">Chasseur</option>
                                    <option value="30">Enquêteur</option>
                                    <option value="31">Lutteur</option>
                                    <option value="32">Prêtre combattant</option>
                                    <option value="33">Sanguin</option>
                                    <option value="34">Scalde</option>
                                    <option value="35">Tueur</option>
                                </optgroup>
                                <optgroup label="Classes Occultes">
                                    <option value="36">Cinétiste</option>
                                    <option value="37">Hypnotiseur</option>
                                    <option value="38">Médium</option>
                                    <option value="39">Occultiste</option>
                                    <option value="40">Psychiste</option>
                                    <option value="41">Spirite</option>
                                </optgroup>
                                <optgroup label="Classes de prestige">
                                    <option value="36">Archer mage</option>
                                    <option value="37">Arpenteur d'horizon</option>
                                    <option value="38">Assassin</option>
                                    <option value="39">Assassin pourpre</option>
                                    <option value="40">Champion occultiste</option>
                                    <option value="41">Chroniqueur</option>
                                    <option value="42">Disciple draconien</option>
                                    <option value="43">Duellites</option>
                                    <option value="44">Enfant divin</option>
                                    <option value="45">Fidèle défenseur</option>
                                    <option value="46">Gardien de la nature</option>
                                    <option value="47">Gardien du savoir</option>
                                    <option value="48">Héraut</option>
                                    <option value="49">Légionnaire infernal</option>
                                    <option value="50">Maître alchimiste</option>
                                    <option value="51">Maître des ombres</option>
                                    <option value="52">Maître espion</option>
                                    <option value="53">Mage des glyphes</option>
                                    <option value="54">Mystificateur profane</option>
                                    <option value="55">Pirate de haute-mer</option>
                                    <option value="56">Prohète enragé</option>
                                    <option value="57">Templier parjure</option>
                                    <option value="58">Théurge mystique</option>
                                    <option value="59">Vengeur sacré</option>
                                    <option value="60">Voyante</option>
                                </optgroup>
                                <optgroup label="Voies mythiques">
                                    <option value="61">Archimage</option>
                                    <option value="62">Champion</option>
                                    <option value="63">Filou</option>
                                    <option value="64">Hiérophante</option>
                                    <option value="65">Maréchal</option>
                                    <option value="66">Protecteur</option>
                                </optgroup>
                            </select>
                        </td>
                        <td width="8.333333%">
                            <input type="number" name="attr_classes_compniv" value="0" />
                        </td>
                        <td width="8.333333%">
                            <input type="number" name="attr_classes_bba1" value="0"/>
                        </td>
                        <td width="8.333333%">
                            <input type="number" name="attr_classes_bba2" value="0"/>
                        </td>
                        <td width="8.333333%">
                            <input type="number" name="attr_classes_bba3" value="0"/>
                        </td>
                        <td width="8.333333%">
                            <input type="number" name="attr_classes_bba4" value="0"/>
                        </td>
                        <td width="8.333333%">
                            <input type="number" name="attr_classes_reflexes" value="0"/>
                        </td>
                        <td width="8.333333%">
                            <input type="number" name="attr_classes_vigor" value="0"/>
                        </td>
                        <td width="8.333333%">
                            <input type="number" name="attr_classes_willpower" value="0"/>
                        </td>
                        <td width="8.333333%">
                            <input type="number" name="attr_classes_level" value="0"/>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </fieldset>
        </div>
        <div class="tab-content-break"></div>
    </div>

    <div class="tab-content">
        <h1>Combats</h1>

        <div class="initiative section">
            <h2>Initiative</h2>
            <table>
                <thead>
                <tr>
                    <td width="1%">
                        <div class="fake-button-roll"></div>
                    </td>
                    <th>
                        <span title="= Mod. + Divers">Total</span>
                    </th>
                    <th>
                        <span title="Modificateur de dextérité">Mod.</span>
                    </th>
                    <th>
                        <span>Divers</span>
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>
                        <button
                                title="test d'initiative&#13;Selectionner le personnage avant !"
                                type="roll"
                                value="(&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test d'iniative}} {{test=[[1D20+@{initiative_total} &{tracker}]]}})"
                                name="roll_initiative"
                        ></button>
                    </td>
                    <td>
                        <input type="number" name="attr_initiative_total" class="strong" value="(@{initiative_dexterity}+@{initiative_misc})" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="number" name="attr_initiative_dexterity" value="(@{character_dexterity_mod})" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="number" name="attr_initiative_misc" value="0" />
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="tab-content-break"></div>

        <div class="battlemoves section">
            <h2>Man&oelig;uvres de combat</h2>
            <table>
                <thead>
                <tr>
                    <td width="1%">
                        <div class="fake-button-roll"></div>
                    </td>
                    <th width="12%">
                        <span>Type</span>
                    </th>
                    <th width="12%">
                        <span title="= BBA + Taille Spé. + Mod. + Bonus + Temporaire + Divers">Total</span>
                    </th>
                    <th width="12%">
                        <span title="Bonus de Base à l'Attaque">BBA</span>
                    </th>
                    <th width="12%">
                        <span title="Modificateur de Taille Spécial">Taille Spé.</span>
                    </th>
                    <th width="12%" colspan="3">
                        <span title="Modificateurs">Mod.</span>
                    </th>
                    <th width="12%">
                        <span>Bonus</span>
                    </th>
                    <th width="12%">
                        <span>Temporaire</span>
                    </th>
                    <th width="12%">
                        <span>Divers</span>
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>
                        <button
                                title="test de man&oelig;uvre offensive"
                                type="roll"
                                value="(&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de man&oelig;uvre offensive}} {{test=[[1D20cf<1cs>20+@{cmb_total}]]}})"
                                name="roll_battlemoves_cmb"
                        ></button>
                    </td>
                    <td class="center">
                        <span title="bonus de Man&oelig;uvre offensive">BMO</span>
                    </td>
                    <td>
                        <input type="number" name="attr_cmb_total" class="strong" value="(@{foo_classes_bba1_total}+@{character_size_special}+@{cmb_mod_statistic_select}+@{cmb_bonus}+@{cmb_temporary}+@{cmb_misc})" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="number" name="attr_cmb_bba" value="(@{foo_classes_bba1_total})" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_cmb_size" value="(@{character_size_special})" disabled="disabled" />
                    </td>
                    <td colspan="3">
                        <div class="input-group">
                            <input type="number" name="attr_cmb_mod_statistic" value="(@{cmb_mod_statistic_select})" disabled="disabled" />
                            <select title="dextérité - &quot;infime&quot; à &quot;très petit&quot;&#13;force - &quot;petit&quot; à &quot;colossal&quot;" class="fixed-small" name="attr_cmb_mod_statistic_select">
                                <option value="(@{character_strength_mod})" selected="selected">For.</option>
                                <option value="(@{character_dexterity_mod})">Dex.</option>
                            </select>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_cmb_bonus" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_cmb_temporary" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_cmb_misc" value="0"/>
                    </td>
                </tr>
                <tr>
                    <td>
                    </td>
                    <td class="center">
                        <span title="Degré de Man&oelig;uvre Défensive">DMD</span>
                    </td>
                    <td>
                        <input type="number" name="attr_cmd_total" class="strong" value="(@{foo_classes_bba1_total}+@{character_size_special}+@{character_strength_mod}+@{character_dexterity_mod}+@{cmd_base}+@{cmd_bonus}+@{cmd_temporary}+@{cmd_misc})" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="number" name="attr_cmd_bba" value="(@{foo_classes_bba1_total})" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_cmd_size" value="(@{character_size_special})" disabled="disabled" />
                    </td>
                    <td>
                        <input title="Modificateur de force" type="number" name="attr_cmd_mod_strength" value="(@{character_strength_mod})" disabled="disabled" />
                    </td>
                    <td>
                        <input title="Modificateur de dextérité" type="number" name="attr_cmd_mod_dexteriy" value="(@{character_dexterity_mod})" disabled="disabled" />
                    </td>
                    <td>
                        <input title="Modificateur de base" type="number" name="attr_cmd_base" value="10" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="number" name="attr_cmd_bonus" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_cmd_temporary" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_cmd_misc" value="0"/>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="tab-content-break"></div>

        <div class="battle section">
            <h2>Attaques</h2>
            <fieldset class="repeating_battle">
                <div class="battle-content">
                    <div class="flex-row">
                        <div class="flex-col-auto battle-roll">
                            <button
                                    title="test d'attaque&#13;= 1d20 ( cs > Critique ) + Total&#13;&#13;dégâts sans critique :&#13;= Dégâts  + Mod. + Tenue de l'arme&#13;&#13;dégâts avec critique :&#13;= ( Dégâts  + Mod. + Tenue de l'arme ) &#215; facteur de Critique"
                                    type="roll"
                                    value="&{template:roll}{{battle=show}} {{who=@{character_name}}} {{attack_name=@{battle_name}}} {{test=[[1d20cf<1cs>@{battle_critic}+@{battle_total}]]}} {{damage=[[floor(@{battle_dices_count}d@{battle_dices}+@{battle_bonus}+@{battle_mod_strength_statistic}*@{battle_handler_select})]]}} {{damage_critic=[[floor((@{battle_dices_count}d@{battle_dices}+@{battle_bonus}+@{battle_mod_strength_statistic}*@{battle_handler_select})*@{battle_critic_multiplier})]]}} {{target_name=@{target|character_name}}} {{target_ca=[[@{target|defense_ca_total}]]}}"
                                    name="roll_battle"
                            ></button>
                        </div>
                        <div class="flex-col">
                            <div class="battle-subcontent">
                                <div class="accordion">
                                    <input class="accordion-checkbox" type="checkbox" name="battle-checkbox"  Title="Afficher / Masquer" />
                                    <div class="accordion-container">
                                        <div class="accordion-label battle-label">
                                            <div class="flex-row">
                                                <div class="flex-col4">
                                                    <input class="battle-name bold" type="text" name="attr_battle_name" placeholder="Nom de l'attaque" />
                                                </div>
                                                <div class="flex-col7">
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">Info. :</span>
                                                        </div>
                                                        <input class="text-left" type="text" name="attr_battle_status" />
                                                    </div>
                                                </div>
                                                <div class="flex-col1">
                                                    <input type="number" name="attr_battle_counter" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="accordion-content">
                                            <table>
                                                <thead>
                                                <tr>
                                                    <th width="14.285714%">
                                                        <span title="= BBA + Mod. + Taille + Éqpmt. + Temp. + Autre">Total</span>
                                                    </th>
                                                    <th width="14.285714%">
                                                        <span title="Bonus de Base à l'Attaque&#13;1er - première attaque&#13;2eme - attaque à outrance n°1&#13;3eme - attaque à outrance n°2&#13;4eme - attaque à outrance n°3">BBA</span>
                                                    </th>
                                                    <th width="14.285714%">
                                                        <span title="Modificateur de caractéristique">Mod.</span>
                                                    </th>
                                                    <th width="14.285714%">
                                                        <span>Taille</span>
                                                    </th>
                                                    <th width="14.285714%">
                                                        <span title="Équipement">Éqpmt.</span>
                                                    </th>
                                                    <th width="14.285714%">
                                                        <span title="Temporaire">Temp.</span>
                                                    </th>
                                                    <th width="14.285714%">
                                                        <span>Divers</span>
                                                    </th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr>
                                                    <td>
                                                        <input type="number" name="attr_battle_total" class="strong" value="(@{battle_bba_select}+@{battle_mod_statistic_select}+@{character_size}+@{battle_mod_equipment}+@{battle_mod_misc}+@{battle_mod_temporary})" disabled="disabled" />
                                                    </td>
                                                    <td>
                                                        <div class="input-group">
                                                            <input type="number" name="attr_battle_bba" value="(@{battle_bba_select})" disabled="disabled" />
                                                            <select class="fixed-small" name="attr_battle_bba_select">
                                                                <option value="(@{foo_classes_bba1_total})" selected="selected">1er</option>
                                                                <option value="(@{foo_classes_bba2_total})">2e</option>
                                                                <option value="(@{foo_classes_bba3_total})">3e</option>
                                                                <option value="(@{foo_classes_bba4_total})">4e</option>
                                                            </select>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="input-group">
                                                            <input type="number" name="attr_battle_mod_statistic" value="(@{battle_mod_statistic_select})" disabled="disabled" />
                                                            <select class="fixed-small" name="attr_battle_mod_statistic_select">
                                                                <option selected="selected" value="(@{character_strength_mod})">For.</option>
                                                                <option value="(@{character_dexterity_mod})">Dex.</option>
                                                            </select>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <input type="number" name="attr_battle_size" value="(@{character_size})" disabled="disabled" />
                                                    </td>
                                                    <td>
                                                        <input type="number" name="attr_battle_mod_equipment" value="0" />
                                                    </td>
                                                    <td>
                                                        <input type="number" name="attr_battle_mod_temporary" value="0" />
                                                    </td>
                                                    <td>
                                                        <input type="number" name="attr_battle_mod_misc" value="0" />
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>

                                            <table>
                                                <thead>
                                                <tr>
                                                    <th width="25%">
                                                        <span>Dégâts</span>
                                                    </th>
                                                    <th width="15%">
                                                        <span title="Modificateur de caractéristique de force&#13;non appliqué pour les armes à projectiles sauf les arcs composites et les frondes">Mod.</span>
                                                    </th>
                                                    <th width="35%">
                                                        <span>Tenue de l'arme</span>
                                                    </th>
                                                    <th width="25%">
                                                        <span>Critique</span>
                                                    </th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr>
                                                    <td>
                                                        <div class="input-group">
                                                            <input type="number" name="attr_battle_dices_count" value="1" min="1" step="1"/>
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text">d</span>
                                                            </div>
                                                            <select class="fixed-small" name="attr_battle_dices">
                                                                <option value="2" selected="selected">2</option>
                                                                <option value="3" selected="selected">3</option>
                                                                <option value="4" selected="selected">4</option>
                                                                <option value="6">6</option>
                                                                <option value="8">8</option>
                                                                <option value="10">10</option>
                                                                <option value="12">12</option>
                                                                <option value="20">20</option>
                                                                <option value="100">100</option>
                                                            </select>
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text">+</span>
                                                            </div>
                                                            <input type="number" name="attr_battle_bonus" value="0"/>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="input-group">
                                                            <input type="number" name="attr_battle_mod_strength_statistic" value="(@{battle_mod_strength_statistic_select})" disabled="disabled" />
                                                            <select class="fixed-small" name="attr_battle_mod_strength_statistic_select">
                                                                <option value="0">Aucun</option>
                                                                <option selected="selected" value="(@{character_strength_mod})">For.</option>
                                                            </select>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="input-group">
                                                            <input type="number" name="attr_battle_handler" value="(@{battle_handler_select})" disabled="disabled" />
                                                            <select class="fixed-large" name="attr_battle_handler_select">
                                                                <option value="1" selected="selected">à une main</option>
                                                                <option value="0.5">main secondaire</option>
                                                                <option value="1.5">à deux mains</option>
                                                            </select>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="input-group">
                                                            <select class="fixed-small" name="attr_battle_critic">
                                                                <option value="20" selected="selected">20</option>
                                                                <option value="19">19-20</option>
                                                                <option value="18">18-20</option>
                                                                <option value="17">17-20</option>
                                                                <option value="16">16-20</option>
                                                                <option value="15">15-20</option>
                                                                <option value="14">14-20</option>
                                                                <option value="13">13-20</option>
                                                                <option value="12">12-20</option>
                                                                <option value="11">11-20</option>
                                                                <option value="10">10-20</option>
                                                                <option value="9">9-20</option>
                                                                <option value="8">8-20</option>
                                                                <option value="7">7-20</option>
                                                                <option value="6">6-20</option>
                                                                <option value="5">5-20</option>
                                                                <option value="4">4-20</option>
                                                                <option value="3">3-20</option>
                                                                <option value="2">2-20</option>
                                                            </select>
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">&#215;</span>
                                                            </div>
                                                            <input type="number" name="attr_battle_critic_multiplier" value="1" min="0" />
                                                        </div>
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>
        </div>
        <div class="tab-content-break"></div>
    </div>

    <div class="tab-content">
        <h1>Magie</h1>

        <div class="nls section">
            <h2>Niveau de lanceur de sorts</h2>
            <table>
                <thead>
                <tr>
                    <td width="1%"></td>
                    <th width="33.333333%">
                        <span title="= NLS + Divers">Total</span>
                    </th>
                    <th width="33.333333%">
                        <span title="Niveau de Lanceur de Sort">NLS</span>
                    </th>
                    <th width="33.333333%">
                        <span>Divers</span>
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>
                        <button
                                title="test de niveau de lanceur de sorts"
                                type="roll"
                                value="(&{template:roll} {{nls=show}} {{who=@{character_name}}} {{test=[[1D20cs>20+@{nls_total}]]}} {{target_name=@{target|character_name}}} {{target_magic_resistance=[[@{target|magic_resistance_total}]]}} )"
                                name="roll_nls"
                        ></button>
                    </td>
                    <td>
                        <input type="number" name="attr_nls_total" class="strong" value="(@{nls_level}+@{nls_misc})" disabled="disabled"/>
                    </td>
                    <td>
                        <select class="fixed-small" name="attr_nls_level">
                            <option value="0" selected="selected">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                            <option value="13">13</option>
                            <option value="14">14</option>
                            <option value="15">15</option>
                            <option value="16">16</option>
                            <option value="17">17</option>
                            <option value="18">18</option>
                            <option value="19">19</option>
                            <option value="20">20</option>
                        </select>
                    </td>
                    <td>
                        <input type="number" name="attr_nls_misc" value="0"/>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="tab-content-break"></div>

        <div class="contact-attack section">
            <h2>Attaque de contact</h2>
            <table>
                <thead>
                <tr>
                    <td width="1%">
                        <div class="fake-button-roll"></div>
                    </td>
                    <th>
                        <span title="= BBA + Mod. + Taille + Équipement + Temporaire + Divers">Total</span>
                    </th>
                    <th>
                        <span title="Bonus de Base à l'Attaque&#13;1er - première attaque&#13;2eme - attaque à outrance n°1&#13;3eme - attaque à outrance n°2&#13;4eme - attaque à outrance n°3">BBA</span>
                    </th>
                    <th>
                        <span title="Modificateur de caractéristique&#13;corps à corps = Force&#13;à distance = Dextérité">Mod.</span>
                    </th>
                    <th>
                        <span>Taille</span>
                    </th>
                    <th>
                        <span>Équipement</span>
                    </th>
                    <th>
                        <span>Temporaire</span>
                    </th>
                    <th>
                        <span>Divers</span>
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>
                        <button
                                title="test d'attaque de contact&#13;retirer le bouclier de la cible s'il en est équipé"
                                type="roll"
                                value="&{template:roll}{{battle_contact=show}} {{who=@{character_name}}} {{test=[[1d20cf<1cs>20+@{contact_attack_total}]]}} {{target_name=@{target|character_name}}} {{target_ca=[[@{defense_ca_base}+@{foo_defense_dexterity}+@{defense_mod_size}+@{defense_mod_dodge}+@{defense_mod_parade}+@{defense_mod_misc}]]}}"
                                name="roll_contact_attack"
                        ></button>

                    </td>
                    <td>
                        <input type="number" name="attr_contact_attack_total" class="strong" value="(@{contact_attack_bba}+@{contact_attack_statistic}+@{character_size}+@{contact_attack_mod_equipment}+@{contact_attack_mod_misc}+@{contact_attack_mod_temporary})" disabled="disabled" />
                    </td>
                    <td>
                        <div class="input-group">
                            <input type="number" name="attr_contact_attack_bba" value="(@{contact_attack_mod_bba_select})" disabled="disabled" />
                            <select class="fixed-small" name="attr_contact_attack_mod_bba_select">
                                <option value="(@{foo_classes_bba1_total})" selected="selected">1er</option>
                                <option value="(@{foo_classes_bba2_total})">2e</option>
                                <option value="(@{foo_classes_bba3_total})">3e</option>
                                <option value="(@{foo_classes_bba4_total})">4e</option>
                            </select>
                        </div>
                    </td>
                    <td>
                        <div class="input-group">
                            <input type="number" name="attr_contact_attack_statistic" value="(@{contact_attack_statistic_select})" disabled="disabled" />
                            <select class="fixed-medium" name="attr_contact_attack_statistic_select">
                                <option selected="selected"></option>
                                <option value="(@{character_strength_mod})">corps à corps.</option>
                                <option value="(@{character_dexterity_mod})">à distance</option>
                            </select>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_contact_attack_size" value="(@{character_size})" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_contact_attack_mod_equipment" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_contact_attack_mod_temporary" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_contact_attack_mod_misc" value="0" />
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="tab-content-break"></div>

        <div class="spell-summary section">
            <h2>Sortilèges</h2>
            <table>
                <thead>
                <tr>
                    <th width="10%">
                        <span title="Sorts de niveau 0&#13;utilisé / maximum par jour">Niv. 0</span>
                    </th>
                    <th width="10%">
                        <span title="Sorts de niveau 1&#13;utilisé / maximum par jour">Niv. 1</span>
                    </th>
                    <th width="10%">
                        <span title="Sorts de niveau 2&#13;utilisé / maximum par jour">Niv. 2</span>
                    </th>
                    <th width="10%">
                        <span title="Sorts de niveau 3&#13;utilisé / maximum par jour">Niv. 3</span>
                    </th>
                    <th width="10%">
                        <span title="Sorts de niveau 4&#13;utilisé / maximum par jour">Niv. 4</span>
                    </th>
                    <th width="10%">
                        <span title="Sorts de niveau 5&#13;utilisé / maximum par jour">Niv. 5</span>
                    </th>
                    <th width="10%">
                        <span title="Sorts de niveau 6&#13;utilisé / maximum par jour">Niv. 6</span>
                    </th>
                    <th width="10%">
                        <span title="Sorts de niveau 7&#13;utilisé / maximum par jour">Niv. 7</span>
                    </th>
                    <th width="10%">
                        <span title="Sorts de niveau 8&#13;utilisé / maximum par jour">Niv. 8</span>
                    </th>
                    <th width="10%">
                        <span title="Sorts de niveau 9&#13;utilisé / maximum par jour">Niv. 9</span>
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>
                        <div class="input-group">
                            <input type="number" name="attr_magic-spells-level0-current" value="0" min="0" step="1" />
                            <div class="input-group-text">
                                <span data-i18n="separator">/</span>
                            </div>
                            <input type="number" name="attr_magic-spells-level0-max" value="0" min="0" step="1" />
                        </div>
                    </td>
                    <td>
                        <div class="input-group">
                            <input type="number" name="attr_magic-spells-level1-current" value="0" min="0" step="1" />
                            <div class="input-group-text">
                                <span data-i18n="separator">/</span>
                            </div>
                            <input type="number" name="attr_magic-spells-level1-max" value="0" min="0" step="1" />
                        </div>
                    </td>
                    <td>
                        <div class="input-group">
                            <input type="number" name="attr_magic-spells-level2-current" value="0" min="0" step="1" />
                            <div class="input-group-text">
                                <span data-i18n="separator">/</span>
                            </div>
                            <input type="number" name="attr_magic-spells-level2-max" value="0" min="0" step="1" />
                        </div>
                    </td>
                    <td>
                        <div class="input-group">
                            <input type="number" name="attr_magic-spells-level3-current" value="0" min="0" step="1" />
                            <div class="input-group-text">
                                <span data-i18n="separator">/</span>
                            </div>
                            <input type="number" name="attr_magic-spells-level3-max" value="0" min="0" step="1" />
                        </div>
                    </td>
                    <td>
                        <div class="input-group">
                            <input type="number" name="attr_magic-spells-level4-current" value="0" min="0" step="1" />
                            <div class="input-group-text">
                                <span data-i18n="separator">/</span>
                            </div>
                            <input type="number" name="attr_magic-spells-level5-max" value="0" min="0" step="1" />
                        </div>
                    </td>
                    <td>
                        <div class="input-group">
                            <input type="number" name="attr_magic-spells-level6-current" value="0" min="0" step="1" />
                            <div class="input-group-text">
                                <span data-i18n="separator">/</span>
                            </div>
                            <input type="number" name="attr_magic-spells-level7-max" value="0" min="0" step="1" />
                        </div>
                    </td>
                    <td>
                        <div class="input-group">
                            <input type="number" name="attr_magic-spells-level8-current" value="0" min="0" step="1" />
                            <div class="input-group-text">
                                <span data-i18n="separator">/</span>
                            </div>
                            <input type="number" name="attr_magic-spells-level8-max" value="0" min="0" step="1" />
                        </div>
                    </td>
                    <td>
                        <div class="input-group">
                            <input type="number" name="attr_magic-spells-level9-current" value="0" min="0" step="1" />
                            <div class="input-group-text">
                                <span data-i18n="separator">/</span>
                            </div>
                            <input type="number" name="attr_magic-spells-level9-max" value="0" min="0" step="1" />
                        </div>
                    </td>
                    <td>
                        <div class="input-group">
                            <input type="number" name="attr_magic-spells-level0-current" value="0" min="0" step="1" />
                            <div class="input-group-text">
                                <span data-i18n="separator">/</span>
                            </div>
                            <input type="number" name="attr_magic-spells-level0-max" value="0" min="0" step="1" />
                        </div>
                    </td>
                    <td>
                        <div class="input-group">
                            <input type="number" name="attr_magic-spells-level0-current" value="0" min="0" step="1" />
                            <div class="input-group-text">
                                <span data-i18n="separator">/</span>
                            </div>
                            <input type="number" name="attr_magic-spells-level0-max" value="0" min="0" step="1" />
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="tab-content-break"></div>

        <div class="spell section">
            <fieldset class="repeating_spell">
                <div class="spell-content">
                    <div class="flex-row">
                        <div class="flex-col-auto spell-roll">
                            <button
                                    title="test de concentration"
                                    type="roll"
                                    value="(&{template:roll} {{basic=show}} {{who=@{character_name}}} {{label=test de concentration ( @{spell_name} )}} {{test=[[1D20cs>20+@{spell_concentration_total}]]}})"
                                    name="roll_spell"
                            ></button>
                        </div>
                        <div class="flex-col">
                            <div class="spell-subcontent">
                                <div class="accordion">
                                    <input class="accordion-checkbox" type="checkbox" name="spell-checkbox"  Title="Afficher / Masquer" />
                                    <div class="accordion-container">
                                        <div class="accordion-label spell-label">
                                            <div class="flex-row">
                                                <div class="flex-col7">
                                                    <div class="input-group">
                                                        <div class="switch">
                                                            <input title="Préparé ?" type="checkbox" name="attr_spell_prepared" />
                                                            <span class="switch-face switch-on"></span>
                                                            <span class="switch-face switch-off"></span>
                                                        </div>
                                                        <input class="spell-name text-left bold" type="text" name="attr_spell_name" placeholder="Nom du sortilège" />
                                                        <div class="input-group-text">
                                                            <span>Niveau</span>
                                                        </div>
                                                        <select class="input-group-auto fixed-small" name="attr_spell_level">
                                                            <option value="" selected="selected"></option>
                                                            <option value="0">0</option>
                                                            <option value="1">1</option>
                                                            <option value="2">2</option>
                                                            <option value="3">3</option>
                                                            <option value="4">4</option>
                                                            <option value="5">5</option>
                                                            <option value="6">6</option>
                                                            <option value="7">7</option>
                                                            <option value="8">8</option>
                                                            <option value="9">9</option>
                                                        </select>
                                                    </div>
                                                </div>

                                                <div class="flex-col5">
                                                    <div class="input-group">
                                                        <div class="input-group-text">
                                                            <span>Portée</span>
                                                        </div>
                                                        <select name="attr_spell_range" class="fixed-medium input-group-auto">
                                                            <option value="0" selected="selected"></option>
                                                            <option value="1">personnelle</option>
                                                            <option value="2">contact</option>
                                                            <option value="3">courte</option>
                                                            <option value="4">moyenne</option>
                                                            <option value="5">longue</option>
                                                            <option value="6">illimité</option>
                                                        </select>
                                                        <input type="text" name="attr_spell_range_description" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="accordion-content">
                                            <div class="flex-row">
                                                <div class="flex-col7">
                                                    <div class="flex-row">
                                                        <div class="flex-col8">
                                                            <table>
                                                                <thead>
                                                                <tr>
                                                                    <th width="30%">
                                                                        <span title="= NLS + Mod. + Divers">Total</span>
                                                                    </th>
                                                                    <th width="40%">
                                                                        <span title="Modificateur de caractéristique">Mod.</span>
                                                                    </th>
                                                                    <th width="30%">
                                                                        <span>Divers</span>
                                                                    </th>
                                                                </tr>
                                                                </thead>
                                                                <tbody>
                                                                <tr>
                                                                    <td>
                                                                        <input type="number" name="attr_spell_concentration_total" class="strong" value="(@{nls_total}+@{spell_statistic_select}+@{spell_concentration_misc})" disabled="disabled" />
                                                                    </td>
                                                                    <td>
                                                                        <div class="input-group">
                                                                            <input type="number" name="attr_spell_statistic" value="(@{spell_statistic_select})" disabled="disabled" />
                                                                            <select class="fixed-small" name="attr_spell_statistic_select">
                                                                                <option selected="selected"></option>
                                                                                <option value="(@{character_intelligence_mod})">Int.</option>
                                                                                <option value="(@{character_wisdom_mod})" >Sag.</option>
                                                                                <option value="(@{character_charisma_mod})">Cha.</option>
                                                                            </select>
                                                                        </div>
                                                                    </td>
                                                                    <td>
                                                                        <input type="number" name="attr_spell_concentration_misc" value="0"/>
                                                                    </td>
                                                                </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                        <div class="flex-col4">
                                                             <table>
                                                                <thead>
                                                                <tr>
                                                                    <th width="50%">
                                                                        <span title="Degré de Difficulté du sortilèges&#13;= Base + Mod. + Niveau du sort">DD</span>
                                                                    </th>
                                                                    <th width="50%">
                                                                        <span>Base</span>
                                                                    </th>
                                                                </tr>
                                                                </thead>
                                                                <tbody>
                                                                <tr>
                                                                    <td>
                                                                        <input type="number" name="attr_spell_dd_total" class="strong" value="(@{spell_base}+@{spell_statistic_select}+@{spell_level})" disabled="disabled" />
                                                                    </td>
                                                                    <td>
                                                                        <input type="number" name="attr_spell_base" value="10" disabled="disabled" />
                                                                    </td>
                                                                </tr>
                                                                </tbody>
                                                            </table>                                                            
                                                        </div>
                                                    </div>

                                                    <textarea name="attr_spell_description"></textarea>
                                                </div>

                                                <div class="flex-col5">
                                                    <table>
                                                        <thead>
                                                        <tr>
                                                            <th>
                                                                <span>Composantes</span>
                                                            </th>
                                                            <th width="1%">
                                                                <span title="Résistance Magique ?">RM</span>
                                                            </th>
                                                        </tr>
                                                        </thead>
                                                        <tbody>
                                                        <tr>
                                                            <td>
                                                                <div class="coin">
                                                                    <input title="Verbale" type="checkbox" name="attr_spell_components_verbal" />
                                                                    <div class="coin-content">
                                                                        <span class="coin-face coin-on">V</span>
                                                                        <span class="coin-face coin-off">V</span>
                                                                    </div>
                                                                </div>
                                                                <div class="coin">
                                                                    <input title="Gestuelle" type="checkbox" name="attr_spell_components_gestural" />
                                                                    <div class="coin-content">
                                                                        <span class="coin-face coin-on">G</span>
                                                                        <span class="coin-face coin-off">G</span>
                                                                    </div>
                                                                </div>
                                                                <div class="coin">
                                                                    <input title="Matérielle" type="checkbox" name="attr_spell_components_material" />
                                                                    <div class="coin-content">
                                                                        <span class="coin-face coin-on">M</span>
                                                                        <span class="coin-face coin-off">M</span>
                                                                    </div>
                                                                </div>
                                                                <div class="coin">
                                                                    <input title="Focaliseur" type="checkbox" name="attr_spell_components_focalizing" />
                                                                    <div class="coin-content">
                                                                        <span class="coin-face coin-on">F</span>
                                                                        <span class="coin-face coin-off">F</span>
                                                                    </div>
                                                                </div>
                                                                <div class="coin">
                                                                    <input title="Focaliseur Divin" type="checkbox" name="attr_spell_components_divine_focalizing" />
                                                                    <div class="coin-content">
                                                                        <span class="coin-face coin-on">FD</span>
                                                                        <span class="coin-face coin-off">FD</span>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <td>
                                                                <div class="coin">
                                                                    <input type="checkbox" name="attr_spell_magic_resistance" />
                                                                    <div class="coin-content">
                                                                        <span class="coin-face coin-on">oui</span>
                                                                        <span class="coin-face coin-off">non</span>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        </tbody>
                                                    </table>

                                                    <table>
                                                        <thead>
                                                        <tr>
                                                            <th>
                                                                <span>École</span>
                                                            </th>
                                                        </tr>
                                                        </thead>
                                                        <tbody>
                                                        <tr>
                                                            <td>
                                                                <div class="input-group">
                                                                    <select name="attr_spell_school">
                                                                        <option value="0" selected="selected"></option>
                                                                        <optgroup label="Abjuration">
                                                                            <option value="1.1">Abjuration</option>
                                                                        </optgroup>
                                                                        <optgroup label="Divination">
                                                                            <option value="2.1">Divination</option>
                                                                            <option value="2.2">Scrutation</option>
                                                                        </optgroup>
                                                                        <optgroup label="Enchantement">
                                                                            <option value="3.1">Enchantement</option>
                                                                            <option value="3.2">Charme</option>
                                                                            <option value="3.3">Coercition</option>
                                                                        </optgroup>
                                                                        <optgroup label="Évocation">
                                                                            <option value="4.1">Évocation</option>
                                                                        </optgroup>
                                                                        <optgroup label="Illusion">
                                                                            <option value="5.1">illusion</option>
                                                                            <option value="5.2">Fantasme</option>
                                                                            <option value="5.3">Hallucination</option>
                                                                            <option value="5.4">Mirage</option>
                                                                            <option value="5.5">Ombre</option>
                                                                        </optgroup>
                                                                        <optgroup label="Invocation">
                                                                            <option value="6.1">Appel</option>
                                                                            <option value="6.2">Convocation</option>
                                                                            <option value="6.3">Création</option>
                                                                            <option value="6.4">Guérison</option>
                                                                            <option value="6.5">Invocation</option>
                                                                            <option value="6.6">Téléportation</option>
                                                                        </optgroup>
                                                                        <optgroup label="Nécromancie">
                                                                            <option value="7.1">Nécromancie</option>
                                                                        </optgroup>
                                                                        <optgroup label="Transmutation">
                                                                            <option value="8.1">Métamorphose</option>
                                                                            <option value="8.2">Transmutation</option>
                                                                        </optgroup>
                                                                    </select>
                                                                    <select name="attr_spell_register">
                                                                        <option value="0" selected="selected"></option>
                                                                        <option value="1">acide</option>
                                                                        <option value="2">air</option>
                                                                        <option value="3">bien</option>
                                                                        <option value="4">chaos</option>
                                                                        <option value="5">douleur</option>
                                                                        <option value="6">eau</option>
                                                                        <option value="7">électricité</option>
                                                                        <option value="8">émotion</option>
                                                                        <option value="9">feu</option>
                                                                        <option value="10">force</option>
                                                                        <option value="11">froid</option>
                                                                        <option value="12">langage</option>
                                                                        <option value="13">loi</option>
                                                                        <option value="14">lumière</option>
                                                                        <option value="15">mal</option>
                                                                        <option value="16">maladie</option>
                                                                        <option value="17">malédiction</option>
                                                                        <option value="18">mental</option>
                                                                        <option value="19">mort</option>
                                                                        <option value="20">ombre</option>
                                                                        <option value="21">poison</option>
                                                                        <option value="22">son</option>
                                                                        <option value="23">terre</option>
                                                                        <option value="24">terreur</option>
                                                                    </select>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        </tbody>
                                                    </table>

                                                    <table>
                                                        <thead>
                                                        <tr>
                                                            <th colspan="2">
                                                                <span>Cible / Zone</span>
                                                            </th>
                                                        </tr>
                                                        </thead>
                                                        <tbody>
                                                        <tr>
                                                            <td>
                                                                <input type="text" name="attr_spell_area" />
                                                            </td>
                                                        </tr>
                                                        </tbody>
                                                    </table>

                                                    <table>
                                                        <thead>
                                                        <tr>
                                                            <th>
                                                                <span>Durée</span>
                                                            </th>
                                                        </tr>
                                                        </thead>
                                                        <tbody>
                                                        <tr>
                                                            <td>
                                                                <div class="input-group">
                                                                    <select name="attr_spell_duration" class="fixed-medium input-group-auto">
                                                                        <option value="0" selected="selected">instantanée</option>
                                                                        <option value="1">permanente</option>
                                                                        <option value="2">concentration</option>
                                                                        <option value="3">sujets</option>
                                                                    </select>
                                                                    <input type="text" name="attr_spell_duration_description" />
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        </tbody>
                                                    </table>

                                                    <table>
                                                        <thead>
                                                        <tr>
                                                            <th colspan="2">
                                                                <span>Jet de sauvegarde</span>
                                                            </th>
                                                        </tr>
                                                        </thead>
                                                        <tbody>
                                                        <tr>
                                                            <td>
                                                                <div class="input-group">
                                                                    <select name="attr_spell_save" class="fixed-large input-group-auto">
                                                                        <option value="0" selected="selected">Aucun</option>
                                                                        <option value="1">annule</option>
                                                                        <option value="2">partiel</option>
                                                                        <option value="3">1/2 des dégâts</option>
                                                                        <option value="4">dévoile</option>
                                                                        <option value="5">inoffensif</option>
                                                                    </select>
                                                                    <input type="text" name="attr_spell_save_description" />
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>
        </div>
        <div class="tab-content-break"></div>
    </div>

    <div class="tab-content">
        <h1>Défense</h1>

        <div class="saves section">
            <h2>Sauvegardes</h2>
            <table>
                <thead>
                <tr>
                    <td width="1%">
                        <div class="fake-button-roll"></div>
                    </td>
                    <th width="12%">
                        <span>Type</span>
                    </th>
                    <th width="12%">
                        <span title="= Base + Mod. + Trait + Bonus + Résistance + Divers">Total</span>
                    </th>
                    <th width="12%">
                        <span>Base</span>
                    </th>
                    <th width="12%">
                        <span title="Modificateur de caractéristique">Mod.</span>
                    </th>
                    <th width="12%">
                        <span>Trait</span>
                    </th>
                    <th width="12%">
                        <span>Bonus</span>
                    </th>
                    <th width="12%">
                        <span>Résistance</span>
                    </th>
                    <th width="12%">
                        <span>Divers</span>
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>
                        <button
                                title="test de réflexe"
                                type="roll"
                                value="(&{template:roll} {{basic=show}} {{who=@{character_name}}} {{label=test de réflexe}} {{test=[[1D20cs>20+@{reflexes_total}]]}} )"
                                name="roll_reflexes"
                        ></button>
                    </td>
                    <td class="center">
                        <span>Réflexes</span>
                    </td>
                    <td>
                        <input type="number" name="attr_reflexes_total" class="strong" value="(@{reflexes_base}+@{reflexes_statistic}+@{reflexes_feat}+@{reflexes_bonus}+@{reflexes_resistance}+@{reflexes_misc})" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="number" name="attr_reflexes_base" value="(@{classes_reflexes_total})" disabled="disabled" />
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_reflexes_statistic" value="(@{character_dexterity_mod})" disabled="disabled"/>
                            <div class="input-group-text">
                                <span title="Dextérité">Dex.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_reflexes_feat" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_reflexes_bonus" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_reflexes_resistance" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_reflexes_misc" value="0"/>
                    </td>
                </tr>
                <tr>
                    <td>
                        <button
                                title="test de vigueur"
                                type="roll"
                                value="(&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de vigueur}} {{test=[[1D20cs>20+@{vigor_total}]]}})"
                                name="roll_vigor"
                        ></button>
                    </td>
                    <td class="center">
                        <span>Vigueur</span>
                    </td>
                    <td>
                        <input type="number" name="attr_vigor_total" class="strong"value="(@{vigor_base}+@{vigor_statistic}+@{vigor_feat}+@{vigor_bonus}+@{vigor_resistance}+@{vigor_misc})" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="number" name="attr_vigor_base" value="(@{classes_vigor_total})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_vigor_statistic" value="(@{character_constitution_mod})" disabled="disabled"/>
                            <div class="input-group-text">
                                <span title="Constitution">Con.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_vigor_feat" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_vigor_bonus" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_vigor_resistance" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_vigor_misc" value="0"/>
                    </td>
                </tr>
                <tr>
                    <td>
                        <button
                                title="test de volonté"
                                type="roll"
                                value="(&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de volonté}} {{test=[[1D20cs>20+@{willpower_total}]]}})"
                                name="roll_willpower"
                        ></button>
                    </td>
                    <td class="center">
                        <span>Volonté</span>
                    </td>
                    <td>
                        <input type="number" name="attr_willpower_total" class="strong" value="(@{willpower_base}+@{willpower_statistic}+@{willpower_feat}+@{willpower_bonus}+@{willpower_resistance}+@{willpower_misc})" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="number" name="attr_willpower_base" value="(@{classes_willpower_total})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_willpower_statistic" value="(@{character_wisdom_mod})" disabled="disabled"/>
                            <div class="input-group-text">
                                <span title="Sagesse">Sag.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_willpower_feat" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_willpower_bonus" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_willpower_resistance" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_willpower_misc" value="0"/>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="tab-content-break"></div>

        <div class="equipment-summary section">
            <h2>Classe d'armure</h2>
            <table>
                <thead>
                <tr>
                    <th width="11.1111%">
                        <span title="= Base + Armure + Dex. + Taille + Nat. + Esquive + Parade + Divers">Total</span>
                    </th>
                    <th width="11.1111%">
                        <span>Base</span>
                    </th>
                    <th width="11.1111%">
                        <span title="Bonus d'Armure">Armure</span>
                    </th>
                    <th width="11.1111%">
                        <span title="Modificateur de Dextérité&#13;peut être réduit par l'équipement">Dex.</span>
                    </th>
                    <th width="11.1111%">
                        <span>Taille</span>
                    </th>
                    <th width="11.1111%">
                        <span title="armure Naturelle">Nat.</span>
                    </th>
                    <th width="11.1111%">
                        <span>Esquive</span>
                    </th>
                    <th width="11.1111%">
                        <span>Parade</span>
                    </th>
                    <th width="11.1111%">
                        <span>Divers</span>
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>
                        <input type="hidden" name="attr_foo_defense_malus" value="0" />
                        <input type="number" name="attr_defense_ca_total" class="strong" value="(@{defense_ca_base}+@{foo_defense_ca_bonus}+@{foo_defense_dexterity}+@{character_size}+@{defense_mod_dodge}+@{defense_mod_parade}+@{defense_mod_race}+@{defense_mod_misc})" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_defense_ca_base" value="10" disabled="disabled" />
                    </td>
                    <td>
                        <input type="hidden" name="attr_foo_defense_ca_bonus" value="0" />
                        <input type="number" name="attr_defense_ca_bonus" value="(@{foo_defense_ca_bonus})" disabled="disabled" />
                    </td>
                    <td>
                        <input type="hidden" name="attr_foo_defense_dexterity" value="(@{foo_character_dexterity_total})" />
                        <input type="number" name="attr_defense_dexterity" value="(@{foo_defense_dexterity})" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_defense_mod_size" value="(@{character_size})" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_defense_mod_race" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_defense_mod_dodge" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_defense_mod_parade" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_defense_mod_misc" value="0" />
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="tab-content-break"></div>

        <div class="magic-resistance section">
            <h2>Résistance magique</h2>
            <table>
                <thead>
                <tr>
                    <th width="16.666666%">
                        <span title="= NLS + Racial + Sort + Objet + Divers">Total</span>
                    </th>
                    <th width="16.666666%">
                        <span title="Niveau de Lanceur de Sort">NLS</span>
                    </th>
                    <th width="16.666666%">
                        <span>Racial.</span>
                    </th>
                    <th width="16.666666%">
                        <span title="Sortilège">Sort</span>
                    </th>
                    <th width="16.666666%">
                        <span>Objet</span>
                    </th>
                    <th width="16.666666%">
                        <span>Divers</span>
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>
                        <input type="number" name="attr_magic_resistance_total" class="strong" value="(@{magic_resistance_nls}+@{magic_resistance_racial}+@{magic_resistance_spell}+@{magic_resistance_object}+@{magic_resistance_misc})" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="number" name="attr_magic_resistance_nls" value="(@{nls_total})" disabled="disabled"/>
                    </td>
                    <td>
                        <input type="number" name="attr_magic_resistance_racial" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_magic_resistance_spell" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_magic_resistance_object" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_magic_resistance_misc" value="0"/>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="tab-content-break"></div>
    </div>

    <div class="tab-content">
        <h1>Compétences</h1>

        <div class="skill-summary section-header">
            <div class="input-group">
                <div class="input-group-text">
                    <span>Rangs</span>
                </div>
                <input title="Rangs dépensés" type="number" name="attr_skill_sum" value="(
                @{skill_acrobatics_ranks}
                +@{skill_animal_training_ranks}
                +@{skill_artistry_ranks}
                +@{skill_appraise_ranks}
                +@{skill_bluff_ranks}
                +@{skill_climbing_ranks}
                +@{skill_career1_ranks}
                +@{skill_career2_ranks}
                +@{skill_career3_ranks}
                +@{skill_craft1_ranks}
                +@{skill_craft2_ranks}
                +@{skill_craft3_ranks}
                +@{skill_disguise_ranks}
                +@{skill_diplomacy_ranks}
                +@{skill_first_aid_ranks}
                +@{skill_fly_ranks}
                +@{skill_knowledge_arcana_ranks}
                +@{skill_knowledge_dungeon_ranks}
                +@{skill_knowledge_engineering_ranks}
                +@{skill_knowledge_geography_ranks}
                +@{skill_knowledge_history_ranks}
                +@{skill_knowledge_local_ranks}
                +@{skill_knowledge_nature_ranks}
                +@{skill_knowledge_plans_ranks}
                +@{skill_knowledge_religion_ranks}
                +@{skill_knowledge_nobility_ranks}
                +@{skill_horseback_riding_ranks}
                +@{skill_escape_ranks}
                +@{skill_intimidate_ranks}
                +@{skill_linguistics_ranks}
                +@{skill_swimming_ranks}
                +@{skill_perception_ranks}
                +@{skill_pickpocketing_ranks}
                +@{skill_psychology_ranks}
                +@{skill_representation1_ranks}
                +@{skill_representation2_ranks}
                +@{skill_representation3_ranks}
                +@{skill_sabotage_ranks}
                +@{skill_stealth_ranks}
                +@{skill_survival_ranks}
                +@{skill_spellcraft_ranks}
                +@{skill_use_of_magic_objects_ranks})" disabled="disabled" />
                <div class="input-group-text">
                    <span>/</span>
                </div>
                <input title="Rangs disponibles" type="number" name="attr_skill_remaining" value="(@{skill_total}-@{skill_sum}-@{skill_misc})" />
            </div>
        </div>

        <div class="skill section">
            <table>
                <thead>
                <tr>
                    <td width="1%">
                        <div class="fake-button-roll"></div>
                    </td>
                    <th width="1%">
                        <span title="Compétence de Classe ?">CC</span>
                    </th>
                    <th>
                        <span>Compétence</span>
                    </th>
                    <th width="8%">
                        <span>Rang</span>
                    </th>
                    <th width="8%">
                        <span title="= Rang + CC + Mod. - Malus + Trait + Don + Temp.">Total</span>
                    </th>
                    <th width="8%">
                        <span title="bonus de Compétence de Classe">CC</span>
                    </th>
                    <th width="8%">
                        <span title="Modificateur de caractéristique">Mod.</span>
                    </th>
                    <th width="8%">
                        <span title="Malus d'armure">Malus</span>
                    </th>
                    <th width="8%">
                        <span>Trait</span>
                    </th>
                    <th width="8%">
                        <span>Don</span>
                    </th>
                    <th width="8%">
                        <span title="Temporaire">Temp.</span>
                    </th>
                </tr>
                </thead>
                <tbody>
                <!-- acrobatics -->
                <tr>
                    <td>
                        <button
                                title="test d'acrobatie"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test d'acrobatie}} {{test=[[1D20cf<1cs>20+([[@{skill_acrobatics_total}]])]]}}"
                                name="roll_skill_acrobatics"
                        ></button>
                    </td>
                    <td>
                        <div class="coin">
                            <input type="checkbox" name="attr_skill_acrobatics_cc" value="((((3 * @{skill_acrobatics_ranks}) + 3) - abs((3 * @{skill_acrobatics_ranks}) - 3)) / 2)"/>
                            <div class="coin-content">
                                <span class="coin-face coin-on">oui</span>
                                <span class="coin-face coin-off">non</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span>Acrobatie</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_acrobatics_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_acrobatics_total" disabled="disabled" class="strong" value="(@{skill_acrobatics_ranks}+@{skill_acrobatics_cc}+@{skill_acrobatics_stat}-@{foo_defense_malus}+@{skill_acrobatics_trait}+@{skill_acrobatics_gift}+@{skill_acrobatics_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_acrobatics_class" value="(@{skill_acrobatics_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_acrobatics_stat" value="(@{character_dexterity_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Dex.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_acrobatics_malus" value="(@{foo_defense_malus})" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_acrobatics_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_acrobatics_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_acrobatics_temporary" value="0" />
                    </td>
                </tr>
                <!--spellcraft-->
                <tr>
                    <td>
                        <button
                                title="test d'art de la magie"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test d'art de la magie}} {{test=[[1D20cf<1cs>20+([[@{skill_spellcraft_total}]])]]}}"
                                name="roll_skill_spellcraft"
                        ></button>
                    </td>
                    <td>
                        <div class="coin">
                            <input type="checkbox" name="attr_skill_spellcraft_cc" value="((((3 * @{skill_spellcraft_ranks}) + 3) - abs((3 * @{skill_spellcraft_ranks}) - 3)) / 2)" />
                            <div class="coin-content">
                                <span class="coin-face coin-on">oui</span>
                                <span class="coin-face coin-off">non</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span title="formation requise !" class="alert"></span>
                        <span>Art de la magie</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_spellcraft_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_spellcraft_total" disabled="disabled" class="strong" value="(@{skill_spellcraft_ranks}+@{skill_spellcraft_cc}+@{skill_spellcraft_stat}+@{skill_spellcraft_trait}+@{skill_spellcraft_gift}+@{skill_spellcraft_temporary})"/>
                    </td>
                    <td>

                        <input type="number" name="attr_skill_spellcraft_class" value="(@{skill_spellcraft_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_spellcraft_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_spellcraft_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_spellcraft_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_spellcraft_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_spellcraft_temporary" value="0" />
                    </td>
                </tr>
                <!--bluff-->
                <tr>
                    <td>
                        <button
                                title="test de bluff"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de bluff}} {{test=[[1D20cf<1cs>20+([[@{skill_bluff_total}]])]]}}"
                                name="roll_skill_bluff"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_bluff_cc" value="((((3 * @{skill_bluff_ranks}) + 3) - abs((3 * @{skill_bluff_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span>Bluff</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_bluff_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_bluff_total" disabled="disabled" class="strong" value="(@{skill_bluff_ranks}+@{skill_bluff_cc}+@{skill_bluff_stat}+@{skill_bluff_trait}+@{skill_bluff_gift}+@{skill_bluff_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_bluff_class" value="(@{skill_bluff_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_bluff_stat" value="(@{character_charisma_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Cha.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_bluff_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_bluff_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_bluff_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_bluff_temporary" value="0" />
                    </td>
                </tr>
                <!-- knowledge_dungeon -->
                <tr>
                    <td>
                        <button
                                title="test de connaissances (&nbsp;exploration souterraine&nbsp;)"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de connaissance (&nbsp;exploration souterraine&nbsp;)}} {{test=[[1D20cf<1cs>20+([[@{skill_knowledge_dungeon_total}]])]]}}"
                                name="roll_skill_knowledge_dungeon"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_knowledge_dungeon_cc" value="((((3 * @{skill_knowledge_dungeon_ranks}) + 3) - abs((3 * @{skill_knowledge_dungeon_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span title="formation requise !" class="alert"></span>
                        <span>Connaissances (&nbsp;exploration souterraine&nbsp;)</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_dungeon_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_dungeon_total" disabled="disabled" class="strong" value="(@{skill_knowledge_dungeon_ranks}+@{skill_knowledge_dungeon_class}+@{skill_knowledge_dungeon_stat}+@{skill_knowledge_dungeon_trait}+@{skill_knowledge_dungeon_gift}+@{skill_knowledge_dungeon_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_dungeon_class" value="(@{skill_knowledge_dungeon_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_knowledge_dungeon_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_dungeon_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_dungeon_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_dungeon_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_dungeon_temporary" value="0" />
                    </td>
                </tr>
                <!-- knowledge_local -->
                <tr>
                    <td>
                        <button
                                title="test de connaissances (&nbsp;folklore local&nbsp;)"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de connaissances (&nbsp;folklore local&nbsp;)}} {{test=[[1D20cf<1cs>20+([[@{skill_knowledge_local_total}]])]]}}"
                                name="roll_skill_knowledge_local"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_knowledge_local_cc" value="((((3 * @{skill_knowledge_local_ranks}) + 3) - abs((3 * @{skill_knowledge_local_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span title="formation requise !" class="alert"></span>
                        <span>Connaissances (&nbsp;folklore local&nbsp;)</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_local_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_local_total" disabled="disabled" class="strong" value="(@{skill_knowledge_local_ranks}+@{skill_knowledge_local_class}+@{skill_knowledge_local_stat}+@{skill_knowledge_local_trait}+@{skill_knowledge_local_gift}+@{skill_knowledge_local_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_local_class" value="(@{skill_knowledge_local_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_knowledge_local_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_local_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_local_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_local_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_local_temporary" value="0" />
                    </td>
                </tr>
                <!-- knowledge_arcana -->
                <tr>
                    <td>
                        <button
                                title="test de connaissances (&nbsp;mystères&nbsp;)"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de connaissances (&nbsp;mystères&nbsp;)}} {{test=[[1D20cf<1cs>20+([[@{skill_knowledge_arcana_total}]])]]}}"
                                name="roll_skill_knowledge_arcana"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_knowledge_arcana_cc" value="((((3 * @{skill_knowledge_arcana_ranks}) + 3) - abs((3 * @{skill_knowledge_arcana_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span title="formation requise !" class="alert"></span>
                        <span>Connaissances (&nbsp;mystères&nbsp;)</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_arcana_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_arcana_total" disabled="disabled" class="strong" value="(@{skill_knowledge_arcana_ranks}+@{skill_knowledge_arcana_class}+@{skill_knowledge_arcana_stat}+@{skill_knowledge_arcana_trait}+@{skill_knowledge_arcana_gift}+@{skill_knowledge_arcana_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_arcana_class" value="(@{skill_knowledge_arcana_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_knowledge_arcana_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_arcana_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_arcana_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_arcana_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_arcana_temporary" value="0" />
                    </td>
                </tr>
                <!-- knowledge_nature -->
                <tr>
                    <td>
                        <button
                                title="test de connaissances (&nbsp;nature&nbsp;)"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de connaissances (&nbsp;nature&nbsp;)}} {{test=[[1D20cf<1cs>20+([[@{skill_knowledge_nature_total}]])]]}}"
                                name="roll_skill_knowledge_nature"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_knowledge_nature_cc" value="((((3 * @{skill_knowledge_nature_ranks}) + 3) - abs((3 * @{skill_knowledge_nature_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span title="formation requise !" class="alert"></span>
                        <span>Connaissances (&nbsp;nature&nbsp;)</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_nature_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_nature_total" disabled="disabled" class="strong" value="(@{skill_knowledge_nature_ranks}+@{skill_knowledge_nature_class}+@{skill_knowledge_nature_stat}+@{skill_knowledge_nature_trait}+@{skill_knowledge_nature_gift}+@{skill_knowledge_nature_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_nature_class" value="(@{skill_knowledge_nature_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_knowledge_nature_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_nature_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_nature_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_nature_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_nature_temporary" value="0" />
                    </td>
                </tr>
                <!-- knowledge_plans -->
                <tr>
                    <td>
                        <button
                                title="test de connaissances (&nbsp;plans&nbsp;)"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de connaissances (&nbsp;plans&nbsp;)}} {{test=[[1D20cf<1cs>20+([[@{skill_knowledge_plans_total}]])]]}}"
                                name="roll_skill_knowledge_plans"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_knowledge_plans_cc" value="((((3 * @{skill_knowledge_plans_ranks}) + 3) - abs((3 * @{skill_knowledge_plans_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span title="formation requise !" class="alert"></span>
                        <span>Connaissances (&nbsp;plans&nbsp;)</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_plans_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_plans_total" disabled="disabled" class="strong" value="(@{skill_knowledge_plans_ranks}+@{skill_knowledge_plans_class}+@{skill_knowledge_plans_stat}+@{skill_knowledge_plans_trait}+@{skill_knowledge_plans_gift}+@{skill_knowledge_plans_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_plans_class" value="(@{skill_knowledge_plans_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_knowledge_plans_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_plans_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_plans_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_plans_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_plans_temporary" value="0" />
                    </td>
                </tr>
                <!-- knowledge_religion -->
                <tr>
                    <td>
                        <button
                                title="test de connaissances (&nbsp;religion&nbsp;)"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de connaissances (&nbsp;religion&nbsp;)}} {{test=[[1D20cf<1cs>20+([[@{skill_knowledge_religion_total}]])]]}}"
                                name="roll_skill_knowledge_religion"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_knowledge_religion_cc" value="((((3 * @{skill_knowledge_religion_ranks}) + 3) - abs((3 * @{skill_knowledge_religion_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span title="formation requise !" class="alert"></span>
                        <span>Connaissances (&nbsp;religion&nbsp;)</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_religion_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_religion_total" disabled="disabled" class="strong" value="(@{skill_knowledge_religion_ranks}+@{skill_knowledge_religion_class}+@{skill_knowledge_religion_stat}+@{skill_knowledge_religion_trait}+@{skill_knowledge_religion_gift}+@{skill_knowledge_religion_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_religion_class" value="(@{skill_knowledge_religion_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_knowledge_religion_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_religion_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_religion_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_religion_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_religion_temporary" value="0" />
                    </td>
                </tr>
                <!-- disguise  -->
                <tr>
                    <td>
                        <button
                                title="test de déguisement"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de déguisement}} {{test=[[1D20cf<1cs>20+([[@{skill_disguise_total}]])]]}}"
                                name="roll_skill_disguise"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_disguise_cc" value="((((3 * @{skill_disguise_ranks}) + 3) - abs((3 * @{skill_disguise_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span>Déguisement</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_disguise_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_disguise_total" disabled="disabled" class="strong" value="(@{skill_disguise_ranks}+@{skill_disguise_cc}+@{skill_disguise_stat}+@{skill_disguise_trait}+@{skill_disguise_gift}+@{skill_disguise_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_disguise_class" value="(@{skill_disguise_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_disguise_stat" value="(@{character_charisma_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Cha.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_disguise_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_disguise_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_disguise_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_disguise_temporary" value="0" />
                    </td>
                </tr>
                <!-- diplomacy -->
                <tr>
                    <td>
                        <button
                                title="test de diplomatie"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de diplomatie}} {{test=[[1D20cf<1cs>20+([[@{skill_diplomacy_total}]])]]}}"
                                name="roll_skill_diplomacy"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_diplomacy_cc" value="((((3 * @{skill_diplomacy_ranks}) + 3) - abs((3 * @{skill_diplomacy_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span>Diplomatie</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_diplomacy_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_diplomacy_total" disabled="disabled" class="strong" value="(@{skill_diplomacy_ranks}+@{skill_diplomacy_cc}+@{skill_diplomacy_stat}+@{skill_diplomacy_trait}+@{skill_diplomacy_gift}+@{skill_diplomacy_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_diplomacy_class" value="(@{skill_diplomacy_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_diplomacy_stat" value="(@{character_charisma_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Cha.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_diplomacy_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_diplomacy_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_diplomacy_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_diplomacy_temporary" value="0" />
                    </td>
                </tr>
                <!-- stealth -->
                <tr>
                    <td>
                        <button
                                title="test de discrétion"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de discrétion}} {{test=[[1D20cf<1cs>20+([[@{skill_stealth_total}]])]]}}"
                                name="roll_skill_stealth"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_stealth_cc" value="((((3 * @{skill_stealth_ranks}) + 3) - abs((3 * @{skill_stealth_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span>Discrétion</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_stealth_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_stealth_total" disabled="disabled" class="strong" value="(@{skill_stealth_ranks}+@{skill_stealth_cc}+@{skill_stealth_stat}-@{foo_defense_malus}+@{skill_stealth_trait}+@{skill_stealth_gift}+@{skill_stealth_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_stealth_class" value="(@{skill_stealth_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_stealth_stat" value="(@{character_dexterity_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Dex.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_stealth_malus" value="(@{foo_defense_malus})" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_stealth_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_stealth_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_stealth_temporary" value="0" />
                    </td>
                </tr>
                <!-- horseback_riding -->
                <tr>
                    <td>
                        <button
                                title="test d'équitation"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test d'équitation}} {{test=[[1D20cf<1cs>20+([[@{skill_horseback_riding_total}]])]]}}"
                                name="roll_skill_horseback_riding"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_horseback_riding_cc" value="((((3 * @{skill_horseback_riding_ranks}) + 3) - abs((3 * @{skill_horseback_riding_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span>Équitation</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_horseback_riding_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_horseback_riding_total" disabled="disabled" class="strong" value="(@{skill_horseback_riding_ranks}+@{skill_horseback_riding_class}+@{skill_horseback_riding_stat}-@{foo_defense_malus}+@{skill_horseback_riding_trait}+@{skill_horseback_riding_gift}+@{skill_horseback_riding_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_horseback_riding_class" value="(@{skill_horseback_riding_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_horseback_riding_stat" value="(@{character_dexterity_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Dex.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_horseback_riding_malus" value="(@{foo_defense_malus})" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_horseback_riding_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_horseback_riding_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_horseback_riding_temporary" value="0" />
                    </td>
                </tr>
                <!-- pickpocketing -->
                <tr>
                    <td>
                        <button
                                title="test d'escamotage"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test d'escamotage}} {{test=[[1D20cf<1cs>20+([[@{skill_pickpocketing_total}]])]]}}"
                                name="roll_skill_pickpocketing"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_pickpocketing_cc" value="((((3 * @{skill_pickpocketing_ranks}) + 3) - abs((3 * @{skill_pickpocketing_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span title="formation requise !" class="alert"></span>
                        <span>Escamotage</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_pickpocketing_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_pickpocketing_total" disabled="disabled" class="strong" value="(@{skill_pickpocketing_ranks}+@{skill_pickpocketing_cc}+@{skill_pickpocketing_stat}-@{foo_defense_malus}+@{skill_pickpocketing_trait}+@{skill_pickpocketing_gift}+@{skill_pickpocketing_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_pickpocketing_class" value="(@{skill_pickpocketing_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_pickpocketing_stat" value="(@{character_dexterity_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Dex.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_pickpocketing_malus" value="(@{foo_defense_malus})" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_pickpocketing_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_pickpocketing_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_pickpocketing_temporary" value="0" />
                    </td>
                </tr>
                <!-- climbing -->
                <tr>
                    <td>
                        <button
                                title="test d'escalade"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test d'escalade}} {{test=[[1D20cf<1cs>20+([[@{skill_climbing_total}]])]]}}"
                                name="roll_skill_climbing"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_climbing_cc" value="((((3 * @{skill_climbing_ranks}) + 3) - abs((3 * @{skill_climbing_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span>Escalade</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_climbing_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_climbing_total" disabled="disabled" class="strong" value="(@{skill_climbing_ranks}+@{skill_climbing_cc}+@{skill_climbing_stat}-@{foo_defense_malus}+@{skill_climbing_trait}+@{skill_climbing_gift}+@{skill_climbing_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_climbing_class" value="(@{skill_climbing_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_climbing_stat" value="(@{character_strength_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">For.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_climbing_malus" value="(@{foo_defense_malus})" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_climbing_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_climbing_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_climbing_temporary" value="0" />
                    </td>
                </tr>
                <!-- escape -->
                <tr>
                    <td>
                        <button
                                title="test d'évasion"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test d'évasion}} {{test=[[1D20cf<1cs>20+([[@{skill_escape_total}]])]]}}"
                                name="roll_skill_escape"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_escape_cc" value="((((3 * @{skill_escape_ranks}) + 3) - abs((3 * @{skill_escape_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span>Évasion</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_escape_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_escape_total" disabled="disabled" class="strong" value="(@{skill_escape_ranks}+@{skill_escape_cc}+@{skill_escape_stat}-@{foo_defense_malus}+@{skill_escape_trait}+@{skill_escape_gift}+@{skill_escape_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_escape_class" value="(@{skill_escape_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_escape_stat" value="(@{character_dexterity_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Dex.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_escape_malus" value="(@{foo_defense_malus})" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_escape_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_escape_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_escape_temporary" value="0" />
                    </td>
                </tr>
                <!-- intimidate -->
                <tr>
                    <td>
                        <button
                                title="test de intimidation"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test d'intimidation}} {{test=[[1D20cf<1cs>20+([[@{skill_intimidate_total}]])]]}}"
                                name="roll_skill_intimidate"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_intimidate_cc" value="((((3 * @{skill_intimidate_ranks}) + 3) - abs((3 * @{skill_intimidate_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span>Intimidation</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_intimidate_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_intimidate_total" disabled="disabled" class="strong" value="(@{skill_intimidate_ranks}+@{skill_intimidate_cc}+@{skill_intimidate_stat}+@{skill_intimidate_trait}+@{skill_intimidate_gift}+@{skill_intimidate_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_intimidate_class" value="(@{skill_intimidate_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_intimidate_stat" value="(@{character_charisma_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Cha.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_intimidate_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_intimidate_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_intimidate_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_intimidate_temporary" value="0" />
                    </td>
                </tr>
                <!-- swimming -->
                <tr>
                    <td>
                        <button
                                title="test de natation"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de natation}} {{test=[[1D20cf<1cs>20+([[@{skill_swimming_total}]])]]}}"
                                name="roll_skill_swimming"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_swimming_cc" value="((((3 * @{skill_swimming_ranks}) + 3) - abs((3 * @{skill_swimming_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span>Natation</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_swimming_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_swimming_total" disabled="disabled" class="strong" value="(@{skill_swimming_ranks}+@{skill_swimming_cc}+@{skill_swimming_stat}-@{foo_defense_malus}+@{skill_swimming_trait}+@{skill_swimming_gift}+@{skill_swimming_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_swimming_class" value="(@{skill_swimming_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_swimming_stat" value="(@{character_strength_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">For.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_swimming_malus" value="(@{foo_defense_malus})" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_swimming_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_swimming_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_swimming_temporary" value="0" />
                    </td>
                </tr>
                <!-- perception -->
                <tr>
                    <td>
                        <button
                                title="test de perception"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de perception}} {{test=[[1D20cf<1cs>20+([[@{skill_perception_total}]])]]}}"
                                name="roll_skill_perception"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_perception_cc" value="((((3 * @{skill_perception_ranks}) + 3) - abs((3 * @{skill_perception_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span>Perception</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_perception_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_perception_total" disabled="disabled" class="strong" value="(@{skill_perception_ranks}+@{skill_perception_cc}+@{skill_perception_stat}+@{skill_perception_trait}+@{skill_perception_gift}+@{skill_perception_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_perception_class" value="(@{skill_perception_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_perception_stat" value="(@{character_wisdom_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Sag.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_perception_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_perception_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_perception_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_perception_temporary" value="0" />
                    </td>
                </tr>
                <!-- first_aid -->
                <tr>
                    <td>
                        <button
                                title="test de premiers secours"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de premiers secours}} {{test=[[1D20cf<1cs>20+([[@{skill_first_aid_total}]])]]}}"
                                name="roll_skill_first_aid"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_first_aid_cc" value="((((3 * @{skill_first_aid_ranks}) + 3) - abs((3 * @{skill_first_aid_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span>Premiers secours</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_first_aid_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_first_aid_total" disabled="disabled" class="strong" value="(@{skill_first_aid_ranks}+@{skill_first_aid_class}+@{skill_first_aid_stat}+@{skill_first_aid_trait}+@{skill_first_aid_gift}+@{skill_first_aid_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_first_aid_class" value="(@{skill_first_aid_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_first_aid_stat" value="(@{character_wisdom_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Sag.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_first_aid_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_first_aid_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_first_aid_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_first_aid_temporary" value="0" />
                    </td>
                </tr>
                <!-- psychology -->
                <tr>
                    <td>
                        <button
                                title="test de psychologie"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de psychologie}} {{test=[[1D20cf<1cs>20+([[@{skill_psychology_total}]])]]}}"
                                name="roll_skill_psychology"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_psychology_cc" value="((((3 * @{skill_psychology_ranks}) + 3) - abs((3 * @{skill_psychology_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span>Psychologie</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_psychology_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_psychology_total" disabled="disabled" class="strong" value="(@{skill_psychology_ranks}+@{skill_psychology_cc}+@{skill_psychology_stat}+@{skill_psychology_trait}+@{skill_psychology_gift}+@{skill_psychology_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_psychology_class" value="(@{skill_psychology_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_psychology_stat" value="(@{character_wisdom_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Sag.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_psychology_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_psychology_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_psychology_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_psychology_temporary" value="0" />
                    </td>
                </tr>
                <!-- sabotage -->
                <tr>
                    <td>
                        <button
                                title="test de sabotage"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de sabotage}} {{test=[[1D20cf<1cs>20+([[@{skill_sabotage_total}]])]]}}"
                                name="roll_skill_sabotage"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_sabotage_cc" value="((((3 * @{skill_sabotage_ranks}) + 3) - abs((3 * @{skill_sabotage_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span title="formation requise !" class="alert"></span>
                        <span>Sabotage</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_sabotage_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_sabotage_total" disabled="disabled" class="strong" value="(@{skill_sabotage_ranks}+@{skill_sabotage_cc}+@{skill_sabotage_stat}-@{foo_defense_malus}+@{skill_sabotage_trait}+@{skill_sabotage_gift}+@{skill_sabotage_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_sabotage_class" value="(@{skill_sabotage_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_sabotage_stat" value="(@{character_dexterity_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Dex.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_sabotage_malus" value="(@{foo_defense_malus})" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_sabotage_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_sabotage_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_sabotage_temporary" value="0" />
                    </td>
                </tr>
                <!-- survival -->
                <tr>
                    <td>
                        <button
                                title="test de survie"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de survie}} {{test=[[1D20cf<1cs>20+([[@{skill_survival_total}]])]]}}"
                                name="roll_skill_survival"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_survival_cc" value="((((3 * @{skill_survival_ranks}) + 3) - abs((3 * @{skill_survival_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span>Survie</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_survival_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_survival_total" disabled="disabled" class="strong" value="(@{skill_survival_ranks}+@{skill_survival_cc}+@{skill_survival_stat}+@{skill_survival_trait}+@{skill_survival_gift}+@{skill_survival_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_survival_class" value="(@{skill_survival_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_survival_stat" value="(@{character_wisdom_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Sag.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_survival_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_survival_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_survival_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_survival_temporary" value="0" />
                    </td>
                </tr>
                <!-- use_of_magic_objects -->
                <tr>
                    <td>
                        <button
                                title="test d'utilisation d'objets magiques"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test d'utilisation d'objets magiques}} {{test=[[1D20cf<1cs>20+([[@{skill_use_of_magic_objects_total}]])]]}}"
                                name="roll_skill_use_of_magic_objects"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_use_of_magic_objects_cc" value="((((3 * @{skill_use_of_magic_objects_ranks}) + 3) - abs((3 * @{skill_use_of_magic_objects_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span title="formation requise !" class="alert"></span>
                        <span>Utilisation d'objets magiques</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_use_of_magic_objects_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_use_of_magic_objects_total" disabled="disabled" class="strong" value="(@{skill_use_of_magic_objects_ranks}+@{skill_use_of_magic_objects_class}+@{skill_use_of_magic_objects_stat}+@{skill_use_of_magic_objects_trait}+@{skill_use_of_magic_objects_gift}+@{skill_use_of_magic_objects_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_use_of_magic_objects_class" value="(@{skill_use_of_magic_objects_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_use_of_magic_objects_stat" value="(@{character_charisma_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Cha.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_use_of_magic_objects_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_use_of_magic_objects_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_use_of_magic_objects_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_use_of_magic_objects_temporary" value="0" />
                    </td>
                </tr>
                <!-- fly -->
                <tr>
                    <td>
                        <button
                                title="test d'action aérienne)"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test d'actions aériennes)}} {{test=[[1D20cf<1cs>20+([[@{skill_fly_total}]])]]}}"
                                name="roll_skill_fly"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_fly_cc" value="((((3 * @{skill_fly_ranks}) + 3) - abs((3 * @{skill_fly_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span>Vol (&nbsp;action aérienne&nbsp;)</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_fly_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_fly_total" disabled="disabled" class="strong" value="(@{skill_fly_ranks}+@{skill_fly_cc}+@{skill_fly_stat}-@{foo_defense_malus}+@{skill_fly_trait}+@{skill_fly_gift}+@{skill_fly_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_fly_class" value="(@{skill_fly_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_fly_stat" value="(@{character_dexterity_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Dex.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_fly_malus" value="(@{foo_defense_malus})" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_fly_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_fly_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_fly_temporary" value="0" />
                    </td>
                </tr>
                </tbody>
            </table>

        </div>
        <div class="tab-content-break"></div>

        <div class="skill section">
            <table>
                <thead>
                <tr>
                    <td width="1%">
                        <div class="fake-button-roll"></div>
                    </td>
                    <th width="1%">
                        <span title="Compétence de Classe ?">CC</span>
                    </th>
                    <th>
                        <span>Compétence</span>
                    </th>
                    <th width="8%">
                        <span>Rang</span>
                    </th>
                    <th width="8%">
                        <span title="= Rang + CC + Mod. - Malus + Trait + Don + Temp.">Total</span>
                    </th>
                    <th width="8%">
                        <span title="bonus de Compétence de Classe">CC</span>
                    </th>
                    <th width="8%">
                        <span title="Modificateur de caractéristique">Mod.</span>
                    </th>
                    <th width="8%">
                        <span title="Malus d'armure">Malus</span>
                    </th>
                    <th width="8%">
                        <span>Trait</span>
                    </th>
                    <th width="8%">
                        <span>Don</span>
                    </th>
                    <th width="8%">
                        <span title="Temporaire">Temp.</span>
                    </th>
                </tr>
                </thead>
                <tbody>
                <!-- artistry -->
                <tr>
                    <td>
                        <button
                                title="test d'art"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test d'art ( @{skill_artistry_label} )}} {{test=[[1D20cf<1cs>20+([[@{skill_artistry_total}]])]]}}"
                                name="roll_skill_artistry"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_artistry_cc" value="((((3 * @{skill_artistry_ranks}) + 3) - abs((3 * @{skill_artistry_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="input-group">
                            <div class="input-group-text">
                                <span>Art :</span>
                            </div>
                            <input class="text-left" name="attr_skill_artistry_label" type="text" />
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_artistry_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_artistry_total" disabled="disabled" class="strong" value="(@{skill_artistry_ranks}+@{skill_artistry_cc}+@{skill_artistry_stat}+@{skill_artistry_trait}+@{skill_artistry_gift}+@{skill_artistry_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_artistry_class" value="(@{skill_artistry_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_artistry_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_artistry_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_artistry_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_artistry_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_artistry_temporary" value="0" />
                    </td>
                </tr>
                <!-- craft1 -->
                <tr>
                    <td>
                        <button
                                title="test d'artisanat"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test d'artisanat ( @{skill_craft1_label} )}} {{test=[[1D20cf<1cs>20+([[@{skill_craft1_total}]])]]}}"
                                name="roll_skill_craft1"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_craft1_cc" value="((((3 * @{skill_craft1_ranks}) + 3) - abs((3 * @{skill_craft1_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="input-group">
                            <div class="input-group-text">
                                <span>Artisanat :</span>
                            </div>
                            <input class="text-left" name="attr_skill_craft1_label" type="text">
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft1_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft1_total" disabled="disabled" class="strong" value="(@{skill_craft1_ranks}+@{skill_craft1_cc}+@{skill_craft1_stat}+@{skill_craft1_trait}+@{skill_craft1_gift}+@{skill_craft1_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft1_class" value="(@{skill_craft1_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_craft1_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft1_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft1_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft1_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft1_temporary" value="0" />
                    </td>
                </tr>
                <!-- craft2 -->
                <tr>
                    <td>
                        <button
                                title="test d'artisanat"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test d'artisanat ( @{skill_craft2_label} )}} {{test=[[1D20cf<1cs>20+([[@{skill_craft2_total}]])]]}}"
                                name="roll_skill_craft2"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_craft2_cc" value="((((3 * @{skill_craft2_ranks}) + 3) - abs((3 * @{skill_craft2_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="input-group">
                            <div class="input-group-text">
                                <span>Artisanat :</span>
                            </div>
                            <input class="text-left" name="attr_skill_craft2_label" type="text">
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft2_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft2_total" disabled="disabled" class="strong" value="(@{skill_craft2_ranks}+@{skill_craft2_cc}+@{skill_craft2_stat}+@{skill_craft2_trait}+@{skill_craft2_gift}+@{skill_craft2_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft2_class" value="(@{skill_craft2_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_craft2_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft2_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft2_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft2_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft2_temporary" value="0" />
                    </td>
                </tr>
                <!-- craft3 -->
                <tr>
                    <td>
                        <button
                                title="test d'artisanat"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test d'artisanat ( @{skill_craft3_label} )}} {{test=[[1D20cf<1cs>20+([[@{skill_craft3_total}]])]]}}"
                                name="roll_skill_craft3"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_craft3_cc" value="((((3 * @{skill_craft3_ranks}) + 3) - abs((3 * @{skill_craft3_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="input-group">
                            <div class="input-group-text">
                                <span>Artisanat :</span>
                            </div>
                            <input class="text-left" name="attr_skill_craft3_label" type="text">
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft3_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft3_total" disabled="disabled" class="strong" value="(@{skill_craft3_ranks}+@{skill_craft3_cc}+@{skill_craft3_stat}+@{skill_craft3_trait}+@{skill_craft3_gift}+@{skill_craft3_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft3_class" value="(@{skill_craft3_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_craft3_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft3_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft3_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft3_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_craft3_temporary" value="0" />
                    </td>
                </tr>
                <!-- knowledge_geography -->
                <tr>
                    <td>
                        <button
                                title="test de connaissances (&nbsp;géographie&nbsp;)"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de connaissances (&nbsp;géographie&nbsp;)}} {{test=[[1D20cf<1cs>20+([[@{skill_knowledge_geography_total}]])]]}}"
                                name="roll_skill_knowledge_geography"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_knowledge_geography_cc" value="((((3 * @{skill_knowledge_geography_ranks}) + 3) - abs((3 * @{skill_knowledge_geography_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span title="formation requise !" class="alert"></span>
                        <span>Connaissances (&nbsp;géographie&nbsp;)</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_geography_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_geography_total" disabled="disabled" class="strong" value="(@{skill_knowledge_geography_ranks}+@{skill_knowledge_geography_class}+@{skill_knowledge_geography_stat}+@{skill_knowledge_geography_trait}+@{skill_knowledge_geography_gift}+@{skill_knowledge_geography_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_geography_class" value="(@{skill_knowledge_geography_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_knowledge_geography_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_geography_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_geography_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_geography_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_geography_temporary" value="0" />
                    </td>
                </tr>
                <!-- knowledge_history -->
                <tr>
                    <td>
                        <button
                                title="test de connaissances (&nbsp;histoire&nbsp;)"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de connaissances (&nbsp;histoire&nbsp;)}} {{test=[[1D20cf<1cs>20+([[@{skill_knowledge_history_total}]])]]}}"
                                name="roll_skill_knowledge_history"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_knowledge_history_cc" value="((((3 * @{skill_knowledge_history_ranks}) + 3) - abs((3 * @{skill_knowledge_history_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span title="formation requise !" class="alert"></span>
                        <span>Connaissances (&nbsp;histoire&nbsp;)</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_history_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_history_total" disabled="disabled" class="strong" value="(@{skill_knowledge_history_ranks}+@{skill_knowledge_history_class}+@{skill_knowledge_history_stat}+@{skill_knowledge_history_trait}+@{skill_knowledge_history_gift}+@{skill_knowledge_history_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_history_class" value="(@{skill_knowledge_history_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_knowledge_history_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_history_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_history_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_history_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_history_temporary" value="0" />
                    </td>
                </tr>
                <!-- knowledge_engineering -->
                <tr>
                    <td>
                        <button
                                title="test de connaissances (&nbsp;ingénierie&nbsp;)"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de connaissances (&nbsp;ingénierie&nbsp;)}} {{test=[[1D20cf<1cs>20+([[@{skill_knowledge_engineering_total}]])]]}}"
                                name="roll_skill_knowledge_engineering"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_knowledge_engineering_cc" value="((((3 * @{skill_knowledge_engineering_ranks}) + 3) - abs((3 * @{skill_knowledge_engineering_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span title="formation requise !" class="alert"></span>
                        <span>Connaissances (&nbsp;ingénierie&nbsp;)</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_engineering_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_engineering_total" disabled="disabled" class="strong" value="(@{skill_knowledge_engineering_ranks}+@{skill_knowledge_engineering_class}+@{skill_knowledge_engineering_stat}+@{skill_knowledge_engineering_trait}+@{skill_knowledge_engineering_gift}+@{skill_knowledge_engineering_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_engineering_class" value="(@{skill_knowledge_engineering_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_knowledge_engineering_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_engineering_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_engineering_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_engineering_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_engineering_temporary" value="0" />
                    </td>
                </tr>
                <!-- knowledge_nobility -->
                <tr>
                    <td>
                        <button
                                title="test de connaissances (&nbsp;noblesse&nbsp;)"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de connaissances (&nbsp;noblesse&nbsp;)}} {{test=[[1D20cf<1cs>20+([[@{skill_knowledge_nobility_total}]])]]}}"
                                name="roll_skill_knowledge_nobility"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_knowledge_nobility_cc" value="((((3 * @{skill_knowledge_nobility_ranks}) + 3) - abs((3 * @{skill_knowledge_nobility_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span title="formation requise !" class="alert"></span>
                        <span>Connaissances (&nbsp;noblesse&nbsp;)</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_nobility_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_nobility_total" disabled="disabled" class="strong" value="(@{skill_knowledge_nobility_ranks}+@{skill_knowledge_nobility_class}+@{skill_knowledge_nobility_stat}+@{skill_knowledge_nobility_trait}+@{skill_knowledge_nobility_gift}+@{skill_knowledge_nobility_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_nobility_class" value="(@{skill_knowledge_nobility_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_knowledge_nobility_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_nobility_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_nobility_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_nobility_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_knowledge_nobility_temporary" value="0" />
                    </td>
                </tr>
                <!-- animal_training -->
                <tr>
                    <td>
                        <button
                                title="test de dressage"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de dressage}} {{test=[[1D20cf<1cs>20+([[@{skill_animal_training_total}]])]]}}"
                                name="roll_skill_animal_training"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_animal_training_cc" value="((((3 * @{skill_animal_training_ranks}) + 3) - abs((3 * @{skill_animal_training_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span title="formation requise !" class="alert"></span>
                        <span>Dressage</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_animal_training_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_animal_training_total" disabled="disabled" class="strong" value="(@{skill_animal_training_ranks}+@{skill_animal_training_class}+@{skill_animal_training_stat}+@{skill_animal_training_trait}+@{skill_animal_training_gift}+@{skill_animal_training_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_animal_training_class" value="(@{skill_animal_training_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_animal_training_stat" value="(@{character_charisma_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Cha.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_animal_training_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_animal_training_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_animal_training_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_animal_training_temporary" value="0" />
                    </td>
                </tr>
                <!-- appraise -->
                <tr>
                    <td>
                        <button
                                title="test d'estimation"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test d'estimation}} {{test=[[1D20cf<1cs>20+([[@{skill_appraise_total}]])]]}}"
                                name="roll_skill_appraise"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_appraise_cc" value="((((3 * @{skill_appraise_ranks}) + 3) - abs((3 * @{skill_appraise_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span>Estimation</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_appraise_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_appraise_total" disabled="disabled" class="strong" value="(@{skill_appraise_ranks}+@{skill_appraise_cc}+@{skill_appraise_stat}+@{skill_appraise_trait}+@{skill_appraise_gift}+@{skill_appraise_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_appraise_class" value="(@{skill_appraise_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_appraise_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_appraise_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_appraise_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_appraise_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_appraise_temporary" value="0" />
                    </td>
                </tr>
                <!-- linguistics -->
                <tr>
                    <td>
                        <button
                                title="test de linguistique"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de linguistique}} {{test=[[1D20cf<1cs>20+([[@{skill_linguistics_total}]])]]}}"
                                name="roll_skill_linguistics"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_linguistics_cc" value="((((3 * @{skill_linguistics_ranks}) + 3) - abs((3 * @{skill_linguistics_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span title="formation requise !" class="alert"></span>
                        <span>Linguistique</span>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_linguistics_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_linguistics_total" disabled="disabled" class="strong" value="(@{skill_linguistics_ranks}+@{skill_linguistics_cc}+@{skill_linguistics_stat}+@{skill_linguistics_trait}+@{skill_linguistics_gift}+@{skill_linguistics_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_linguistics_class" value="(@{skill_linguistics_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_linguistics_stat" value="(@{character_intelligence_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Int.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_linguistics_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_linguistics_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_linguistics_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_linguistics_temporary" value="0" />
                    </td>
                </tr>
                <!-- career1 -->
                <tr>
                    <td>
                        <button
                                title="test de profession"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de profession ( @{skill_career1_label} )}} {{test=[[1D20cf<1cs>20+([[@{skill_career1_total}]])]]}}"
                                name="roll_skill_career1"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_career1_cc" value="((((3 * @{skill_career1_ranks}) + 3) - abs((3 * @{skill_career1_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="input-group">
                            <div class="input-group-text">
                                <span>Profession&nbsp;:</span>
                            </div>
                            <input class="text-left" name="attr_skill_career1_label" type="text">
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career1_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career1_total" disabled="disabled" class="strong" value="(@{skill_career1_ranks}+@{skill_career1_cc}+@{skill_career1_stat}+@{skill_career1_trait}+@{skill_career1_gift}+@{skill_career1_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career1_class" value="(@{skill_career1_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_career1_stat" value="(@{character_wisdom_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Sag.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career1_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career1_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career1_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career1_temporary" value="0" />
                    </td>
                </tr>
                <!-- career2 -->
                <tr>
                    <td>
                        <button
                                title="test de profession"
                                type="roll" value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de profession ( @{skill_career2_label} )}} {{test=[[1D20cf<1cs>20+([[@{skill_career2_total}]])]]}}"
                                name="roll_skill_career2"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_career2_cc" value="((((3 * @{skill_career2_ranks}) + 3) - abs((3 * @{skill_career2_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="input-group">
                            <div class="input-group-text">
                                <span>Profession&nbsp;:</span>
                            </div>
                            <input class="text-left" name="attr_skill_career2_label" type="text">
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career2_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career2_total" disabled="disabled" class="strong" value="(@{skill_career2_ranks}+@{skill_career2_cc}+@{skill_career2_stat}+@{skill_career2_trait}+@{skill_career2_gift}+@{skill_career2_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career2_class" value="(@{skill_career2_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_career2_stat" value="(@{character_wisdom_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Sag.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career2_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career2_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career2_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career2_temporary" value="0" />
                    </td>
                </tr>
                <!-- career3 -->
                <tr>
                    <td>
                        <button
                                title="test de profession"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de profession ( @{skill_career3_label} )}} {{test=[[1D20cf<1cs>20+([[@{skill_career3_total}]])]]}}"
                                name="roll_skill_career3"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_career3_cc" value="((((3 * @{skill_career3_ranks}) + 3) - abs((3 * @{skill_career3_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="input-group">
                            <div class="input-group-text">
                                <span>Profession :</span>
                            </div>
                            <input class="text-left" name="attr_skill_career3_label" type="text">
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career3_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career3_total" disabled="disabled" class="strong" value="(@{skill_career3_ranks}+@{skill_career3_cc}+@{skill_career3_stat}+@{skill_career3_trait}+@{skill_career3_gift}+@{skill_career3_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career3_class" value="(@{skill_career3_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_career3_stat" value="(@{character_wisdom_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Sag.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career3_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career3_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career3_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_career3_temporary" value="0" />
                    </td>
                </tr>
                <!-- representation1 -->
                <tr>
                    <td>
                        <button
                                title="test de représentation"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de représentation ( @{skill_representation1_label} )}}{{test=[[1D20cf<1cs>20+([[@{skill_representation1_total}]])]]}}"
                                name="roll_skill_representation1"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_representation1_cc" value="((((3 * @{skill_representation1_ranks}) + 3) - abs((3 * @{skill_representation1_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="input-group">
                            <div class="input-group-text">
                                <span title="formation requise !" class="alert"></span>
                            </div>
                            <div class="input-group-text">
                                <span>Représentation :</span>
                            </div>
                            <input class="text-left" name="attr_skill_representation1_label" type="text">
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation1_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation1_total" disabled="disabled" class="strong" value="(@{skill_representation1_ranks}+@{skill_representation1_cc}+@{skill_representation1_stat}+@{skill_representation1_trait}+@{skill_representation1_gift}+@{skill_representation1_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation1_class" value="(@{skill_representation1_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_representation1_stat" value="(@{character_charisma_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Cha.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation1_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation1_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation1_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation1_temporary" value="0" />
                    </td>
                </tr>
                <!-- representation2 -->
                <tr>
                    <td>
                        <button
                                title="test de représentation"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de représentation ( @{skill_representation2_label} )}} {{test=[[1D20cf<1cs>20+([[@{skill_representation2_total}]])]]}}"
                                name="roll_skill_representation2"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_representation2_cc" value="((((3 * @{skill_representation2_ranks}) + 3) - abs((3 * @{skill_representation2_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="input-group">
                            <div class="input-group-text">
                                <span title="formation requise !" class="alert"></span>
                            </div>
                            <div class="input-group-text">
                                <span>Répresentation :</span>
                            </div>
                            <input class="text-left" name="attr_skill_representation2_label" type="text">
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation2_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation2_total" disabled="disabled" class="strong" value="(@{skill_representation2_ranks}+@{skill_representation2_cc}+@{skill_representation2_stat}+@{skill_representation2_trait}+@{skill_representation2_gift}+@{skill_representation2_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation2_class" value="(@{skill_representation2_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_representation2_stat" value="(@{character_charisma_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Cha.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation2_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation2_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation2_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation2_temporary" value="0" />
                    </td>
                </tr>
                <!-- representation3 -->
                <tr>
                    <td>
                        <button
                                title="test de représentation"
                                type="roll"
                                value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de représentation ( @{skill_representation3_label} )}} {{test=[[1D20cf<1cs>20+([[@{skill_representation3_total}]])]]}}"
                                name="roll_skill_representation3"
                        ></button>
                    </td>
                    <td>
                        <div class="input-group-append">
                            <div class="coin">
                                <input type="checkbox" name="attr_skill_representation3_cc" value="((((3 * @{skill_representation3_ranks}) + 3) - abs((3 * @{skill_representation3_ranks}) - 3)) / 2)"/>
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="input-group">
                            <div class="input-group-text">
                                <span title="formation requise !" class="alert"></span>
                            </div>
                            <div class="input-group-text">
                                <span>Représentation :</span>
                            </div>
                            <input class="text-left" name="attr_skill_representation3_label" type="text">
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation3_ranks" value="0"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation3_total" disabled="disabled" class="strong" value="(@{skill_representation3_ranks}+@{skill_representation3_cc}+@{skill_representation3_stat}+@{skill_representation3_trait}+@{skill_representation3_gift}+@{skill_representation3_temporary})"/>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation3_class" value="(@{skill_representation3_cc})" disabled="disabled"/>
                    </td>
                    <td>
                        <div class="input-group disabled">
                            <input type="number" name="attr_skill_representation3_stat" value="(@{character_charisma_mod})" disabled="disabled" />
                            <div class="input-group-append">
                                <span class="input-group-text">Cha.</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation3_malus" value="0" disabled="disabled" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation3_trait" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation3_gift" value="0" />
                    </td>
                    <td>
                        <input type="number" name="attr_skill_representation3_temporary" value="0" />
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="tab-content-break"></div>

        <div class="skill section">
            <table>
                <thead>
                <tr>
                    <td width="1%">
                        <div class="fake-button-roll"></div>
                    </td>
                    <th width="1%">
                        <span title="Compétence de Classe ?">CC</span>
                    </th>
                    <th>
                        <span>Compétence</span>
                    </th>
                    <th width="8%">
                        <span>Rang</span>
                    </th>
                    <th width="8%">
                        <span title="= Rang + CC + Mod. - Malus + Trait + Don + Temp.">Total</span>
                    </th>
                    <th width="8%">
                        <span title="bonus de Compétence de Classe">CC</span>
                    </th>
                    <th width="8%">
                        <span title="Modificateur de caractéristique">Mod.</span>
                    </th>
                    <th width="8%">
                        <span title="Malus d'armure">Malus</span>
                    </th>
                    <th width="8%">
                        <span>Trait</span>
                    </th>
                    <th width="8%">
                        <span>Don</span>
                    </th>
                    <th width="8%">
                        <span title="Temporaire">Temp.</span>
                    </th>
                </tr>
                </thead>
                <tbody>
                </tbody>
            </table>

            <fieldset class="repeating_skill">
                <table>
                    <tbody>
                    <tr>
                        <td width="1%">
                            <button
                                    title="test de lore"
                                    type="roll"
                                    value="&{template:roll}{{basic=show}} {{who=@{character_name}}} {{label=test de compétence ( @{skill_custom_label} )}} {{test=[[1D20cf<1cs>20+([[@{skill_custom_total}]])]]}}"
                                    name="roll_skill_custom"
                            ></button>
                        </td>
                        <td width="1%">
                            <div class="input-group">
                                <div class="coin">
                                    <input type="checkbox" name="attr_skill_custom_cc" value="((((3 * @{skill_custom_ranks}) + 3) - abs((3 * @{skill_custom_ranks}) - 3)) / 2)"/>
                                    <div class="coin-content">
                                        <span class="coin-face coin-on">oui</span>
                                        <span class="coin-face coin-off">non</span>
                                    </div>
                                </div>
                            </div>
                        </td>
                        <td width="1%"></td>
                        <td>
                            <input class="text-left" name="attr_skill_custom_label" type="text">
                        </td>
                        <td width="8%">
                            <input type="number" name="attr_skill_custom_ranks" value="0"/>
                        </td>
                        <td width="8%">
                            <input type="number" name="attr_skill_custom_total" disabled="disabled" class="strong" value="(@{skill_custom_ranks}+@{skill_custom_cc}+@{skill_custom_stat}+@{skill_custom_trait}+@{skill_custom_gift}+@{skill_custom_temporary})"/>
                        </td>
                        <td width="8%">
                            <input type="number" name="attr_skill_custom_class" value="(@{skill_custom_cc})" disabled="disabled"/>
                        </td>
                        <td width="8%">
                            <div class="input-group">
                                <input type="number" name="attr_skill_custom_stat" value="(@{skill_custom_stat_select})" disabled="disabled" />
                                <select class="fixed-small" name="attr_skill_custom_stat_select">
                                    <option value="(@{character_strength_mod})">For.</option>
                                    <option value="(@{character_dexterity_mod})">Dex.</option>
                                    <option value="(@{character_constitution_mod})">Con.</option>
                                    <option value="(@{character_intelligence_mod})" selected>Int.</option>
                                    <option value="(@{character_wisdom_mod})">Sag.</option>
                                    <option value="(@{character_charisma_mod})">Cha.</option>
                                </select>
                            </div>
                        </td>
                        <td width="8%">
                            <input type="number" name="attr_skill_custom_malus" value="0" disabled="disabled" />
                        </td>
                        <td width="8%">
                            <input type="number" name="attr_skill_custom_trait" value="0" />
                        </td>
                        <td width="8%">
                            <input type="number" name="attr_skill_custom_gift" value="0" />
                        </td>
                        <td width="8%">
                            <input type="number" name="attr_skill_custom_temporary" value="0" />
                        </td>
                    </tr>
                    </tbody>
                </table>
            </fieldset>
        </div>
        <div class="tab-content-break"></div>
    </div>

    <div class="tab-content">
        <h1>Talents</h1>

        <div class="flex-row">
            <div class="flex-col">
                <div class="feat-racial section">
                    <h2>Traits racial</h2>
                    <fieldset class="repeating_featracial">
                        <div class="featracial-content">
                            <input class="featracial-label text-left bold" type="text" placeholder="Nom du trait racial" name="attr_featracial_label">
                            <textarea class="featracial-description" name="attr_featracial_description" placeholder="Description complète du trait racial"></textarea>
                        </div>
                    </fieldset>
                </div>
            </div>
            <div class="flex-col">
                <div class="feat section">
                    <h2>Dons</h2>
                    <fieldset class="repeating_feat">
                        <div class="feat-content">
                            <div class="flex-row">
                                <div class="flex-col">
                                    <input type="text" class="text-left bold" name="attr_feat_name" placeholder="Nom du don">
                                </div>
                                <div class="flex-col5">
                                    <div class="input-group">
                                        <div class="input-group-text">
                                            <span>Utilisations</span>
                                        </div>
                                        <input type="number" name="attr_feat_user" value="0">
                                        <div class="input-group-text">
                                            <span data-i18n="separator">/</span>
                                        </div>
                                        <input type="number" name="attr_feat_user_max" value="1">
                                    </div>
                                </div>
                            </div>
                            <input class="feat-description-short text-left" type="text" name="attr_feat_description_short" placeholder="Description courte">
                            <textarea class="feat-description" name="attr_feat_description" placeholder="Description complète du don"></textarea>
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>
        <div class="tab-content-break"></div>
    </div>

    <div class="tab-content">
        <h1>Inventaire</h1>

        <div class="equipment-purse section-header">
            <div class="input-group">
                <div class="input-group-text">
                    <span>Bourse :</span>
                </div>
                <input type="number" name="attr_devise_gold" value="0" min="0" />
                <div class="input-group-text">
                    <span title="pièces d'or&#13;1 po = 10 pa" class="device device-gold"></span>
                </div>
                <input type="number" name="attr_devise_silver" value="0" min="0" />
                <div class="input-group-text">
                    <span title="pièces d'argent&#13;1 pa = 10 pc" class=" device device-silver"></span>
                </div>
                <input type="number" name="attr_devise_copper" value="0" min="0" />
                <div class="input-group-text">
                    <span title="pièces de cuivre" class="device device-copper"></span>
                </div>
            </div>
        </div>

        <div class="equipment-weapon section">
            <h2>Armes</h2>
            <table>
                <thead>
                <tr>
                    <th width="25%">
                        <span>Nom</span>
                    </th>
                    <th width="10%">
                        <span title="1d6, 2d8, ...">Dégâts</span>
                    </th>
                    <th width="120px">
                        <span title="facteur de Critiques">Crit.</span>
                    </th>
                    <th width="10%">
                        <span title="facteur de portée">Portée</span>
                    </th>
                    <th width="10%">
                        <span>Type</span>
                    </th>
                    <th>
                        <span>Spécial</span>
                    </th>
                </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
            <fieldset class="repeating_equipementweapon">
                <div class="equipment-weapon-content">
                    <table>
                        <tbody>
                        <tr>
                            <td width="25%">
                                <input type="text" name="attr_equipment_weapon_name" />
                            </td>
                            <td width="10%">
                                <input type="text" name="attr_equipment_weapon_damage" />
                            </td>
                            <td width="130px">
                                <div class="input-group">
                                    <select class="fixed-small" name="attr_equipment_weapon_critic">
                                        <option value="20" selected="selected">20</option>
                                        <option value="19">19-20</option>
                                        <option value="18">18-20</option>
                                        <option value="17">17-20</option>
                                        <option value="16">16-20</option>
                                        <option value="15">15-20</option>
                                        <option value="14">14-20</option>
                                        <option value="13">13-20</option>
                                        <option value="12">12-20</option>
                                        <option value="11">11-20</option>
                                        <option value="10">10-20</option>
                                        <option value="9">9-20</option>
                                        <option value="8">8-20</option>
                                        <option value="7">7-20</option>
                                        <option value="6">6-20</option>
                                        <option value="5">5-20</option>
                                        <option value="4">4-20</option>
                                        <option value="3">3-20</option>
                                        <option value="2">2-20</option>
                                    </select>
                                    <div class="input-group-append">
                                        <span class="input-group-text">&#215;</span>
                                    </div>
                                    <input type="number" name="attr_equipment_weapon_critic_multiplier" value="1" min="0" />
                                </div>
                            </td>
                            <td width="10%">
                                <input type="text" name="attr_equipment_weapon_range" value="CaC" />
                            </td>
                            <td width="10%">
                                <select class="fixed-small" name="attr_equipment_weapon_type">
                                    <option value="1" selected="selected">-</option>
                                    <option value="2">C</option>
                                    <option value="3">P</option>
                                    <option value="4">T</option>
                                    <option value="5">C/P</option>
                                    <option value="6">C/T</option>
                                    <option value="7">P/T</option>
                                </select>
                            </td>
                            <td>
                                <input type="text" name="attr_equipment_weapon_special" />
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </fieldset>
        </div>
        <div class="tab-content-break"></div>

        <div class="equipment-armor section">
            <h2>Armure</h2>
            <table>
                <thead>
                <tr>
                    <th width="4%">
                        <span title="Équipé ?">Éqp.</span>
                    </th>
                    <th width="26%">
                        <span>Nom</span>
                    </th>
                    <th width="10%">
                        <span title="Bonus d'Armure">BA</span>
                    </th>
                    <th width="10%">
                        <span title="Bonus de Dextérité Maximale">Dex. Max.</span>
                    </th>
                    <th width="10%">
                        <span title="Malus d'armure aux tests">Malus</span>
                    </th>
                    <th width="10%">
                        <span title="Risque d'Échec des sorts profanes">Échec</span>
                    </th>
                    <th width="30%">
                        <span>Spécial</span>
                    </th>
                </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
            <fieldset class="repeating_equipmentarmor">
                <table>
                    <thead>
                    <tr>
                        <td width="4%">
                            <div class="coin">
                                <input type="checkbox" name="attr_equipment_armor_worn" />
                                <div class="coin-content">
                                    <span class="coin-face coin-on">oui</span>
                                    <span class="coin-face coin-off">non</span>
                                </div>
                            </div>
                        </td>
                        <td width="26%">
                            <input type="text" name="attr_equipment_armor_name"/>
                        </td>
                        <td width="10%">
                            <input type="text" name="attr_equipment_armor_bonus"/>
                        </td>
                        <td width="10%">
                            <input type="text" name="attr_equipment_armor_dexterity_max"/>
                        </td>
                        <td width="10%">
                            <input type="text" name="attr_equipment_armor_malus"/>
                        </td>
                        <td width="10%">
                            <input type="text" name="attr_equipment_armor_spell_failure"/>
                        </td>
                        <td width="30%">
                            <input type="text" name="attr_equipment_armor_special" />
                        </td>
                    </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </fieldset>
        </div>
        <div class="tab-content-break"></div>

        <div class="flex-row">
            <div class="flex-col">
                <div class="inventory section">
                    <h2>Équipement</h2>
                    <fieldset class="repeating_inventory">
                        <div class="flex-row">
                            <div class="flex-col">
                                <input class="inventory-description" type="text" name="attr_inventory" placeholder="Description de l'objet" />
                            </div>
                            <div class="flex-col1">
                                <input class="inventory-quantity" type="number" name="attr_inventory_quantity_max" value="0"/>
                            </div>
                        </div>
                    </fieldset>
                </div>
            </div>

            <div class="flex-col">
                <div class="equipment-magic section">
                    <h2>Équipement magique</h2>
                    <table>
                        <thead>
                        <tr>
                            <td width="20%"></td>
                            <th>
                                <span>Nom</span>
                            </th>
                            <th>
                                <span>Description</span>
                            </th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>
                                <span>Tête</span>
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Head-name" />
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Head-description"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span>Front</span>
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Headband-name" />
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Headband-description"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span>Yeux</span>
                            </td>
                            <td>
                                <input type="text" name="attr_magical-equipment-name" />
                            </td>
                            <td>
                                <input type="text" name="attr_magical-equipment-description"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span>Cou</span>
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Neck-name" />
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Neck-description"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span>Épaules</span>
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Shoulders-name" />
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Shoulders-description"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span>Corps</span>
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Body-name" />
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Body-description"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span>Torse</span>
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Chest-name" />
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Chest-description"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span>Ceinture</span>
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Belt-name" />
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Belt-description"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span>Poignets</span>
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Wrist-name" />
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Wrist-description"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span>Main</span>
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Feet-name" />
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Feet-description"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span>1<sup>er</sup> doigt</span>
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Ring1-name" />
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Ring1-description"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span>2<sup>e</sup> doigt</span>
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Ring2-name" />
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Ring2-description"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span>Pieds</span>
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Eyes-name" />
                            </td>
                            <td>
                                <input type="text" name="attr_magical-worn-Eyes-description"/>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="tab-content-break"></div>
    </div>

    <div class="tab-content">
        <h1>Notes</h1>

        <fieldset class="repeating_note">
            <div class="note section">
                <input class="note-label text-left bold" type="text" name="attr_note-label" placeholder="Titre de la note" />
                <textarea class="note-content" name="attr_notes-content" placeholder="Contenu de la note"></textarea>
            </div>
            <div class="tab-content-break"></div>
        </fieldset>
    </div>
</div>

<rolltemplate class="sheet-rolltemplate-roll">
    {{#basic}}
    <div class="sheet-body sheet-basic">
        <p>
            <b>{{who}}</b>, {{label}} : {{test}}
        </p>
    </div>
    {{/basic}}

    {{#battle}}
    <div class="sheet-body sheet-battle">
        <div class="sheet-flex-row">
            <div class="sheet-flex-col sheet-left">
                <p>
                    <b>{{who}}</b><br />
                    {{attack_name}}<br />
                    <b>Attaque :</b> {{test}} <br />
                </p>
            </div>
            <div class="sheet-flex-col sheet-right">
                <p>
                    <b>{{target_name}}</b><br />
                    <b><span title="Class d'Armure">CA</span> :</b> {{target_ca}}<br />
                </p>
            </div>
        </div>

        <div class="sheet-center">
            <!-- CRITIC -->
            {{#rollWasCrit() test}}
            <p>
                <b class="sheet-danger">coup critique !</b><br />
                <b>dégâts : </b> {{damage_critic}}<br />
            </p>
            {{/rollWasCrit() test}}
            <!-- CRITIC -->

            <!-- NOT CRITIC -->
            {{#^rollWasCrit() test}}

            <!-- missed -->
            {{#rollLess() test target_ca}}
            <p>
                raté<br />
            </p>
            {{/rollLess() test target_ca}}

            <!-- hit -->
            {{#^rollLess() test target_ca}}
            <p>
                touché !<br />
                <b>dégâts</b> : {{damage}}<br />
            </p>
            {{/^rollLess() test target_ca}}

            {{/^rollWasCrit() test}}
            <!-- NOT CRITIC -->
        </div>
    </div>
    {{/battle}}

    {{#battle_contact}}
    <div class="sheet-body sheet-battle">
        <div class="sheet-flex-row">
            <div class="sheet-flex-col sheet-left">
                <p>
                    <b>{{who}}</b><br />
                    Attaque de contact<br />
                    <b>Attaque :</b> {{test}} <br />
                </p>
            </div>
            <div class="sheet-flex-col sheet-right">
                <p>
                    <b>{{target_name}}</b><br />
                    <b><span title="Class d'Armure rectifée">CA</span> :</b> {{target_ca}}<br />
                </p>
            </div>
        </div>

        <div class="sheet-center">
            <!-- CRITIC -->
            {{#rollWasCrit() test}}
            <p>
                <b class="sheet-danger">coup critique !</b>
            </p>
            {{/rollWasCrit() test}}
            <!-- CRITIC -->

            <!-- NOT CRITIC -->
            {{#^rollWasCrit() test}}

            <!-- missed -->
            {{#rollLess() test target_ca}}
            <p>
                raté<br />
            </p>
            {{/rollLess() test target_ca}}

            <!-- hit -->
            {{#^rollLess() test target_ca}}
            <p>
                touché !<br />
            </p>
            {{/^rollLess() test target_ca}}

            {{/^rollWasCrit() test}}
            <!-- NOT CRITIC -->
        </div>
    </div>
    {{/battle_contact}}

    {{#nls}}
    <div class="sheet-body sheet-nls">
        <div class="sheet-flex-row">
            <div class="sheet-flex-col sheet-left">
                <p>
                    <b>{{who}}</b><br />
                    <b><span title="Niveau de Lanceur de Sorts">NLS</span> :</b> {{test}}<br />
                </p>
            </div>
            <div class="sheet-flex-col sheet-right">
                <p>
                    <b>{{target_name}}</b><br />
                    <b><span title="Résistance Magique">RM</span> : </b> {{target_magic_resistance}}<br />
                </p>
            </div>
        </div>

        <div class="sheet-center">
            <!-- CRITIC -->
            {{#rollWasCrit() test}}
            <p>
                <b class="sheet-danger">réussite critique !</b><br />
            </p>
            {{/rollWasCrit() test}}
            <!-- CRITIC -->

            <!-- NOT CRITIC -->
            {{#^rollWasCrit() test}}

            <!-- missed -->
            {{#rollLess() test target_magic_resistance}}
            <p>
                {{target_name}} résiste au sort<br />
            </p>
            {{/rollLess() test target_magic_resistance}}

            <!-- hit -->
            {{#^rollLess() test target_magic_resistance}}
            <p>
                le sort touche {{target_name}} !<br />
            </p>
            {{/^rollLess() test target_magic_resistance}}

            {{/^rollWasCrit() test}}
            <!-- NOT CRITIC -->
        </div>
    </div>
    {{/nls}}
</rolltemplate>
